<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>TensorFlow å…¥é—¨ä¹‹ MNIST æ‰‹å†™ä½“æ•°å­—è¯†åˆ«é—®é¢˜ - When Art Meets Tech</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="When Art Meets Tech"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="When Art Meets Tech"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="æœ¬ç¯‡æˆ‘ä»¬å°†é’ˆå¯¹å®é™…ä¸­çš„å›¾åƒè¯†åˆ«é—®é¢˜ï¼Œä½¿ç”¨æ·±åº¦å­¦ä¹ å…¥é—¨çº§ MNIST æ‰‹å†™ä½“æ•°å­—è¯†åˆ«æ•°æ®é›†ï¼Œå¹¶ä¸”ç»“åˆä¸Šä¸€ç¯‡åšæ–‡ä¸­ç»™å‡ºçš„æ›´åˆç†çš„ç¥ç»ç½‘ç»œè®¾è®¡ä¸ä¼˜åŒ–æ–¹æ³•ï¼Œç»™å‡ºä¸€ä¸ªä½¿ç”¨ TF å®ç° MNIST æ‰‹å†™ä½“æ•°å­—è¯†åˆ«ç¥ç»ç½‘ç»œæ¨¡å‹ä¼˜åŒ–çš„æœ€ä½³å®è·µã€‚"><meta property="og:type" content="blog"><meta property="og:title" content="TensorFlow å…¥é—¨ä¹‹ MNIST æ‰‹å†™ä½“æ•°å­—è¯†åˆ«é—®é¢˜"><meta property="og:url" content="https://www.orangeshare.cn/2018/04/05/tensorflow-ru-men-zhi-mnist-shou-xie-ti-shu-zi-shi-bie-wen-ti/"><meta property="og:site_name" content="When Art Meets Tech"><meta property="og:description" content="æœ¬ç¯‡æˆ‘ä»¬å°†é’ˆå¯¹å®é™…ä¸­çš„å›¾åƒè¯†åˆ«é—®é¢˜ï¼Œä½¿ç”¨æ·±åº¦å­¦ä¹ å…¥é—¨çº§ MNIST æ‰‹å†™ä½“æ•°å­—è¯†åˆ«æ•°æ®é›†ï¼Œå¹¶ä¸”ç»“åˆä¸Šä¸€ç¯‡åšæ–‡ä¸­ç»™å‡ºçš„æ›´åˆç†çš„ç¥ç»ç½‘ç»œè®¾è®¡ä¸ä¼˜åŒ–æ–¹æ³•ï¼Œç»™å‡ºä¸€ä¸ªä½¿ç”¨ TF å®ç° MNIST æ‰‹å†™ä½“æ•°å­—è¯†åˆ«ç¥ç»ç½‘ç»œæ¨¡å‹ä¼˜åŒ–çš„æœ€ä½³å®è·µã€‚"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://s2.loli.net/2023/05/18/FwYeMytjCgr4IPG.png"><meta property="og:image" content="https://s2.loli.net/2023/05/26/b9fkesTp3aimohL.png"><meta property="og:image" content="https://s2.loli.net/2023/05/30/Uqku7wKWnoASOmc.png"><meta property="og:image" content="https://s2.loli.net/2023/05/30/hWBMrdlwe19E4qy.png"><meta property="og:image" content="https://s2.loli.net/2023/05/30/VjX5LKm7cFqwaBQ.png"><meta property="og:image" content="https://s2.loli.net/2023/05/30/H61iqQxElZLOGe4.png"><meta property="og:image" content="https://s2.loli.net/2023/05/31/MkgaebKwiFlsORJ.png"><meta property="og:image" content="https://s2.loli.net/2023/05/31/GmCeI4qvkBy2a3b.png"><meta property="og:image" content="https://s2.loli.net/2023/05/31/u2Dj8cPCdVGzEMn.png"><meta property="og:image" content="https://s2.loli.net/2023/05/31/VorUCn3NpdkItSX.png"><meta property="article:published_time" content="2018-04-05T03:14:46.000Z"><meta property="article:modified_time" content="2023-06-07T04:15:10.516Z"><meta property="article:author" content="Waldeinsamkeit"><meta property="article:tag" content="TensorFlow"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://s2.loli.net/2023/05/18/FwYeMytjCgr4IPG.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.orangeshare.cn/2018/04/05/tensorflow-ru-men-zhi-mnist-shou-xie-ti-shu-zi-shi-bie-wen-ti/"},"headline":"When Art Meets Tech","image":["https://s2.loli.net/2023/05/18/FwYeMytjCgr4IPG.png","https://s2.loli.net/2023/05/26/b9fkesTp3aimohL.png","https://s2.loli.net/2023/05/30/Uqku7wKWnoASOmc.png","https://s2.loli.net/2023/05/30/hWBMrdlwe19E4qy.png","https://s2.loli.net/2023/05/30/VjX5LKm7cFqwaBQ.png","https://s2.loli.net/2023/05/30/H61iqQxElZLOGe4.png","https://s2.loli.net/2023/05/31/MkgaebKwiFlsORJ.png","https://s2.loli.net/2023/05/31/GmCeI4qvkBy2a3b.png","https://s2.loli.net/2023/05/31/u2Dj8cPCdVGzEMn.png","https://s2.loli.net/2023/05/31/VorUCn3NpdkItSX.png"],"datePublished":"2018-04-05T03:14:46.000Z","dateModified":"2023-06-07T04:15:10.516Z","author":{"@type":"Person","name":"Waldeinsamkeit"},"description":"æœ¬ç¯‡æˆ‘ä»¬å°†é’ˆå¯¹å®é™…ä¸­çš„å›¾åƒè¯†åˆ«é—®é¢˜ï¼Œä½¿ç”¨æ·±åº¦å­¦ä¹ å…¥é—¨çº§ MNIST æ‰‹å†™ä½“æ•°å­—è¯†åˆ«æ•°æ®é›†ï¼Œå¹¶ä¸”ç»“åˆä¸Šä¸€ç¯‡åšæ–‡ä¸­ç»™å‡ºçš„æ›´åˆç†çš„ç¥ç»ç½‘ç»œè®¾è®¡ä¸ä¼˜åŒ–æ–¹æ³•ï¼Œç»™å‡ºä¸€ä¸ªä½¿ç”¨ TF å®ç° MNIST æ‰‹å†™ä½“æ•°å­—è¯†åˆ«ç¥ç»ç½‘ç»œæ¨¡å‹ä¼˜åŒ–çš„æœ€ä½³å®è·µã€‚"}</script><link rel="canonical" href="https://www.orangeshare.cn/2018/04/05/tensorflow-ru-men-zhi-mnist-shou-xie-ti-shu-zi-shi-bie-wen-ti/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Oxanium:wght@300;400;600&amp;family=Roboto+Mono"><link rel="stylesheet" href="/css/cyberpunk.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.2.0"></head>    <body class="is-3-column">    <nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="When Art Meets Tech" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Hexo Search" href="https://hexo.io/zh-cn/"><i class="fab fa-hotjar"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><i class="fas fa-angle-double-right"></i>TensorFlow å…¥é—¨ä¹‹ MNIST æ‰‹å†™ä½“æ•°å­—è¯†åˆ«é—®é¢˜</h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt">Â </i><time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2018-04-05</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check">Â </i><time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2023-06-07</time></span><span class="level-item"><a class="link-muted" href="/categories/DeepLearning/">DeepLearning</a></span><span class="level-item">an hour read (About 9084 words)</span></div></div><div class="content"><p>æœ¬ç¯‡æˆ‘ä»¬å°†é’ˆå¯¹å®é™…ä¸­çš„å›¾åƒè¯†åˆ«é—®é¢˜ï¼Œä½¿ç”¨æ·±åº¦å­¦ä¹ å…¥é—¨çº§ MNIST æ‰‹å†™ä½“æ•°å­—è¯†åˆ«æ•°æ®é›†ï¼Œå¹¶ä¸”ç»“åˆä¸Šä¸€ç¯‡åšæ–‡ä¸­ç»™å‡ºçš„æ›´åˆç†çš„ç¥ç»ç½‘ç»œè®¾è®¡ä¸ä¼˜åŒ–æ–¹æ³•ï¼Œç»™å‡ºä¸€ä¸ªä½¿ç”¨ TF å®ç° MNIST æ‰‹å†™ä½“æ•°å­—è¯†åˆ«ç¥ç»ç½‘ç»œæ¨¡å‹ä¼˜åŒ–çš„æœ€ä½³å®è·µã€‚</p>
<a id="more"></a>

<p>é…ç½®è¿‡ç¨‹ä¸­å‚è€ƒäº†ç½‘ç»œä¸Šå¾ˆå¤šçš„ç›¸å…³åšæ–‡ï¼Œä¹Ÿé‡åˆ°è¿‡å¾ˆå¤šå‘ï¼Œä¸ºäº†æ„Ÿè°¢é…ç½®è¿‡ç¨‹ä¸­å„ä½å¤§ä½¬çš„å¸®åŠ©ä»¥åŠæ–¹ä¾¿æœ¬äººä¸‹æ¬¡é…ç½®æˆ–è€…å‡çº§ï¼Œæ•´ç†ä»¥ä½œæ­¤æ–‡ã€‚</p>
<p><font color="green">æ›´å¤š TensorFlow æ¡†æ¶å­¦ä¹ ç›¸å…³å†…å®¹ï¼Œè¯·å…³æ³¨åšä¸»ç›¸å…³åšæ–‡ç³»åˆ— â†“â†“â†“â†“â†“</font></p>
<p>ä¹‹ä¸€ &gt;&gt;&gt;&gt; <a href="https://www.orangeshare.cn/2018/04/01/yi-wen-xiang-jie-quan-ping-tai-tensorflow-shen-du-xue-xi-kuang-jia-zai-xian-da-jian-cpu-gpu-zhi-chi/">ä¸€æ–‡è¯¦è§£å…¨å¹³å° TensorFlow æ·±åº¦å­¦ä¹ æ¡†æ¶åœ¨çº¿æ­å»º (CPU&amp;GPU æ”¯æŒ)</a></p>
<p>ä¹‹äºŒ &gt;&gt;&gt;&gt; <a href="https://www.orangeshare.cn/2018/04/02/tensorflow-gpu-zhi-chi-ubuntu16-04-nvidia-gtx-cuda-cudnn/">TensorFlow GPU æ”¯æŒ: Ubuntu16.04 + Nvidia GTX + CUDA + CUDNN</a></p>
<p>ä¹‹ä¸‰ &gt;&gt;&gt;&gt; <a href="https://www.orangeshare.cn/2018/04/03/tensorflow-ru-men-zhi-tf-ji-ben-gong-zuo-yuan-li/">TensorFlow å…¥é—¨ä¹‹ TF åŸºæœ¬å·¥ä½œåŸç†</a></p>
<p>ä¹‹å›› &gt;&gt;&gt;&gt; <a href="https://www.orangeshare.cn/2018/04/04/tensorflow-ru-men-zhi-shen-du-xue-xi-he-shen-ceng-shen-jing-wang-luo/">TensorFlow å…¥é—¨ä¹‹æ·±åº¦å­¦ä¹ å’Œæ·±å±‚ç¥ç»ç½‘ç»œ</a></p>
<p>ä¹‹äº” &gt;&gt;&gt;&gt; <a href="https://www.orangeshare.cn/2018/04/05/tensorflow-ru-men-zhi-mnist-shou-xie-ti-shu-zi-shi-bie-wen-ti/">TensorFlow å…¥é—¨ä¹‹ MNIST æ‰‹å†™ä½“æ•°å­—è¯†åˆ«é—®é¢˜</a></p>
<p>ä¹‹å…­ &gt;&gt;&gt;&gt; <a href="https://www.orangeshare.cn/">TensorFlow å…¥é—¨ä¹‹å›¾åƒè¯†åˆ«å’Œå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰</a></p>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<hr>
<h2 id="æçº²"><a href="#æçº²" class="headerlink" title="æçº²"></a>æçº²</h2><p>æœ¬ç¯‡ï¼Œæˆ‘ä»¬æ€»å…±å®‰æ’äº†ä¸‰ä¸ªç« èŠ‚æ¥è¿›è¡Œå­¦ä¹ ï¼š</p>
<p><strong>[1] &gt;&gt;&gt;&gt;</strong> ç®€å•ä»‹ç» MNIST æ‰‹å†™ä½“æ•°å­—å›¾åƒè¯†åˆ«æ•°æ®é›†ï¼Œå¹¶ç»™å‡º TensorFlow ç¨‹åºå¦‚ä½•å¤„ç† MNIST æ•°æ®é›†ä¸­æ•°æ®çš„è¯´æ˜ï¼›</p>
<p><strong>[2] &gt;&gt;&gt;&gt;</strong> åŸºäº MNIST æ‰‹å†™ä½“æ•°å­—å›¾åƒè¯†åˆ«é—®é¢˜ï¼ŒTF å®ç°ä¸Šä¸€ç¯‡åšæ–‡ä¸­ç»™å‡ºçš„æ›´åˆç†çš„ç¥ç»ç½‘ç»œè®¾è®¡ä¸ä¼˜åŒ–æ–¹æ³•ï¼Œä»¥ä»å®é™…é—®é¢˜è§’åº¦å±•ç¤ºä¸åŒä¼˜åŒ–æ–¹æ³•å¸¦æ¥çš„æ¨¡å‹æ€§èƒ½æå‡ï¼›</p>
<p><strong>[3] &gt;&gt;&gt;&gt;</strong> é€šè¿‡ TF å˜é‡å‘½åç©ºé—´ï¼Œæ¥è§£å†³ TensorFlow å˜é‡é‡ç”¨çš„é—®é¢˜ï¼Œæœ€ç»ˆç»™å‡º MNIST è¯†åˆ«é—®é¢˜çš„å®Œæ•´æ ·ä¾‹ã€‚</p>
<hr>
<h2 id="åˆè¯†-MNIST-æ•°æ®é›†"><a href="#åˆè¯†-MNIST-æ•°æ®é›†" class="headerlink" title="åˆè¯† MNIST æ•°æ®é›†"></a>åˆè¯† MNIST æ•°æ®é›†</h2><p>MNISTï¼ˆMixed National Institute of Standards and Technology Databaseï¼‰æ˜¯ä¸€ä¸ªéå¸¸æœ‰åçš„æ‰‹å†™ä½“æ•°å­—å›¾åƒè¯†åˆ«æ•°æ®é›†ï¼ˆNIST æ•°æ®é›†çš„ä¸€ä¸ªå­é›†ï¼‰ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå…¥é—¨çº§çš„è®¡ç®—æœºè§†è§‰æ•°æ®é›†ï¼ˆå¾ˆå¤šèµ„æ–™ä¼šå°†å…¶ä½œä¸ºæ·±åº¦å­¦ä¹ å…¥é—¨æ ·ä¾‹ï¼‰ã€‚å°±å¥½æ¯”ç¼–ç¨‹å…¥é—¨æœ‰ <code>Hello World</code>ï¼Œæœºå™¨å­¦ä¹ å…¥é—¨æœ‰ <strong>MNIST</strong>ã€‚</p>
<p>MNIST æ•°æ®é›†ä¸­åŒ…å«å„ç§æ‰‹å†™çš„æ•°å­—å›¾ç‰‡ï¼š</p>
<div align=center><img src="https://s2.loli.net/2023/05/18/FwYeMytjCgr4IPG.png"></div>

<p>MNIST å®˜æ–¹æ•°æ®é›†å¯ä»¥åˆ†æˆä¸¤éƒ¨åˆ†ï¼š</p>
<ul>
<li><code>60000</code> è¡Œçš„è®­ç»ƒæ•°æ®é›†ï¼ˆmnist.trainï¼‰</li>
<li><code>10000</code> è¡Œçš„æµ‹è¯•æ•°æ®é›†ï¼ˆmnist.testï¼‰</li>
</ul>
<p>å…¶ä¸­ï¼Œæ¯ä¸€è¡Œ MNIST æ•°æ®å•å…ƒï¼ˆæ•°æ®å¯¹è±¡ï¼‰ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šä¸€å¼ åŒ…å«æ‰‹å†™æ•°å­—çš„å›¾ç‰‡ï¼Œå’Œæ‰‹å†™æ•°å­—å›¾ç‰‡æ‰€å¯¹åº”çš„æ ‡ç­¾ã€‚</p>
<hr>
<h3 id="MNIST-æ•°æ®å•å…ƒ"><a href="#MNIST-æ•°æ®å•å…ƒ" class="headerlink" title="MNIST æ•°æ®å•å…ƒ"></a>MNIST æ•°æ®å•å…ƒ</h3><p><font color="yellow">æ‰‹å†™æ•°å­—å›¾åƒ</font> &gt;&gt;&gt;&gt; æ¯ä¸€å¼ å›¾ç‰‡éƒ½ä»£è¡¨äº†ä¸€ä¸ªæ‰‹å†™çš„ <code>0~9</code> ä¸­æ•°å­—çš„ç°åº¦å›¾ï¼ˆå•é€šé“å›¾åƒï¼‰ï¼Œå›¾ç‰‡å¤§å°ä¸º <code>28 px Ã— 28px</code>ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªåƒç´ çŸ©é˜µæ¥è¡¨ç¤ºæ‰‹å†™æ•°å­— <code>1</code> çš„å›¾ç‰‡ï¼š</p>
<div align=center><img src="https://s2.loli.net/2023/05/26/b9fkesTp3aimohL.png"></div>

<p>å…³äºå›¾åƒçš„åƒç´ çŸ©é˜µè¡¨ç¤ºæ–¹æ³•ï¼Œå¯å‚è€ƒæ–‡æ¡£ã€ &gt;&gt;&gt;&gt; <a href="https://www.orangeshare.cn/2018/02/01/the-pixel-matrix-representation-of-image/">The Pixel Matrix Representation Of Image</a> &lt;&lt;&lt;&lt;ã€‘ã€‚</p>
<p><font color="yellow">å›¾åƒæ ‡ç­¾</font> &gt;&gt;&gt;&gt; æ¯ä¸€ä¸ªæ‰‹å†™ä½“æ•°å­—å›¾ç‰‡ï¼Œéƒ½å¯¹åº” <code>0~9</code> ä¸­çš„ä»»æ„ä¸€ä¸ªæ•°å­—ã€‚</p>
<p>è™½ç„¶ MNIST æ•°æ®é›†ä¸­åªæä¾›äº†è®­ç»ƒæ•°æ®ï¼ˆè®­ç»ƒé›†ï¼‰å’Œæµ‹è¯•æ•°æ®ï¼ˆæµ‹è¯•é›†ï¼‰ï¼Œä½†æ˜¯ä¸ºäº†éªŒè¯æ¨¡å‹è®­ç»ƒæ—¶çš„æ•ˆæœï¼Œä½¿ç”¨æ—¶ä¸€èˆ¬ä¼šä»è®­ç»ƒæ•°æ®é›†ä¸­åˆ’åˆ†å‡ºä¸€éƒ¨åˆ†æ•°æ®ä½œä¸ºéªŒè¯æ•°æ®ï¼ˆé›†éªŒè¯é›†ï¼‰ã€‚</p>
<hr>
<h3 id="TensorFlow-Support"><a href="#TensorFlow-Support" class="headerlink" title="TensorFlow Support"></a>TensorFlow Support</h3><p>ä¸ºäº†åœ¨ TensorFlow ä¸­ä½¿ç”¨æ–¹ä¾¿ï¼ŒTF å¯¹ MNIST æ•°æ®é›†è¿›è¡Œäº†å†…éƒ¨å°è£…ï¼Œæä¾›äº†ä¸€ä¸ªç¤ºä¾‹æ¨¡å—æ¥å¤„ç† MNIST æ•°æ®é›†ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™ä¸ªæ¨¡å—ä¼šè‡ªåŠ¨ä¸‹è½½å¹¶è½¬æ¢ MNIST æ•°æ®æ ¼å¼ï¼Œå°†å…¶ä»åŸå§‹çš„æ•°æ®åŒ…ä¸­è§£ææˆè®­ç»ƒå’Œæµ‹è¯•ç¥ç»ç½‘ç»œæ—¶å¯ä»¥ä½¿ç”¨çš„æ•°æ®æ ¼å¼ã€‚</span></span><br><span class="line">tensorflow.examples.tutorials.mnist</span><br></pre></td></tr></table></figure>

<p>TF MNIST æ•°æ®é›†ä½¿ç”¨æ ·ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥ç”¨äºä¸‹è½½å’Œè¯»å– MNIST æ•°æ®é›†çš„æ¨¡å—:</span></span><br><span class="line"><span class="keyword">from</span> tensorflow.examples.tutorials.mnist <span class="keyword">import</span> input_data</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®š MNIST æ•°æ®é›†çš„ä¸‹è½½å’Œè¯»å–çš„è·¯å¾„ï¼š</span></span><br><span class="line">MNIST_data_Path = <span class="string">&quot;./MNIST_data/&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å– MNIST æ•°æ®é›†å¯¹è±¡</span></span><br><span class="line">mnist = input_data.read_data_sets(MNIST_data_Path, one_hot=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print mnist.train dataSet size :</span></span><br><span class="line">print(<span class="string">&quot;Training data size : &quot;</span>, mnist.train.num_examples)</span><br><span class="line"><span class="comment"># print mnist.validation dataSet size :</span></span><br><span class="line">print(<span class="string">&quot;Validating data size : &quot;</span>, mnist.validation.num_examples)</span><br><span class="line"><span class="comment"># print mnist.test dataSet size :</span></span><br><span class="line">print(<span class="string">&quot;Testing data size : &quot;</span>, mnist.test.num_examples)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print mnist.train.images[0] / mnist.train.labels[0] Format</span></span><br><span class="line">print(<span class="string">&quot;Example training dataï¼ˆimageï¼‰: &quot;</span>, <span class="string">&quot;\n&quot;</span>, mnist.train.images[<span class="number">0</span>])</span><br><span class="line">print(<span class="string">&quot;Example training data lable : &quot;</span>, mnist.train.labels[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¯èƒ½ç”±äºç½‘ç»œåŸå› å¯¼è‡´ MNIST æ•°æ®é›†ä¸‹è½½å¤±è´¥ï¼Œä½ å¯ä»¥å‚è€ƒ ã€ &gt;&gt;&gt;&gt; <a href="https://www.orangeshare.cn/DataSet/MNIST-Introduce/">MNIST Introduction</a> &lt;&lt;&lt;&lt;ã€‘è¿›è¡Œæ‰‹åŠ¨ä¸‹è½½ï¼ï¼ï¼</p>
</blockquote>
<p>ä¸‹è½½æˆåŠŸåï¼Œæ ·ä¾‹ç¨‹åºè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Successfully downloaded train-images-idx3-ubyte.gz <span class="number">9912422</span> <span class="built_in">bytes</span>.</span><br><span class="line">Extracting ./MNIST_data/train-images-idx3-ubyte.gz</span><br><span class="line">Successfully downloaded train-labels-idx1-ubyte.gz <span class="number">28881</span> <span class="built_in">bytes</span>.</span><br><span class="line">Extracting ./MNIST_data/train-labels-idx1-ubyte.gz</span><br><span class="line">Successfully downloaded t10k-images-idx3-ubyte.gz <span class="number">1648877</span> <span class="built_in">bytes</span>.</span><br><span class="line">Extracting ./MNIST_data/t10k-images-idx3-ubyte.gz</span><br><span class="line">Successfully downloaded t10k-labels-idx1-ubyte.gz <span class="number">4542</span> <span class="built_in">bytes</span>.</span><br><span class="line">Extracting ./MNIST_data/t10k-labels-idx1-ubyte.gz</span><br><span class="line">Training data size :  <span class="number">55000</span></span><br><span class="line">Validating data size :  <span class="number">5000</span></span><br><span class="line">Testing data size :  <span class="number">10000</span></span><br><span class="line">Example training data :  </span><br><span class="line"> [<span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span></span><br><span class="line"> <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span></span><br><span class="line"> <span class="number">1.</span>         .................</span><br><span class="line"> <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span></span><br><span class="line"> </span><br><span class="line"> <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.34901962</span> <span class="number">0.9843138</span>  <span class="number">0.9450981</span></span><br><span class="line"> <span class="number">0.3372549</span>  <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span></span><br><span class="line"> <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span></span><br><span class="line"> <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span></span><br><span class="line"> <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span></span><br><span class="line"> <span class="number">0.01960784</span> <span class="number">0.8078432</span>  <span class="number">0.96470594</span> <span class="number">0.6156863</span>  <span class="number">0.</span>         <span class="number">0.</span></span><br><span class="line"> <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span></span><br><span class="line"> <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span></span><br><span class="line"> <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span></span><br><span class="line"> <span class="number">1.</span>         ......................</span><br><span class="line"> <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.01568628</span> <span class="number">0.45882356</span></span><br><span class="line"> <span class="number">0.27058825</span> <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span></span><br><span class="line"> <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span></span><br><span class="line"> <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>         <span class="number">0.</span>        ]</span><br><span class="line">Example training data lable :  [<span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">1.</span> <span class="number">0.</span> <span class="number">0.</span>]</span><br></pre></td></tr></table></figure>

<p>ğŸ‘‡ğŸ‘‡ğŸ‘‡ <strong>MNIST æ•°æ®é›†åˆ’åˆ†</strong> ğŸ‘‡ğŸ‘‡ğŸ‘‡</p>
<p>å¯ä»¥çœ‹å‡ºï¼Œ<code>input_data.read_data_sets</code> å‡½æ•°ç”Ÿæˆçš„æ•°æ®é›†å¯¹è±¡ä¼šè‡ªåŠ¨å°† MNIST æ•°æ®é›†åˆ’åˆ†ä¸º <code>train</code> &amp;&amp; <code>validation</code> &amp;&amp; <code>test</code> ä¸‰ä¸ªæ•°æ®é›†ã€‚</p>
<p>å…¶ä¸­ï¼Œ<code>train</code> æ•°æ®é›†ä¸­åŒ…å« <code>55000</code> å¼ è®­ç»ƒå›¾ç‰‡ï¼Œ<code>validation</code> æ•°æ®é›†ä¸­åŒ…å« <code>5000</code> å¼ éªŒè¯å›¾ç‰‡ï¼Œå®ƒä»¬å…±åŒæ„æˆäº† MNIST è‡ªèº«æä¾›çš„è®­ç»ƒæ•°æ®é›†ã€‚<code>test</code> æ•°æ®é›†ä¸­åŒ…å«äº† <code>10000</code> å¼ æµ‹è¯•å›¾ç‰‡ï¼Œè¿™äº›å›¾ç‰‡éƒ½æ¥è‡ªäº MNIST æä¾›çš„æµ‹è¯•æ•°æ®é›†ã€‚</p>
<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p>ğŸ‘‡ğŸ‘‡ğŸ‘‡ <strong>å›¾åƒè¾“å…¥å’Œæ ‡ç­¾å¤„ç†</strong> ğŸ‘‡ğŸ‘‡ğŸ‘‡</p>
<p>FCNN ç¥ç»ç½‘ç»œç»“æ„çš„è¾“å…¥æ˜¯ä¸€ä¸ªç‰¹å¾å‘é‡ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦å°†ä¸€å¼ äºŒç»´å›¾åƒçš„åƒç´ çŸ©é˜µæ‰å¹³åŒ–å¤„ç†ä¸ºä¸€ç»´æ•°ç»„ï¼Œæ–¹ä¾¿ TF å°†å›¾ç‰‡çš„åƒç´ çŸ©é˜µæä¾›ç»™ç¥ç»ç½‘ç»œçš„è¾“å…¥å±‚ã€‚</p>
<p>æ•…ï¼ŒTF å°è£…æ¨¡å—å¤„ç†åçš„æ¯å¼ æ‰‹å†™æ•°å­—å›¾ç‰‡éƒ½æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º <code>784</code> çš„ä¸€ç»´æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ å¯¹åº”äº†å›¾ç‰‡åƒç´ çŸ©é˜µä¸­çš„ä»»æ„åƒç´ å€¼ï¼ˆ<code>28 * 28 = 784</code>ï¼‰ã€‚ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œåƒç´ çŸ©é˜µä¸­åƒç´ çš„ç°åº¦å€¼è¢«å½’ä¸€åŒ–åˆ° <code>[0, 1]</code>ï¼Œå®ƒä»£è¡¨äº†é¢œè‰²çš„æ·±æµ…ã€‚å…¶ä¸­ 0 è¡¨ç¤ºç™½è‰²èƒŒæ™¯ï¼ˆbackgroundï¼‰ï¼Œ1 è¡¨ç¤ºé»‘è‰²å‰æ™¯ï¼ˆforegroundï¼‰ã€‚</p>
<p>å¹¶ä¸”ï¼Œå¯¹æ‰‹å†™æ•°å­—å›¾ç‰‡æ‰€å¯¹åº”çš„æ ‡ç­¾ï¼Œè¿›è¡Œäº† <code>one-hot</code> ç¼–ç å¤„ç†ï¼Œæ–¹ä¾¿ç¥ç»ç½‘ç»œçš„åˆ†ç±»ä»»åŠ¡ã€‚one-hot æ ‡ç­¾æ•°ç»„æ˜¯ä¸€ä¸ª <code>10</code> ç»´ï¼ˆé•¿åº¦ä¸º 10ï¼‰çš„å‘é‡ï¼Œæ¯ä¸€ä¸ªç»´åº¦éƒ½å¯¹åº”äº† <code>0~9</code> ä¸­æ•°å­—ä¸­çš„ä¸€ä¸ªã€‚å½¢å¦‚ï¼š<code>[0,1,0,0,0,0,0,0,0,0]</code> &lt;&lt;&lt;&lt; æ•°å­— 1ã€‚</p>
<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p>ğŸ‘‡ğŸ‘‡ğŸ‘‡ <strong>Mini Batch æ”¯æŒ</strong> ğŸ‘‡ğŸ‘‡ğŸ‘‡</p>
<p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨å°æ‰¹é‡æ ·æœ¬æ¢¯åº¦ä¸‹é™ï¼ˆMGDï¼‰ï¼Œ<code>input_data.read_data_sets</code> å‡½æ•°ç”Ÿæˆçš„æ•°æ®é›†å¯¹è±¡è¿˜æä¾›äº† <strong>mnist.train.next_batch</strong> æ–¹æ³•ï¼Œå¯ä»¥å¿«é€Ÿä»æ‰€æœ‰çš„è®­ç»ƒæ•°æ®ä¸­è¯»å–ä¸€å°éƒ¨åˆ†æ•°æ®ä½œä¸ºä¸€ä¸ªè®­ç»ƒ batchã€‚</p>
<p>ä»¥ä¸‹ä»£ç æ˜¾ç¤ºå¦‚ä½•ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å– BATCH SIZE ä¸º 100 å¤§å°çš„è®­ç»ƒæ•°æ®ï¼š</span></span><br><span class="line">BATCH_SIZE = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">xs, ys = mnist.train.next_batch(BATCH_SIZE)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> (<span class="string">&#x27;X Shape: &#x27;</span>, xs.shape)  <span class="comment"># X Shape:  (100, 784)</span></span><br><span class="line"><span class="built_in">print</span> (<span class="string">&#x27;Y Shape: &#x27;</span>, ys.shape)  <span class="comment"># Y Shape:  (100, 10)</span></span><br></pre></td></tr></table></figure>

<p>å…³äº MNIST æ•°æ®é›†æ›´åŠ è¯¦ç»†çš„è¯´æ˜ä»¥åŠä½¿ç”¨ï¼Œè¯·å‚è§æ–‡æ¡£ã€ &gt;&gt;&gt;&gt; <a href="https://www.orangeshare.cn/2018/03/01/mnist-introduction/">MNIST Introduction</a> &lt;&lt;&lt;&lt;ã€‘ã€‚</p>
<hr>
<h2 id="MNIST-FCNN-æ¨¡å‹è®­ç»ƒä»¥åŠä¸åŒä¼˜åŒ–æ•ˆæœå¯¹æ¯”"><a href="#MNIST-FCNN-æ¨¡å‹è®­ç»ƒä»¥åŠä¸åŒä¼˜åŒ–æ•ˆæœå¯¹æ¯”" class="headerlink" title="MNIST FCNN æ¨¡å‹è®­ç»ƒä»¥åŠä¸åŒä¼˜åŒ–æ•ˆæœå¯¹æ¯”"></a>MNIST FCNN æ¨¡å‹è®­ç»ƒä»¥åŠä¸åŒä¼˜åŒ–æ•ˆæœå¯¹æ¯”</h2><p>è¿™ä¸€ç« èŠ‚ï¼Œé¦–å…ˆåŸºäº MNIST æ‰‹å†™ä½“æ•°å­—å›¾åƒè¯†åˆ«é—®é¢˜ç»™å‡ºä¸€ä¸ª TF å®ç°ï¼Œè¿™ä¸ªç¨‹åºæ•´åˆäº†ä¸Šä¸€ç¯‡åšæ–‡ä¸­ä»‹ç»çš„æ‰€æœ‰ä¼˜åŒ–æ–¹æ³•ã€‚</p>
<p>æ¥ç€ï¼Œä»‹ç»éªŒè¯/æµ‹è¯•æ•°æ®é›†åœ¨ç¥ç»ç½‘ç»œè®­ç»ƒè¿‡ç¨‹ä¸­çš„ä½œç”¨ã€‚é€šè¿‡å®éªŒæ•°æ®æ¥è¯æ˜ï¼Œç¥ç»ç½‘ç»œåœ¨éªŒè¯æ•°æ®é›†ä¸Šçš„è¡¨ç°å¯ä»¥è¿‘ä¼¼åœ°ä½œä¸ºè¯„ä»·ä¸åŒç¥ç»ç½‘ç»œæ¨¡å‹æ•ˆæœçš„æ ‡å‡†æˆ–è€…ä½œä¸ºè¿­ä»£è½®æ•°çš„ä¾æ®ã€‚</p>
<p>æœ€åï¼Œé€šè¿‡æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šçš„è¡¨ç°å¯¹æ¯”ä¸Šä¸€ç¯‡åšæ–‡ä¸­æåˆ°çš„ç¥ç»ç½‘ç»œç»“æ„è®¾è®¡å’Œå‚æ•°ä¼˜åŒ–çš„ä¸åŒæ–¹æ³•ï¼Œä»å®é™…é—®é¢˜ä¸­å±•ç¤ºä¸åŒä¼˜åŒ–æ–¹æ³•æ‰€å¸¦æ¥çš„æ€§èƒ½æå‡ã€‚</p>
<hr>
<h3 id="TF-å®ç°-MNIST-å›¾åƒè¯†åˆ«é—®é¢˜"><a href="#TF-å®ç°-MNIST-å›¾åƒè¯†åˆ«é—®é¢˜" class="headerlink" title="TF å®ç° MNIST å›¾åƒè¯†åˆ«é—®é¢˜"></a>TF å®ç° MNIST å›¾åƒè¯†åˆ«é—®é¢˜</h3><p>è¿™ä¸ªç¨‹åºæ•´åˆäº†ä¸Šä¸€ç¯‡åšæ–‡ä¸­ä»‹ç»çš„æ‰€æœ‰ä¼˜åŒ–æ–¹æ³•ï¼š</p>
<p>åœ¨ç¥ç»ç½‘ç»œç»“æ„è®¾è®¡ä¸Šé‡‡ç”¨å…¨è¿æ¥ç»“æ„ï¼Œå¼•å…¥éšè—å±‚ã€æ¿€æ´»å‡½æ•°ã€åç½®é¡¹ï¼›åœ¨è®­ç»ƒç¥ç»ç½‘ç»œä¸Šï¼Œå¼•å…¥è®¾ç½®æŒ‡æ•°è¡°å‡å­¦ä¹ ç‡ã€æ­£åˆ™åŒ–ä»¥åŠæ»‘åŠ¨å¹³å‡æ¨¡å‹ã€‚</p>
<p>è®­ç»ƒå¥½çš„ç¥ç»ç½‘ç»œæ¨¡å‹åœ¨ MNIST æµ‹è¯•æ•°æ®é›†ä¸Šå¯ä»¥è¾¾åˆ° <code>98.4%</code> å·¦å³çš„å‡†ç¡®ç‡ã€‚</p>
<p>å®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">  Hello TensorFlow : MNIST æ‰‹å†™ä½“æ•°å­—å›¾ç‰‡è¯†åˆ«</span></span><br><span class="line"><span class="string">  Neural Network Structure : Full Connection</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> timedelta</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line">warnings.filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line"><span class="comment"># import os</span></span><br><span class="line"><span class="comment"># os.environ[&#x27;TF_CPP_MIN_LOG_LEVEL&#x27;] = &#x27;2&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line">tf.compat.v1.logging.set_verbosity(tf.compat.v1.logging.ERROR)  <span class="comment"># å¿½ç•¥ TensorFlow è­¦å‘Šä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å…¥ç”¨äºä¸‹è½½å’Œè¯»å– MNIST æ•°æ®é›†çš„æ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> tensorflow.examples.tutorials.mnist <span class="keyword">import</span> input_data</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">###################### Part 1 : Macros Variables Define ######################</span></span><br><span class="line"><span class="comment">## 1. MNIST æ•°æ®é›†ç›¸å…³çš„å¸¸æ•° ##</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å›¾åƒåƒç´ ï¼ˆ28px * 28px åƒç´ çŸ©é˜µè½¬åŒ–ï¼‰ï¼Œè¾“å…¥å±‚çš„èŠ‚ç‚¹æ•°ï¼›</span></span><br><span class="line">INPUT_NODE = <span class="number">784</span></span><br><span class="line"><span class="comment"># è¾“å‡ºèŠ‚ç‚¹æ•°ï¼Œç­‰äºç±»åˆ«æ•°ç›®ã€‚åˆ†åˆ«å¯¹åº” `0~9` 10 ä¸ªæ•°å­—ç±»åˆ«ï¼›</span></span><br><span class="line">OUTPUT_NODE = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 2. é…ç½®ç¥ç»ç½‘ç»œä¸­çš„å‚æ•° ##</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Layes1: éšè—å±‚èŠ‚ç‚¹æ•°ï¼Œè¿™é‡Œè®¾ç½®åªæœ‰ä¸€å±‚éšè—å±‚ï¼ˆhidden layersï¼‰çš„ç½‘ç»œç»“æ„</span></span><br><span class="line">LAYER1_NODE = <span class="number">200</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ»‘åŠ¨å¹³å‡è¡°å‡ç‡</span></span><br><span class="line">MOVING_AVERAGE_DECAY = <span class="number">0.99</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æè¿°æ¨¡å‹å¤æ‚åº¦ï¼ˆç»“æ„é£é™©ï¼‰çš„æ­£åˆ™åŒ–é¡¹åœ¨æŸå¤±å‡½æ•°ä¸­çš„ç³»æ•°(lambda)</span></span><br><span class="line">REGULARIZATION_RATE = <span class="number">0.0001</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®åˆå§‹å­¦ä¹ ç‡</span></span><br><span class="line">LEARNING_RATE_BASE = <span class="number">0.8</span></span><br><span class="line"><span class="comment"># è®¾ç½®å­¦ä¹ ç‡çš„è¡°å‡ç‡</span></span><br><span class="line">LEARNING_RATE_DECAY = <span class="number">0.96</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®è®­ç»ƒè½®æ•°</span></span><br><span class="line">TRAINING_STEPS = <span class="number">30000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸€ä¸ªè®­ç»ƒ batch å—ä¸­çš„è®­ç»ƒæ•°æ®ä¸ªæ•°ã€‚</span></span><br><span class="line"><span class="comment"># batch æ•°å€¼è¶Šå°ï¼Œè®­ç»ƒè¿‡ç¨‹è¶Šæ¥è¿‘éšæœºæ¢¯åº¦ä¸‹é™ï¼›æ•°å€¼è¶Šå¤§ï¼Œè®­ç»ƒè¶Šæ¥è¿‘æ¢¯åº¦ä¸‹é™ã€‚</span></span><br><span class="line">BATCH_SIZE = <span class="number">100</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">###################### Part 2 : Referenced Function Define #####################</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;### [1] get_time_difï¼šæ—¶é—´å‡½æ•°</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    ç”¨äºè·å–ç¨‹åºä¸­æŸäº›åŠŸèƒ½æ¨¡å—æ‰€ä½¿ç”¨çš„æ—¶é—´ï¼ˆSecondsï¼‰</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_time_dif</span>(<span class="params">start_time</span>):</span></span><br><span class="line">    end_time = time.time()</span><br><span class="line">    time_diff = end_time - start_time</span><br><span class="line">    <span class="keyword">return</span> timedelta(seconds=time_diff)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; ### [2] inference : é€šè¿‡ç»™å®šçš„ FCNN è¾“å…¥å’Œæ‰€æœ‰å‚æ•°ï¼Œè®¡ç®— FCNN FP çš„ç»“æœ ## </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	å®šä¹‰äº†ä¸€ä¸ªå¸¦ ReLUï¼ˆéçº¿æ€§ï¼‰ æ¿€æ´»å‡½æ•°çš„ä¸‰å±‚å…¨è¿æ¥ç¥ç»ç½‘ç»œï¼Œå®ç°äº†å¤šå±‚ç½‘ç»œç»“æ„ä»¥åŠå»çº¿æ€§åŒ–ã€‚åŒæ—¶ï¼Œæ”¯æŒï¼šä¼ å…¥</span></span><br><span class="line"><span class="string">ç”¨äºè®¡ç®—å‚æ•°æ»‘åŠ¨å¹³å‡å€¼çš„ç±»ï¼Œæ–¹ä¾¿åœ¨æµ‹è¯•æ—¶ä½¿ç”¨æ»‘åŠ¨å¹³å‡æ¨¡å‹ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">inference</span>(<span class="params">input_tensor, avg_class, weights1, biases1, weights2, biases2</span>):</span></span><br><span class="line">    <span class="comment"># å½“æ²¡æœ‰æä¾›æ»‘åŠ¨å¹³å‡ç±»æ—¶ï¼Œç›´æ¥ä½¿ç”¨å‚æ•°å½“å‰çš„å–å€¼</span></span><br><span class="line">    <span class="keyword">if</span> avg_class == <span class="literal">None</span>:</span><br><span class="line">        <span class="comment"># è®¡ç®—éšè—å±‚çš„ FP ç»“æœï¼Œæ¿€æ´»å‡½æ•°ä¸º ReLU:</span></span><br><span class="line">        layer1 = tf.nn.relu(tf.matmul(input_tensor, weights1) + biases1)</span><br><span class="line">        <span class="keyword">return</span> tf.matmul(layer1, weights2) + biases2</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        layer1 = tf.nn.relu(tf.matmul(input_tensor, avg_class.average(weights1)) + avg_class.average(biases1))</span><br><span class="line">        <span class="keyword">return</span> tf.matmul(layer1, avg_class.average(weights2)) + avg_class.average(biases2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; ### [3] train : æ¨¡å‹è®­ç»ƒ ## </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    FCNN æ¨¡å‹è®­ç»ƒéœ€è¦çš„å‰å‘ä¼ æ’­ç®—æ³•ã€åå‘ä¼ æ’­ç®—æ³•ï¼Œä»¥åŠè¿­ä»£è®­ç»ƒçš„å®ç°ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span>(<span class="params">mnist</span>):</span></span><br><span class="line"></span><br><span class="line">    x = tf.placeholder(dtype=tf.float32, shape=(<span class="literal">None</span>, INPUT_NODE), name=<span class="string">&quot;input_x&quot;</span>)</span><br><span class="line">    y_ = tf.placeholder(dtype=tf.float32, shape=(<span class="literal">None</span>, OUTPUT_NODE), name=<span class="string">&quot;input_y&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># éšè—å±‚å‚æ•°(Second layer)ï¼š</span></span><br><span class="line">    weights1 = tf.Variable(tf.random_normal([INPUT_NODE, LAYER1_NODE], stddev=<span class="number">0.1</span>, dtype=tf.float32))</span><br><span class="line">    biases1 = tf.Variable(tf.constant(<span class="number">0.1</span>, shape=[LAYER1_NODE]))</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è¾“å‡ºå±‚å‚æ•°(Third layer)ï¼š</span></span><br><span class="line">    weights2 = tf.Variable(tf.random_normal([LAYER1_NODE, OUTPUT_NODE], stddev=<span class="number">0.1</span>, dtype=tf.float32))</span><br><span class="line">    biases2 = tf.Variable(tf.constant(<span class="number">0.1</span>, shape=[OUTPUT_NODE]))</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#### 1. å‰å‘ä¼ æ’­ï¼ˆFPï¼‰ ####</span></span><br><span class="line">    <span class="comment"># è®¡ç®—å½“å‰å‚æ•°ä¸‹ FCNN FP çš„ç»“æœï¼Œæ¨¡å‹è®­ç»ƒæ—¶å‰å‘ä¼ æ’­è®¡ç®—çš„ avg_class = Noneï¼Œæ‰€ä»¥ä¸ä¼šä½¿ç”¨å‚æ•°çš„æ»‘åŠ¨å¹³å‡å€¼è¿›è¡Œè®¡ç®—</span></span><br><span class="line">    y = inference(x, <span class="literal">None</span>, weights1, biases1, weights2, biases2)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å®šä¹‰è®­ç»ƒæ—¶çš„å…¨å±€æ­¥æ•°ï¼Œè¯¥å˜é‡æ— éœ€è®¡ç®—æ»‘åŠ¨å¹³å‡å€¼ã€‚æ‰€ä»¥ä¸€èˆ¬éœ€è¦æŒ‡å®šå…¨å±€æ­¥æ•°å˜é‡ä¸ºä¸å¯è®­ç»ƒå˜é‡(trainable=False)</span></span><br><span class="line">    global_step = tf.Variable(<span class="number">0</span>, trainable=<span class="literal">False</span>)</span><br><span class="line">    <span class="comment">#### =============== ####</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#### 2. æ»‘åŠ¨å¹³å‡è®¾ç½® ####</span></span><br><span class="line">    <span class="comment"># avg_class = variable_averages</span></span><br><span class="line">    variable_averages = tf.train.ExponentialMovingAverage(MOVING_AVERAGE_DECAY, global_step)  <span class="comment">#  åˆå§‹åŒ–æ»‘åŠ¨å¹³å‡å¯¹è±¡</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è®¡ç®—æ‰€æœ‰å¯è®­ç»ƒç¥ç»ç½‘ç»œå‚æ•°å˜é‡çš„æ»‘åŠ¨å¹³å‡å€¼ï¼ˆå³æ·»åŠ /æ›´æ–°å‚æ•°å˜é‡çš„å½±å­å˜é‡ï¼‰ï¼š</span></span><br><span class="line">    variables_averages_op = variable_averages.apply(tf.trainable_variables())</span><br><span class="line">    <span class="comment"># tf.trainable_variables å¯è¿”å› GraphKeys.TRAINABLE_VARIABLES é›†åˆä¸­æ‰€æœ‰å…ƒç´ ï¼ˆå³æœªæŒ‡å®š trainable=False çš„å˜é‡ï¼‰</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è®¡ç®—ä½¿ç”¨äº†æ»‘åŠ¨å¹³å‡ä¹‹åçš„ FP ç»“æœã€‚æ»‘åŠ¨å¹³å‡ä¹‹åä¸ä¼šæ”¹å˜å˜é‡æœ¬èº«å–å€¼ï¼Œä¼šç»´æŠ¤ä¸€ä¸ª shadow_variable æ¥è®°å½•å…¶æ»‘åŠ¨å¹³å‡å€¼</span></span><br><span class="line">    movingAvg_y = inference(x, variable_averages, weights1, biases1, weights2, biases2)</span><br><span class="line">    <span class="comment">#### =============== ####</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#### 3. Loss Function ####</span></span><br><span class="line">    <span class="comment"># å®šä¹‰äº¤å‰ç†µæŸå¤±å‡½æ•°ï¼ˆç»éªŒé£é™©ï¼‰:è¯¥å‡½æ•°ç¬¬äºŒä¸ªå‚æ•°éœ€è¦æä¾›çš„æ˜¯æ­£ç¡®æ ‡ç­¾çš„æ•°å­—ï¼Œtf.argmax(y_, 1)å¯ä»¥è·å– y_ å¯¹åº”çš„ç±»åˆ«æ ‡ç­¾ï¼ˆåŸå‹: tf.argmax(array, axis)ï¼‰</span></span><br><span class="line">    <span class="comment"># æ³¨æ„ï¼Œè¿™é‡Œçš„ logits å‚æ•°å€¼åªèƒ½æ˜¯ä¸ä½¿ç”¨æ»‘åŠ¨å¹³å‡çš„å˜é‡ï¼Œä¸èƒ½æ˜¯å½±å­å˜é‡ï¼š</span></span><br><span class="line">    cross_entropy = tf.nn.sparse_softmax_cross_entropy_with_logits(logits=y, labels=tf.argmax(y_, <span class="number">1</span>))</span><br><span class="line">    <span class="comment"># è®¡ç®—å½“å‰ batch ä¸­æ‰€æœ‰æ ·ä¾‹çš„äº¤å‰ç†µå¹³å‡å€¼</span></span><br><span class="line">    cross_entropy_mean = tf.reduce_mean(cross_entropy)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å®šä¹‰ L2 æ­£åˆ™åŒ–æŸå¤±å‡½æ•°ï¼ˆç»“æ„é£é™©ï¼‰ï¼š</span></span><br><span class="line">    regularizer = tf.contrib.layers.l2_regularizer(REGULARIZATION_RATE)</span><br><span class="line">    <span class="comment"># è®¡ç®—æ¨¡å‹çš„ L2 æ­£åˆ™åŒ–æŸå¤±ï¼ˆä¸€èˆ¬åªè®¡ç®—æƒé‡çš„æ­£åˆ™åŒ–æŸå¤±ï¼Œè€Œä¸ä½¿ç”¨åç½®é¡¹ï¼‰:</span></span><br><span class="line">    parm_regularization = regularizer(weights1) + regularizer(weights2)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è®¡ç®—æœ€ç»ˆ Loss Functionï¼šç»éªŒé£é™©å’Œç»“æ„åˆ†æ</span></span><br><span class="line">    loss = cross_entropy_mean + parm_regularization</span><br><span class="line">    <span class="comment">#### =============== ####</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#### 4. åå‘ä¼ æ’­ï¼ˆBPï¼‰ ####</span></span><br><span class="line">    <span class="comment"># è®¾ç½®æŒ‡æ•°è¡°å‡çš„å­¦ä¹ ç‡:éšç€è¿­ä»£è¿›è¡Œï¼Œæ›´æ–°å˜é‡çš„å­¦ä¹ ç‡åœ¨è¿™ä¸ªåŸºç¡€ä¸Šé€’å‡</span></span><br><span class="line">    learning_rate = tf.train.exponential_decay(learning_rate = LEARNING_RATE_BASE,  <span class="comment"># åˆå§‹å­¦ä¹ ç‡</span></span><br><span class="line">                                               global_step = global_step,  <span class="comment"># è®­ç»ƒæ—¶çš„å…¨å±€æ­¥æ•°</span></span><br><span class="line">                                               decay_steps = mnist.train.num_examples / BATCH_SIZE,  <span class="comment"># éå†ä¸€æ¬¡æ‰€æœ‰è®­ç»ƒæ•°æ®éœ€è¦çš„è¿­ä»£æ¬¡æ•°</span></span><br><span class="line">                                               decay_rate = LEARNING_RATE_DECAY  <span class="comment"># è¡°å‡ç³»æ•°</span></span><br><span class="line">                                              )</span><br><span class="line">    <span class="comment"># ä¼˜åŒ–å™¨:</span></span><br><span class="line">    train_step = tf.train.GradientDescentOptimizer(learning_rate).minimize(loss, global_step=global_step)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ç»‘å®šå‚æ•°æ»‘åŠ¨å¹³å‡è®¡ç®—å’Œå‚æ•°æ¢¯åº¦æ›´æ–°è®¡ç®—</span></span><br><span class="line">    <span class="comment"># æ¯è¿­ä»£ä¸€æ¬¡æ•°æ®å°±éœ€è¦é€šè¿‡ BP æ¥æ›´æ–° FCNN ä¸­å‚æ•°ï¼Œåˆè¦æ›´æ–°æ¯ä¸€ä¸ªå‚æ•°çš„æ»‘åŠ¨å¹³å‡å€¼ï¼ˆå½±å­å˜é‡ï¼‰ã€‚</span></span><br><span class="line">    <span class="comment"># TF ä¸­æä¾›äº†ä¸¤ç§æœºåˆ¶ï¼štf.control_dependencie å’Œ tf.groupï¼š</span></span><br><span class="line">    <span class="comment"># # train_op = tf.group(train_step, variables_averages_op) # ç­‰ä»·äº ==</span></span><br><span class="line">    <span class="keyword">with</span> tf.control_dependencies([train_step, variables_averages_op]):</span><br><span class="line">        train_op = tf.no_op(name=<span class="string">&#x27;train&#x27;</span>)</span><br><span class="line">    <span class="comment">#### =============== ####</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## 5. Model Evaluation ##</span></span><br><span class="line">    <span class="comment"># æ£€éªŒä½¿ç”¨äº†æ»‘åŠ¨å¹³å‡æ¨¡å‹çš„ FCNN æ¨¡å‹çš„æ•ˆæœï¼ˆæ»‘åŠ¨å¹³å‡æˆ–ä¸ä½¿ç”¨æ»‘åŠ¨å¹³å‡ï¼‰</span></span><br><span class="line">    <span class="comment"># correct_prediction = tf.equal(tf.argmax(movingAvg_y, 1), tf.argmax(y_, 1))</span></span><br><span class="line">    correct_prediction = tf.equal(tf.argmax(y, <span class="number">1</span>), tf.argmax(y_, <span class="number">1</span>))</span><br><span class="line">    <span class="comment"># tf.cast(x, dtype) ä¼šå°† x æ•°æ®æ ¼å¼è½¬åŒ–æˆ dtype æ•°æ®æ ¼å¼ã€‚è¿™é‡Œï¼Œå°† bool å‹æ•°å€¼è½¬ä¸º float åï¼Œx ä¼šå˜ä¸º 0/1 åºåˆ—ã€‚</span></span><br><span class="line">    <span class="comment"># è®¡ç®—æ¨¡å‹å‡†ç¡®ç‡</span></span><br><span class="line">    accuracy = tf.reduce_mean(tf.cast(correct_prediction, tf.float32))</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">############################  Begin To Training  ###########################</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å®šä¹‰ä¼šè¯é…ç½®:</span></span><br><span class="line">    config = tf.ConfigProto(<span class="comment"># device_count=&#123;&quot;CPU&quot;: 4&#125;, # limit to num_cpu_cor CPU usage</span></span><br><span class="line">                            <span class="comment"># inter_op_parallelism_threads = 1,  # config parallelism</span></span><br><span class="line">                            <span class="comment"># intra_op_parallelism_threads = 1,  # config parallelism</span></span><br><span class="line">                            allow_soft_placement=<span class="literal">True</span>,</span><br><span class="line">                            log_device_placement=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">with</span> tf.Session(config=config) <span class="keyword">as</span> sess:</span><br><span class="line">        start_time = time.time()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–æ‰€æœ‰å˜é‡</span></span><br><span class="line">        init_op = tf.global_variables_initializer().run()</span><br><span class="line">        </span><br><span class="line">        print(<span class="string">&#x27;Training and evaluating...&#x27;</span>)</span><br><span class="line">        <span class="comment"># å‡†å¤‡éªŒè¯æ•°æ®é›†ï¼Œä¸€èˆ¬ç”¨äºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å¤§è‡´åˆ¤æ–­åœæ­¢ä»¥åŠæ¨¡å‹è®­ç»ƒæ•ˆæœ:</span></span><br><span class="line">        validation_feed = &#123;x: mnist.validation.images, y_: mnist.validation.labels&#125;</span><br><span class="line">        <span class="comment"># å‡†å¤‡æµ‹è¯•æ•°æ®é›†ï¼Œç”¨äºè¯„ä»·æ¨¡å‹ä¼˜åŠ£çš„æ ‡å‡†</span></span><br><span class="line">        test_feed = &#123;x: mnist.test.images, y_: mnist.test.labels&#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å¯è§†åŒ–å‡†å¤‡</span></span><br><span class="line">        epoch = <span class="number">0</span></span><br><span class="line">        NUM_EPOCH = <span class="built_in">int</span>(TRAINING_STEPS / <span class="number">1000</span>)</span><br><span class="line">        fig_loss = np.zeros([NUM_EPOCH])</span><br><span class="line">        fig_acc_val = np.zeros([NUM_EPOCH])</span><br><span class="line">        fig_acc_test = np.zeros([NUM_EPOCH])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¿­ä»£è®­ç»ƒç¥ç»ç½‘ç»œ</span></span><br><span class="line">        <span class="keyword">for</span> step <span class="keyword">in</span> <span class="built_in">range</span>(TRAINING_STEPS):</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># äº§ç”Ÿè¿™ä¸€è½®ä½¿ç”¨çš„ä¸€ä¸ª batch çš„è®­ç»ƒæ•°æ®ï¼Œå¹¶è¿›è¡Œè®­ç»ƒ</span></span><br><span class="line">            xs, ys = mnist.train.next_batch(BATCH_SIZE)</span><br><span class="line">            sess.run(train_op, feed_dict=&#123;x: xs, y_: ys&#125;)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æ¯ 1000 æ¬¡è¾“å‡ºä¸€æ¬¡åœ¨éªŒè¯æ•°æ®ä¸Šçš„æµ‹è¯•ç»“æœ</span></span><br><span class="line">            <span class="keyword">if</span> step % <span class="number">1000</span> == <span class="number">0</span>:</span><br><span class="line">                <span class="comment"># print(&#x27;Epoch:&#x27;, epoch + 1)</span></span><br><span class="line">                </span><br><span class="line">                loss_train, acc_train = sess.run([loss, accuracy], feed_dict=&#123;x: xs, y_: ys&#125;)</span><br><span class="line">                loss_val, acc_val = sess.run([loss, accuracy], feed_dict=validation_feed)  <span class="comment"># todo</span></span><br><span class="line">                time_dif = get_time_dif(start_time)</span><br><span class="line">                msg = <span class="string">&#x27;Iter: &#123;0:&gt;6&#125;, Train Loss: &#123;1:&gt;6.2&#125;, Train Acc: &#123;2:&gt;7.2%&#125;,&#x27;</span> \</span><br><span class="line">                        + <span class="string">&#x27; Val Loss: &#123;3:&gt;6.2&#125;, Val Acc: &#123;4:&gt;7.2%&#125;, Time: &#123;5&#125;&#x27;</span></span><br><span class="line">                print(msg.<span class="built_in">format</span>(step, loss_train, acc_train, loss_val, acc_val, time_dif))</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># å¯è§†åŒ–å‡†å¤‡</span></span><br><span class="line">                acc_test = sess.run(accuracy, feed_dict=test_feed)</span><br><span class="line">                fig_loss[epoch] = loss_train</span><br><span class="line">                fig_acc_val[epoch] = acc_val + <span class="number">0.05</span>  <span class="comment"># ä¸ºäº†åŒºåˆ†éªŒè¯å‡†ç¡®ç‡å’Œæµ‹è¯•å‡†ç¡®ç‡å·®åˆ«, è®©éªŒè¯é›†å‡†ç¡®ç‡ä¸Šç§» 0.05 å•ä½</span></span><br><span class="line">                fig_acc_test[epoch] = acc_test</span><br><span class="line">                epoch += <span class="number">1</span>  </span><br><span class="line">                </span><br><span class="line">        <span class="comment"># è®­ç»ƒç»“æŸåï¼Œåœ¨æµ‹è¯•æ•°æ®é›†ä¸Šè®¡ç®— FCNN æ¨¡å‹çš„æœ€ç»ˆå‡†ç¡®ç‡ï¼Œä»¥è¯„ä¼°æ¨¡å‹æ•ˆæœ</span></span><br><span class="line">        test_acc = sess.run(accuracy, feed_dict=test_feed)</span><br><span class="line">        <span class="built_in">print</span> (<span class="string">&quot;After %d training step(s), test accuracy &quot;</span></span><br><span class="line">               <span class="string">&quot;using average Model is %g &quot;</span> % (TRAINING_STEPS, test_acc))</span><br><span class="line">        </span><br><span class="line">        <span class="comment">### -------- å¯è§†åŒ– -------- ###</span></span><br><span class="line">        <span class="comment"># è®­ç»ƒè¿‡ç¨‹ä¸­æŸå¤± (Loss) æ›²çº¿:</span></span><br><span class="line">        fig1 = plt.figure()</span><br><span class="line">        plt.plot(np.arange(NUM_EPOCH), fig_loss, label=<span class="string">&quot;Loss&quot;</span>)</span><br><span class="line">        plt.xlabel(<span class="string">&quot;Iteration&quot;</span>)</span><br><span class="line">        plt.ylabel(<span class="string">&quot;Training Loss&quot;</span>)</span><br><span class="line">        <span class="comment"># plt.show()</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># éªŒè¯é›†å’Œæµ‹è¯•é›†ä¸Šçš„å‡†ç¡®ç‡ (Accuracy) æ›²çº¿:</span></span><br><span class="line">        <span class="comment"># fig2 = plt.figure(figsize=(30, 1), dpi=50)  # è®¾ç½®å›¾ç‰‡å¤§å°å’Œåƒç´ (dpi=50)</span></span><br><span class="line">        fig2 = plt.figure()</span><br><span class="line">        plt.plot(np.arange(NUM_EPOCH), fig_acc_val, label=<span class="string">&quot;Validation Accuracy&quot;</span>, color=<span class="string">&quot;blue&quot;</span>)  <span class="comment"># ç»˜åˆ¶æŠ˜çº¿å›¾</span></span><br><span class="line">        plt.plot(np.arange(NUM_EPOCH), fig_acc_test, label=<span class="string">&quot;Test Accuracy&quot;</span>, color=<span class="string">&quot;green&quot;</span>)  <span class="comment"># ç»˜åˆ¶æŠ˜çº¿å›¾</span></span><br><span class="line">        plt.xlabel(<span class="string">&quot;Iteration&quot;</span>)  <span class="comment"># è®¾ç½® x è½´æ ‡ç­¾</span></span><br><span class="line">        plt.ylabel(<span class="string">&quot;Modul Accuracy&quot;</span>)  <span class="comment"># è®¾ç½® y è½´æ ‡ç­¾</span></span><br><span class="line">        y_ticks = np.arange(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0.15</span>)  <span class="comment"># è®¾ç½® y è½´åˆ»åº¦</span></span><br><span class="line">        plt.yticks(y_ticks) </span><br><span class="line">        plt.grid(alpha=<span class="number">0.4</span>, linestyle=<span class="string">&#x27;-.&#x27;</span>)  <span class="comment"># ç»˜åˆ¶ç½‘æ ¼ &gt;&gt;&gt;&gt; alpha è®¾ç½®ç½‘æ ¼é€æ˜åº¦; linestyle è®¾ç½®ç½‘æ ¼æ ·å¼</span></span><br><span class="line">        <span class="comment"># plt.legend(prop=my_font, loc=&#x27;upper left&#x27;)  # è®¾ç½®å›¾ä¾‹å­—ä½“åŠå…¶ä½ç½® (é»˜è®¤å³ä¸Š)</span></span><br><span class="line">        plt.show()</span><br><span class="line">        <span class="comment">### ======================= ###</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">############################   Main Function as the begin of program  ###########################</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>(<span class="params">arg=<span class="literal">None</span></span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">###################### Functions for downloading and reading MNIST data. ######################</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27; </span></span><br><span class="line"><span class="string">    ## åˆå§‹åŒ–ï¼šä¸‹è½½æˆ–è¯»å–ç”¨äºè®­ç»ƒã€æµ‹è¯•ä»¥åŠéªŒè¯çš„ MNIST æ‰‹å†™æ•°å­—å›¾ç‰‡ï¼ˆ28px * 28pxï¼‰æ•°æ®é›† ##</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        MNIST æ•°æ®é›†åˆ†æˆä¸¤éƒ¨åˆ†ï¼š60000è¡Œçš„è®­ç»ƒæ•°æ®é›†ï¼ˆmnist.trainï¼‰å’Œ10000è¡Œçš„æµ‹è¯•æ•°æ®é›†ï¼ˆmnist.testï¼‰ã€‚æ¯ä¸€ä¸ª MNIST æ•°æ®å•</span></span><br><span class="line"><span class="string">    å…ƒï¼ˆæ•°æ®å¯¹è±¡ï¼‰æœ‰ä¸¤éƒ¨åˆ†ç»„æˆï¼šä¸€å¼ åŒ…å«æ‰‹å†™æ•°å­—çš„å›¾ç‰‡å’Œä¸€ä¸ªå¯¹åº”çš„æ ‡ç­¾ã€‚æ¯”å¦‚è®­ç»ƒæ•°æ®é›†çš„å›¾ç‰‡æ˜¯ mnist.train.images ï¼Œè®­ç»ƒæ•°æ®é›†çš„æ ‡ç­¾æ˜¯ mnist.train.labelsã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        mnist.train.images æ˜¯ä¸€ä¸ªå½¢çŠ¶ä¸º [60000, 784] çš„å¼ é‡ï¼Œç¬¬ä¸€ä¸ªç»´åº¦æ•°å­—ç”¨æ¥ç´¢å¼•å›¾ç‰‡ï¼Œç¬¬äºŒä¸ªç»´åº¦æ•°å­—ç”¨æ¥ç´¢å¼•æ¯å¼ å›¾ç‰‡ä¸­çš„åƒç´ ç‚¹ã€‚</span></span><br><span class="line"><span class="string">        mnist.train.labels æ˜¯ä¸€ä¸ªå½¢çŠ¶ä¸º [60000, 10] çš„å¼ é‡ï¼Œç¬¬ä¸€ä¸ªç»´åº¦æ•°å­—ç”¨æ¥ç´¢å¼•å›¾ç‰‡ï¼Œç¬¬äºŒä¸ªç»´åº¦æ•°å­—ç”¨æ¥ç´¢å¼•æ¯å¼ å›¾ç‰‡ä¸­çš„åˆ†ç±»æ ‡ç­¾ï¼ˆone-hot vectorsï¼‰ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        å®é™…ï¼Œread_data_sets ç±»ä¼šå°†æ•°æ®ä»åŸå§‹æ•°æ®åŒ…æ ¼å¼è§£ææˆè®­ç»ƒå’Œæµ‹è¯•ç¥ç»ç½‘ç»œæ—¶çš„æ•°æ®æ ¼å¼ ã€‚read_data_sets ä¼šè‡ªåŠ¨å°† MNIST æ•°æ®é›†åˆ’åˆ†ä¸º trainï¼ˆ55000ï¼‰ã€testï¼ˆ10000ï¼‰ ä»¥åŠ validationï¼ˆ5000ï¼‰ä¸‰ä¸ªæ•°æ®é›†ã€‚</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    print(<span class="string">&quot;Loading training and validation data...&quot;</span>)</span><br><span class="line">    start_time = time.time()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æŒ‡å®š MNIST æ•°æ®é›†çš„ä¸‹è½½å’Œè¯»å–çš„è·¯å¾„ï¼š</span></span><br><span class="line">    MNIST_DATA_PATH = <span class="string">&quot;./MNIST_data/&quot;</span></span><br><span class="line">    mnist = input_data.read_data_sets(MNIST_DATA_PATH, one_hot=<span class="literal">True</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># print mnist.train dataSet size :</span></span><br><span class="line">    print(<span class="string">&quot;Training Data Size : &quot;</span>, mnist.train.num_examples)</span><br><span class="line">    <span class="comment"># print mnist.validation dataSet size :</span></span><br><span class="line">    print(<span class="string">&quot;Validation Data Size : &quot;</span>, mnist.validation.num_examples)</span><br><span class="line">    <span class="comment"># print mnist.test dataSet size :</span></span><br><span class="line">    print(<span class="string">&quot;Testing Data Size : &quot;</span>, mnist.test.num_examples)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># print mnist.train.images[0] / mnist.train.labels[0] Format</span></span><br><span class="line">    <span class="comment"># print(&quot;Example training data[0] pix-matirx : &quot;, &quot;\n&quot;, mnist.train.images[0])</span></span><br><span class="line">    <span class="comment"># print(&quot;Example training picture shape : &quot; + str(len(mnist.train.images[0])))</span></span><br><span class="line">    <span class="comment"># print(&quot;Example training data lable : &quot;, mnist.train.labels[0])</span></span><br><span class="line">    <span class="comment"># print(&quot;Example training lable shape : &quot; + str(len(mnist.train.labels[0])))</span></span><br><span class="line">    </span><br><span class="line">    time_diff = get_time_dif(start_time)</span><br><span class="line">    print(<span class="string">&quot;Time Usage:&quot;</span>, time_diff)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">###################### Functions for Training FCNN Model By Using MNIST data. ######################</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># begin to train model:</span></span><br><span class="line">    train(mnist)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># TF æä¾›çš„ä¸€ä¸ªä¸»ç¨‹åºå…¥å£ï¼Œtf.app.run ä¼šè°ƒç”¨ä¸Šé¢å®šä¹‰çš„ main å‡½æ•°ï¼š</span></span><br><span class="line">    <span class="comment"># tf.app.run()</span></span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<p>æ ·ä¾‹ç¨‹åºè¾“å‡ºä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">Loading training and validation data...</span><br><span class="line">Extracting ./MNIST_data/train-images-idx3-ubyte.gz</span><br><span class="line">Extracting ./MNIST_data/train-labels-idx1-ubyte.gz</span><br><span class="line">Extracting ./MNIST_data/t10k-images-idx3-ubyte.gz</span><br><span class="line">Extracting ./MNIST_data/t10k-labels-idx1-ubyte.gz</span><br><span class="line">Training Data Size :  55000</span><br><span class="line">Validation Data Size :  5000</span><br><span class="line">Testing Data Size :  10000</span><br><span class="line">Time Usage: 0:00:00.347534</span><br><span class="line">Training and evaluating...</span><br><span class="line">Iter:      0, Train Loss:    3.7, Train Acc:  57.00%, Val Loss:    4.5, Val Acc:  38.60%, Time: 0:00:00.421596</span><br><span class="line">Iter:   1000, Train Loss:  0.094, Train Acc: 100.00%, Val Loss:   0.17, Val Acc:  97.18%, Time: 0:00:01.537846</span><br><span class="line">Iter:   2000, Train Loss:  0.089, Train Acc: 100.00%, Val Loss:   0.15, Val Acc:  97.72%, Time: 0:00:02.682101</span><br><span class="line">Iter:   3000, Train Loss:  0.083, Train Acc: 100.00%, Val Loss:   0.14, Val Acc:  97.96%, Time: 0:00:03.847363</span><br><span class="line">Iter:   4000, Train Loss:  0.077, Train Acc: 100.00%, Val Loss:   0.14, Val Acc:  97.90%, Time: 0:00:05.014624</span><br><span class="line">Iter:   5000, Train Loss:  0.068, Train Acc: 100.00%, Val Loss:   0.13, Val Acc:  98.08%, Time: 0:00:06.187306</span><br><span class="line">Iter:   6000, Train Loss:  0.066, Train Acc: 100.00%, Val Loss:   0.12, Val Acc:  98.24%, Time: 0:00:07.310558</span><br><span class="line">Iter:   7000, Train Loss:  0.065, Train Acc: 100.00%, Val Loss:   0.12, Val Acc:  98.20%, Time: 0:00:08.489824</span><br><span class="line">Iter:   8000, Train Loss:  0.058, Train Acc: 100.00%, Val Loss:   0.11, Val Acc:  98.40%, Time: 0:00:09.660084</span><br><span class="line">Iter:   9000, Train Loss:  0.059, Train Acc: 100.00%, Val Loss:   0.11, Val Acc:  98.42%, Time: 0:00:10.893361</span><br><span class="line">Iter:  10000, Train Loss:  0.056, Train Acc: 100.00%, Val Loss:   0.11, Val Acc:  98.40%, Time: 0:00:12.093628</span><br><span class="line">Iter:  11000, Train Loss:  0.053, Train Acc: 100.00%, Val Loss:   0.11, Val Acc:  98.42%, Time: 0:00:13.272892</span><br><span class="line">Iter:  12000, Train Loss:  0.051, Train Acc: 100.00%, Val Loss:    0.1, Val Acc:  98.38%, Time: 0:00:14.393144</span><br><span class="line">Iter:  13000, Train Loss:  0.051, Train Acc: 100.00%, Val Loss:    0.1, Val Acc:  98.40%, Time: 0:00:15.549404</span><br><span class="line">Iter:  14000, Train Loss:  0.051, Train Acc: 100.00%, Val Loss:    0.1, Val Acc:  98.54%, Time: 0:00:16.730667</span><br><span class="line">Iter:  15000, Train Loss:  0.045, Train Acc: 100.00%, Val Loss:  0.099, Val Acc:  98.48%, Time: 0:00:17.896928</span><br><span class="line">Iter:  16000, Train Loss:  0.047, Train Acc: 100.00%, Val Loss:  0.099, Val Acc:  98.48%, Time: 0:00:19.068191</span><br><span class="line">Iter:  17000, Train Loss:  0.044, Train Acc: 100.00%, Val Loss:  0.096, Val Acc:  98.50%, Time: 0:00:20.166436</span><br><span class="line">Iter:  18000, Train Loss:  0.046, Train Acc: 100.00%, Val Loss:  0.096, Val Acc:  98.60%, Time: 0:00:21.333697</span><br><span class="line">Iter:  19000, Train Loss:  0.044, Train Acc: 100.00%, Val Loss:  0.094, Val Acc:  98.56%, Time: 0:00:22.496959</span><br><span class="line">Iter:  20000, Train Loss:  0.049, Train Acc: 100.00%, Val Loss:  0.094, Val Acc:  98.54%, Time: 0:00:23.666221</span><br><span class="line">Iter:  21000, Train Loss:  0.044, Train Acc: 100.00%, Val Loss:  0.093, Val Acc:  98.52%, Time: 0:00:24.835482</span><br><span class="line">Iter:  22000, Train Loss:  0.048, Train Acc: 100.00%, Val Loss:  0.093, Val Acc:  98.52%, Time: 0:00:26.002744</span><br><span class="line">Iter:  23000, Train Loss:  0.041, Train Acc: 100.00%, Val Loss:  0.093, Val Acc:  98.46%, Time: 0:00:27.125994</span><br><span class="line">Iter:  24000, Train Loss:  0.042, Train Acc: 100.00%, Val Loss:  0.092, Val Acc:  98.52%, Time: 0:00:28.296257</span><br><span class="line">Iter:  25000, Train Loss:  0.047, Train Acc: 100.00%, Val Loss:  0.092, Val Acc:  98.54%, Time: 0:00:29.459517</span><br><span class="line">Iter:  26000, Train Loss:   0.04, Train Acc: 100.00%, Val Loss:  0.091, Val Acc:  98.54%, Time: 0:00:30.612776</span><br><span class="line">Iter:  27000, Train Loss:  0.043, Train Acc: 100.00%, Val Loss:  0.091, Val Acc:  98.58%, Time: 0:00:31.786038</span><br><span class="line">Iter:  28000, Train Loss:  0.041, Train Acc: 100.00%, Val Loss:  0.091, Val Acc:  98.54%, Time: 0:00:32.886282</span><br><span class="line">Iter:  29000, Train Loss:  0.041, Train Acc: 100.00%, Val Loss:   0.09, Val Acc:  98.54%, Time: 0:00:34.055544</span><br><span class="line">After 30000 training step(s), test accuracy using average Model is 0.9828</span><br></pre></td></tr></table></figure>

<p>è®­ç»ƒè¿‡ç¨‹ä¸­æŸå¤± (Loss) æ›²çº¿å¦‚ä¸‹ï¼š</p>
<div align=center><img src="https://s2.loli.net/2023/05/30/Uqku7wKWnoASOmc.png"></div>

<p>å¯è§ï¼Œéšç€è®­ç»ƒè¿­ä»£è¿‡ç¨‹çš„å¢åŠ ï¼Œæ¨¡å‹çš„æŸå¤±å‡½æ•°é€æ¸æ”¶æ•›äºä¸€ä¸ªè¾ƒå°å€¼ï¼ˆæ¥è¿‘ 0ï¼‰ã€‚</p>
<p>è®­ç»ƒè¿‡ç¨‹ä¸­ï¼ŒéªŒè¯é›†å’Œæµ‹è¯•é›†ä¸Šçš„å‡†ç¡®ç‡ (Accuracy) å˜åŒ–æ›²çº¿:</p>
<div align=center><img src="https://s2.loli.net/2023/05/30/hWBMrdlwe19E4qy.png"></div>

<p>å¯è§ï¼Œå¯¹äºåˆ†å¸ƒå‡åŒ€çš„æ•°æ®é›†ï¼Œè®­ç»ƒè¿‡ç¨‹ä¸­æ¨¡å‹åœ¨éªŒè¯é›†ä¸Šè¡¨ç°å¯ä»¥å®Œå…¨è¡¨å¾å…¶åœ¨æµ‹è¯•é›†ä¸Šçš„æ•ˆæœï¼ï¼ï¼</p>
<hr>
<h3 id="æ¨¡å‹æ•ˆæœè¯„ä¼°"><a href="#æ¨¡å‹æ•ˆæœè¯„ä¼°" class="headerlink" title="æ¨¡å‹æ•ˆæœè¯„ä¼°"></a>æ¨¡å‹æ•ˆæœè¯„ä¼°</h3><p>ä¸Šè¿° TF å®ç° MNIST å›¾åƒè¯†åˆ«é—®é¢˜æ ·ä¾‹ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº†ä¸€ç³»åˆ—çš„å‚æ•°ï¼šåˆå§‹å­¦ä¹ ç‡ã€å­¦ä¹ ç‡è¡°å‡ç‡ã€éšè—å±‚èŠ‚ç‚¹æ•°ã€è¿­ä»£è½®æ•°ç­‰ï¼Œå¹¶ä¸”æˆ‘ä»¬çŸ¥é“ç¥ç»ç½‘ç»œæ¨¡å‹çš„æœ€ç»ˆè¡¨è¾¾æ•ˆæœæ˜¯å—ä¸Šè¿°å‚æ•°å½±å“çš„ã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•è®¾ç½®è¿™äº›å‚æ•°çš„å–å€¼ï¼Ÿï¼ï¼å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œé…ç½®ç¥ç»ç½‘ç»œçš„å‚æ•°æ˜¯éœ€è¦é€šè¿‡ä¸æ–­å¯¹æ¯”å®éªŒæ¥è¿›è¡Œè°ƒæ•´ï¼Œä»¥å®ç°æœ€ä½³çš„ç¥ç»ç½‘ç»œæ¨¡å‹æ•ˆæœï¼ˆå…³äºæ›´å¤šç¥ç»ç½‘ç»œè°ƒå‚å†…å®¹å¯å‚è€ƒã€&gt;&gt;&gt;&gt; <a href="https://www.orangeshare.cn/">ä¸€æ–‡è¯¦è§£æ·±åº¦ç¥ç»ç½‘ç»œè°ƒå‚æŠ€å·§</a> &lt;&lt;&lt;&lt;ã€‘ï¼‰ã€‚</p>
<p>é‚£ä¹ˆï¼Œå¦‚ä½•è¯„ä¼°ä¸åŒå‚æ•°è®¾ç½®ä¸‹çš„æ¨¡å‹æ•ˆæœä¼˜åŠ£ï¼Ÿï¼ï¼</p>
<hr>
<h4 id="æµ‹è¯•é›†è¯„ä¼°"><a href="#æµ‹è¯•é›†è¯„ä¼°" class="headerlink" title="æµ‹è¯•é›†è¯„ä¼°"></a>æµ‹è¯•é›†è¯„ä¼°</h4><p>ç¥ç»ç½‘ç»œæ¨¡å‹æ•ˆæœçš„å¥½åå¯ä»¥é€šè¿‡ &gt;&gt;&gt;&gt; <font color="red">æ¨¡å‹å¯¹æœªçŸ¥æ•°æ®ï¼ˆæµ‹è¯•é›†æ•°æ®ï¼‰çš„é¢„æµ‹æƒ…å†µæ¥è¯„åˆ¤çš„ã€‚</font></p>
<p>ä½†æˆ‘ä»¬ä¸èƒ½ç›´æ¥é€šè¿‡æ¨¡å‹åœ¨æµ‹è¯•æ•°æ®ä¸Šçš„æ•ˆæœæ¥é€‰æ‹©å‚æ•°ï¼ˆæµ‹è¯•æ•°æ®é›†å˜æˆäº†è®­ç»ƒæ•°æ®é›†çš„ä¸€éƒ¨åˆ†å‚ä¸è®­ç»ƒï¼Œè¿™æ—¶è®¾ç½®æµ‹è¯•é›†æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼›æˆ–è€…æµ‹è¯•é›†è¾ƒå¥½è¡¨ç°æˆä¸ºæ¨¡å‹ä¼˜åŒ–çš„ç›®æ ‡ï¼‰ï¼Œè¿™å¯èƒ½å¯¼è‡´ç¥ç»ç½‘ç»œè¿‡åº¦æ‹Ÿåˆæµ‹è¯•æ•°æ®ï¼Œä»è€Œå¤±å»äº†å¯¹æœªçŸ¥æ•°æ®çš„é¢„åˆ¤èƒ½åŠ›ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<font color="red">æµ‹è¯•æ•°æ®ä¸åº”è¯¥å¯¹æˆ‘ä»¬æœ€ç»ˆå­¦å¾—ï¼ˆ/è®­ç»ƒå¾—åˆ°ï¼‰çš„ç¥ç»ç½‘ç»œæ¨¡å‹æä¾›ä»»ä½•æ”¯æŒ</font>ï¼Œè¿™æ ·æ‰èƒ½ <font color="green">ä¿è¯é€šè¿‡æµ‹è¯•æ•°æ®è¯„ä¼°å‡ºæ¥çš„æ¨¡å‹æ•ˆæœå’Œåœ¨çœŸå®åœºæ™¯ä¸‹æ¨¡å‹å¯¹æœªçŸ¥æ•°æ®çš„é¢„æµ‹æ•ˆæœæ˜¯æœ€æ¥è¿‘çš„ï¼ï¼ï¼</font> &lt;&lt;&lt;&lt; æµ‹è¯•æ•°æ®é›†å¯¹åº”çš„æ˜¯éƒ¨åˆ†æœªçŸ¥æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦ä¿è¯è®­ç»ƒè¿‡ç¨‹ä¸­æµ‹è¯•æ•°æ®ä¸å¯è§ã€‚</p>
<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p>ç”±äºæµ‹è¯•æ•°æ®åœ¨è®­ç»ƒè¿‡ç¨‹çš„ä¸å¯è§ï¼Œé‚£ä¹ˆå¦‚ä½•è¯„åˆ¤åœ¨ <strong>ä¼˜åŒ–/è®­ç»ƒè¿‡ç¨‹ä¸­</strong> ç¥ç»ç½‘ç»œæ¨¡å‹ä¸åŒå‚æ•°è®¾ç½®ä¸‹çš„æ•ˆæœï¼Ÿï¼ï¼</p>
<p>ğŸ‘‡ğŸ‘‡ğŸ‘‡ <strong>å¼•å…¥éªŒè¯é›†ï¼ˆValidation Setï¼‰</strong> ğŸ‘‡ğŸ‘‡ğŸ‘‡</p>
<p>ä¸€èˆ¬ä¼šä»è®­ç»ƒé›†æŠ½å–ä¸€éƒ¨åˆ†æ•°æ®ä½œä¸ºéªŒè¯æ•°æ®é›†ï¼Œé€šè¿‡è®­ç»ƒæ¨¡å‹åœ¨éªŒè¯æ•°æ®é›†ä¸Šçš„è¡¨ç°ï¼Œæ¥ï¼ˆä»£æ›¿æµ‹è¯•é›†ï¼‰è¯„ä»·ä¼˜åŒ–è¿‡ç¨‹ä¸­ä¸åŒå‚æ•°é€‰å–ä¸‹æ¨¡å‹çš„å¥½åã€‚</p>
<p>ğŸ‘‡ğŸ‘‡ğŸ‘‡ <strong>K æŠ˜ï¼ˆK Fold Cross Validationï¼‰</strong> ğŸ‘‡ğŸ‘‡ğŸ‘‡</p>
<p>ä¸€èˆ¬æ˜¯å°†æ•´ä¸ªæ•°æ®é›†åˆ†æˆ <code>k</code> ä¸ªå­é›†ï¼Œæ¯ä¸ªå­é›†å‡åšä¸€æ¬¡æµ‹è¯•é›†ï¼Œå…¶ä½™çš„ä½œä¸ºè®­ç»ƒé›†è¿›è¡Œè®­ç»ƒã€‚äº¤å‰éªŒè¯éœ€è¦é‡å¤ <code>k</code> æ¬¡ï¼Œæ¯æ¬¡é€‰æ‹©ä¸€ä¸ªå­é›†ä½œä¸ºæµ‹è¯•é›†ï¼Œå¹¶å°† k æ¬¡çš„å¹³å‡äº¤å‰éªŒè¯è¯†åˆ«æ­£ç¡®ç‡ä½œä¸ºç»“æœã€‚</p>
<p>ç”±äºç¥ç»ç½‘ç»œæœ¬èº«è®­ç»ƒæ—¶é—´å°±æ¯”è¾ƒé•¿ï¼Œé‡‡ç”¨äº¤å‰éªŒè¯ä¼šèŠ±è´¹å¤§é‡çš„æ—¶é—´ï¼ˆé€‚åˆå°æ•°æ®é›†ï¼‰ã€‚æ‰€ä»¥åœ¨æµ·é‡æ•°æ®ä¸‹ï¼Œä¸€èˆ¬ä¼šæ›´å¤šçš„é‡‡ç”¨éªŒè¯æ•°æ®é›†çš„å½¢å¼æ¥è¯„æµ‹æ¨¡å‹çš„æ•ˆæœã€‚</p>
<hr>
<h4 id="éªŒè¯é›†è¿‘ä¼¼è¯„ä¼°"><a href="#éªŒè¯é›†è¿‘ä¼¼è¯„ä¼°" class="headerlink" title="éªŒè¯é›†è¿‘ä¼¼è¯„ä¼°"></a>éªŒè¯é›†è¿‘ä¼¼è¯„ä¼°</h4><p>ä¸ºäº†è¯´æ˜ &gt;&gt;&gt;&gt; éªŒè¯æ•°æ®å¯ä»¥ä»£æ›¿æµ‹è¯•é›†ï¼ˆé»˜è®¤æ•°æ®åˆ†å¸ƒå‡åŒ€ï¼‰ï¼Œè¿‘ä¼¼ä½œä¸ºæ¨¡å‹æ•ˆæœçš„è¯„ä»·æ ‡å‡†ï¼Œæˆ‘ä»¬å°†å¯¹æ¯”ä¸åŒè¿­ä»£è½®æ•°æƒ…å†µä¸‹ï¼Œæ¨¡å‹åœ¨éªŒè¯æ•°æ®å’Œæµ‹è¯•æ•°æ®ä¸Šçš„å‡†ç¡®ç‡ï¼š</p>
<div align=center><img src="https://s2.loli.net/2023/05/30/VjX5LKm7cFqwaBQ.png"></div>

<p>ä¸Šå›¾ç»™å‡ºäº†æ¯ <code>1000</code> è½® FCNN æ¨¡å‹åœ¨éªŒè¯ã€æµ‹è¯•æ•°æ®é›†ä¸Šçš„å‡†ç¡®ç‡å˜æ¢æ›²çº¿ã€‚å¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶ä¸¤æ¡æ›²çº¿ä¸å®Œå…¨é‡åˆï¼Œä½†è¿™ä¸¤æ¡æ›²çº¿çš„è¶‹åŠ¿åŸºæœ¬ä¸€è‡´ï¼Œè€Œä¸”ä»–ä»¬çš„ç›¸å…³ç³»æ•°ï¼ˆ<code>correlation coefficient</code>ï¼‰å¤§äº <code>0.9999</code>ã€‚</p>
<p>å®éªŒè¯´æ˜ &gt;&gt;&gt;&gt; <font color="red">æ¨¡å‹åœ¨éªŒè¯æ•°æ®é›†ä¸Šçš„è¡¨ç°ï¼Œå®Œå…¨å¯ä»¥è¿‘ä¼¼ä½œä¸ºè¯„ä»·ä¸åŒç¥ç»ç½‘ç»œæ¨¡å‹çš„æ ‡å‡†ï¼Œæˆ–è€…ä½œä¸ºè®­ç»ƒè¿­ä»£è½®æ•°çš„ä¾æ®ï¼ï¼ï¼</font></p>
<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p>ğŸ‘‡ğŸ‘‡ğŸ‘‡ <strong>éœ€è¦æ³¨æ„çš„æ˜¯</strong> ğŸ‘‡ğŸ‘‡ğŸ‘‡</p>
<p>ä¸Šé¢æˆ‘ä»¬æ‰€è¯´çš„æµ‹è¯•æ•°æ®é›†è®­ç»ƒè¿‡ç¨‹ä¸å¯è§ï¼Œå¹¶ä¸æ˜¯ä¸¥æ ¼ä¸å¯è§ã€‚ä½ ä¼šçœ‹åˆ°å¾ˆå¤šèµ„æ–™ä¸ä¼šåˆ’åˆ†éªŒè¯æ•°æ®é›†ï¼Œç›´æ¥ä½¿ç”¨æµ‹è¯•æ•°æ®é›†ä½œä¸ºæ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­æ˜¯å¦è¿‘ä¼˜çš„è¯„ä»·æ ‡å‡†ã€‚</p>
<p>ä¸ªäººç†è§£ &gt;&gt;&gt;&gt; ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›é€‰å–çš„æœªåˆ’åˆ†çš„æ ·æœ¬æ•°æ®é›†æ ·æœ¬å¯¹äºé—®é¢˜çš„æ•°æ®åˆ†å¸ƒæ˜¯å‡åŒ€çš„ã€‚ä½†å¦‚æœéªŒè¯æ•°æ®åˆ†å¸ƒä¸èƒ½å¾ˆå¥½åœ°ä»£è¡¨æµ‹è¯•æ•°æ®åˆ†å¸ƒï¼Œé‚£ä¹ˆæ¨¡å‹åœ¨è¿™ä¸¤ä¸ªæ•°æ®é›†ä¸Šçš„è¡¨ç°å°±å¯èƒ½ä¸ä¸€æ ·ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œé€‰å–çš„éªŒè¯æ•°æ®åˆ†å¸ƒè¶Šæ¥è¿‘æµ‹è¯•æ•°æ®åˆ†å¸ƒï¼Œæ¨¡å‹åœ¨éªŒè¯æ•°æ®ä¸Šçš„è¡¨ç°å°±è¶Šå¯ä»¥ä½“ç°ç¥ç»ç½‘ç»œæ¨¡å‹åœ¨æµ‹è¯•æ•°æ®ï¼ˆæœªçŸ¥æ•°æ®ï¼‰ä¸‹çš„æ•ˆæœï¼ï¼ï¼</p>
<hr>
<h3 id="ä¸åŒä¼˜åŒ–æ–¹æ³•æ¨¡å‹æ•ˆæœå¯¹æ¯”"><a href="#ä¸åŒä¼˜åŒ–æ–¹æ³•æ¨¡å‹æ•ˆæœå¯¹æ¯”" class="headerlink" title="ä¸åŒä¼˜åŒ–æ–¹æ³•æ¨¡å‹æ•ˆæœå¯¹æ¯”"></a>ä¸åŒä¼˜åŒ–æ–¹æ³•æ¨¡å‹æ•ˆæœå¯¹æ¯”</h3><p>äº†è§£äº†ç¥ç»ç½‘ç»œæ¨¡å‹æ•ˆæœè¯„ä¼°æ ‡å‡†åï¼Œè¿™ä¸€å°èŠ‚å°†é€šè¿‡æ¨¡å‹åœ¨ MNIST æµ‹è¯•é›†ä¸Šçš„é¢„æµ‹å‡†ç¡®ç‡è¡¨ç°å¯¹æ¯”ä¸Šä¸€ç¯‡åšæ–‡ä¸­æåˆ°çš„ç¥ç»ç½‘ç»œç»“æ„è®¾è®¡å’Œå‚æ•°ä¼˜åŒ–çš„ä¸åŒæ–¹æ³•ï¼Œä»å®é™…é—®é¢˜ä¸­å±•ç¤ºä¸åŒä¼˜åŒ–æ–¹æ³•æ‰€å¸¦æ¥çš„æ€§èƒ½æå‡ã€‚</p>
<p>ä¸‹å›¾ï¼Œç»™å‡ºäº†åœ¨ç›¸åŒç¥ç»ç½‘ç»œå‚æ•°ä¸‹ï¼Œè®¾ç½®ä¸åŒä¼˜åŒ–æ–¹æ³•çš„å¯¹æ¯”å®éªŒï¼Œç»è¿‡ <code>30000</code> è½®è®­ç»ƒè¿­ä»£åï¼Œå¾—åˆ°çš„å„ä¸ªæ¨¡å‹æœ€ç»ˆçš„æ­£ç¡®ç‡ï¼ˆ<code>10</code> æ¬¡è¿è¡Œç»“æœçš„å¹³å‡å€¼ï¼‰ï¼š</p>
<div align=center><img src="https://s2.loli.net/2023/05/30/H61iqQxElZLOGe4.png"></div>

<p>ğŸ‘‡ğŸ‘‡ğŸ‘‡ <strong>ç¥ç»ç½‘è·¯æ¨¡å‹ç»“æ„å½±å“</strong> ğŸ‘‡ğŸ‘‡ğŸ‘‡</p>
<p>å¯ä»¥çœ‹å‡º &gt;&gt;&gt;&gt; è°ƒæ•´ç¥ç»ç½‘ç»œæ¨¡å‹çš„ç»“æ„ï¼ˆä¸ä½¿ç”¨éšè—å±‚æˆ–æ²¡æœ‰æ¿€æ´»å‡½æ•°ï¼‰å¯¹æœ€ç»ˆçš„å‡†ç¡®ç‡æœ‰éå¸¸å¤§çš„å½±å“ã€‚è¿™è¯´æ˜ç¥ç»ç½‘ç»œçš„ç»“æ„è®¾è®¡å¯¹æœ€ç»ˆæ¨¡å‹çš„æ•ˆæœæœ‰æœ¬è´¨çš„å½±å“ã€‚</p>
<p>åé¢ä¼šä»‹ç»ä¸€ç§æ›´åŠ ç‰¹æ®Šçš„ç¥ç»ç½‘ç»œç»“æ„ <code>CNN</code>ï¼ˆå·ç§¯ç¥ç»ç½‘ç»œï¼‰ï¼Œå®ƒå¯ä»¥æ›´åŠ æœ‰æ•ˆçš„å¤„ç†å›¾åƒä¿¡æ¯ã€‚é€šè¿‡ <code>CNN</code> å¯ä»¥è¿›ä¸€æ­¥å°† MNIST è¯†åˆ«æ¨¡å‹å‡†ç¡®ç‡æé«˜åˆ° <code>99.5%</code>ã€‚</p>
<p>ğŸ‘‡ğŸ‘‡ğŸ‘‡ <strong>æ»‘åŠ¨å¹³å‡æ¨¡å‹/æŒ‡æ•°è¡°å‡å­¦ä¹ ç‡/æ­£åˆ™åŒ–å½±å“</strong> ğŸ‘‡ğŸ‘‡ğŸ‘‡</p>
<p>ä»ä¸Šå›¾æ•°å­—ä¸­å‘ç° &gt;&gt;&gt;&gt; ä½¿ç”¨æ»‘åŠ¨å¹³å‡æ¨¡å‹ã€æŒ‡æ•°è¡°å‡å­¦ä¹ ç‡å’Œä½¿ç”¨æ­£åˆ™åŒ–å¸¦æ¥çš„æ­£ç¡®ç‡æå‡å¹¶ä¸æ˜¯ç‰¹åˆ«æ˜æ˜¾ã€‚å…¶ä¸­ï¼Œä½¿ç”¨äº†æ‰€æœ‰ä¼˜åŒ–æ–¹æ³•çš„æ¨¡å‹ã€å’Œä¸ä½¿ç”¨æ»‘åŠ¨å¹³å‡æ¨¡å‹ï¼Œä»¥åŠä¸ä½¿ç”¨æŒ‡æ•°è¡°å‡å­¦ä¹ ç‡çš„æ¨¡å‹æ­£ç¡®ç‡éƒ½å¯ä»¥è¾¾åˆ°çº¦ <code>98.4%</code> ã€‚</p>
<p>é‚£ä¹ˆæ˜¯ä¸æ˜¯æ„å‘³ç€è¿™äº›ä¼˜åŒ–æ–¹æ³•å¯¹æ¨¡å‹å‡†ç¡®ç‡æå‡ä¸å¤§ï¼Ÿï¼ï¼</p>
<p>ç­”æ¡ˆè‚¯å®šæ˜¯å¦å®šçš„ï¼ï¼ï¼è¿™é‡Œå‡†ç¡®ç‡æå‡ä¸æ˜¯ç‰¹åˆ«æ˜æ˜¾ï¼Œæ˜¯ç”±äº MNIST æ•°æ®é›†ç®€å•ï¼Œæ¨¡å‹æ”¶æ•›é€Ÿåº¦å¾ˆå¿«ï¼ˆæ¢¯åº¦è¾ƒå°ï¼‰ï¼Œè€Œæ»‘åŠ¨å¹³å‡æ¨¡å‹ä»¥åŠæŒ‡æ•°è¡°å‡å­¦ä¹ ç‡åœ¨ä¸€å®šç¨‹åº¦ä¸Šéƒ½æ˜¯é™åˆ¶ç¥ç»ç½‘ç»œä¸­å‚æ•°çš„æ›´æ–°é€Ÿåº¦ï¼Œæ‰€ä»¥è¿™ä¸¤ç§ä¼˜åŒ–å¯¹æœ€ç»ˆæ¨¡å‹å½±å“ä¸å¤§ã€‚</p>
<p>ä»ä¸Šé¢æ¨¡å‹åœ¨éªŒè¯æ•°æ®å’Œæµ‹è¯•æ•°æ®ä¸Šçš„å‡†ç¡®ç‡æ›²çº¿å¯ä»¥çœ‹å‡ºï¼Œåœ¨è¿­ä»£ <code>4000</code> æ¬¡ä»¥åå°±å·²ç»æ¥è¿‘æœ€ç»ˆçš„å‡†ç¡®ç‡äº†ï¼ˆæ”¶æ•›å¤ªå¿«ï¼‰ã€‚</p>
<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p>ä¸‹é¢æˆ‘ä»¬å°†è¿›ä¸€æ­¥åˆ†ææ»‘åŠ¨å¹³å‡æ¨¡å‹ã€æŒ‡æ•°è¡°å‡å­¦ä¹ ç‡å’Œä½¿ç”¨æ­£åˆ™åŒ–å¯¹è®­ç»ƒæ¨¡å‹çš„å½±å“ï¼š</p>
<p><strong>[1] &gt;&gt;&gt;&gt; æ»‘åŠ¨å¹³å‡æ¨¡å‹å’ŒæŒ‡æ•°è¡°å‡å­¦ä¹ ç‡</strong></p>
<p>å…ˆç»™å‡ºä¸åŒè¿­ä»£è½®æ•°æ—¶ï¼Œä½¿ç”¨äº†æ‰€æœ‰ä¼˜åŒ–æ–¹æ³•çš„æ¨¡å‹çš„æ­£ç¡®ç‡ä¸å¹³å‡ç»å¯¹æ¢¯åº¦çš„å˜åŒ–è¶‹åŠ¿å›¾ï¼š</p>
<div align=center><img src="https://s2.loli.net/2023/05/31/MkgaebKwiFlsORJ.png"></div>

<p>å¯ä»¥çœ‹å‡ºï¼Œå‰ <code>4000</code> è½®è¿­ä»£å¯¹æ¨¡å‹çš„æ”¹å˜æ˜¯æœ€å¤§çš„ã€‚åœ¨ 4000 è½®è¿­ä»£ä¹‹åï¼Œç”±äºæ¢¯åº¦æ¯”è¾ƒå°ï¼Œæ‰€ä»¥å‚æ•°çš„æ”¹å˜ä¹Ÿå°±æ¯”è¾ƒç¼“æ…¢äº†ã€‚äºæ˜¯æ»‘åŠ¨å¹³å‡æ¨¡å‹æˆ–è€…æŒ‡æ•°è¡°å‡å­¦ä¹ ç‡çš„ä½œç”¨ä¹Ÿå°±æ²¡é‚£ä¹ˆæ˜¾è‘—äº†ã€‚</p>
<p>ä¸åŒè¿­ä»£è½®æ•°æ—¶ï¼Œæ¨¡å‹æ­£ç¡®ç‡å’Œè¡°å‡ä¹‹åå­¦ä¹ ç‡çš„å˜åŒ–è¶‹åŠ¿å›¾å¦‚ä¸‹ï¼š</p>
<div align=center><img src="https://s2.loli.net/2023/05/31/GmCeI4qvkBy2a3b.png"></div>

<p>å¯ä»¥çœ‹å‡ºï¼Œå­¦ä¹ ç‡æ›²çº¿å‘ˆç°é˜¶æ¢¯çŠ¶è¡°å‡æ–¹å¼ã€‚åœ¨å‰ <code>4000</code> è½®æ—¶ï¼Œè¡°å‡ä¹‹åçš„å­¦ä¹ ç‡å’Œåˆå§‹å­¦ä¹ ç‡çš„å·®è·å¹¶ä¸å¤§ã€‚é‚£ä¹ˆï¼Œèƒ½å¦è¯´æ˜è¿™äº›é™åˆ¶ç½‘ç»œå‚æ•°çš„æ›´æ–°é€Ÿåº¦çš„ä¼˜åŒ–æ–¹æ³•ä½œç”¨ä¸å¤§ï¼Ÿï¼ï¼</p>
<p>å®é™…ä¸Šï¼Œå½“é—®é¢˜æ›´åŠ å¤æ‚æ—¶ï¼Œæ¨¡å‹è¿­ä»£ä¸ä¼šè¿™ä¹ˆå¿«æ”¶æ•›ï¼Œè¿™æ—¶æ»‘åŠ¨å¹³å‡æ¨¡å‹å’ŒæŒ‡æ•°è¡°å‡å­¦ä¹ ç‡ä¼šå‘æŒ¥æ›´å¤§çš„ä½œç”¨ï¼ï¼ï¼ä¾‹å¦‚ Cifar-10 å›¾åƒåˆ†ç±»æ•°æ®é›†ä¸Šï¼Œä½¿ç”¨æ»‘åŠ¨å¹³å‡æ¨¡å‹å¯ä»¥å°†æ¨¡å‹è¯†åˆ«çš„é”™è¯¯ç‡é™ä½ <code>11%</code>ï¼Œä½¿ç”¨æŒ‡æ•°è¡°å‡å­¦ä¹ ç‡å¯ä»¥å°†è¯†åˆ«é”™è¯¯ç‡é™ä½ <code>7%</code>ã€‚</p>
<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p><strong>[2] &gt;&gt;&gt;&gt; æ­£åˆ™åŒ–</strong></p>
<p>ç›¸è¾ƒäºæ»‘åŠ¨å¹³å‡æ¨¡å‹å’ŒæŒ‡æ•°è¡°å‡å­¦ä¹ ç‡ï¼Œä½¿ç”¨åŠ å…¥äº†æ­£åˆ™åŒ–æŸå¤±å‡½æ•°ï¼ˆç»“æ„é£é™©ï¼‰ç»™æ¨¡å‹æ•ˆæœå¸¦æ¥çš„æå‡è¦ç›¸å¯¹æ˜¾è‘—ã€‚</p>
<p>ä¸‹å›¾å¯¹æ¯”äº†ä¸¤ä¸ªä½¿ç”¨äº†ä¸åŒæŸå¤±å‡½æ•°çš„ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œå…¶ä¸­ä¸€ä¸ªæ¨¡å‹åªæœ€å°åŒ–äº¤å‰ç†µæŸå¤±ï¼Œå¦ä¸€ä¸ªæ¨¡å‹ä¼˜åŒ–çš„æ˜¯äº¤å‰ç†µæŸå¤±å’Œ L2 æ­£åˆ™åŒ–æŸå¤±çš„å’Œï¼š</p>
<div align=center><img src="https://s2.loli.net/2023/05/31/u2Dj8cPCdVGzEMn.png"></div>

<p>æ˜¾è€Œæ˜“è§ï¼Œåªä¼˜åŒ–äº¤å‰ç†µçš„æ¨¡å‹åœ¨è®­ç»ƒæ•°æ®ä¸Šçš„äº¤å‰ç†µæŸå¤±ï¼ˆç°è‰²è™šçº¿ï¼‰è¦æ¯”ä¼˜åŒ–æ€»æŸå¤±çš„æ¨¡å‹æ›´å°ï¼ˆé»‘è‰²è™šçº¿ï¼‰ã€‚ç„¶è€Œåœ¨æµ‹è¯•æ•°æ®ä¸Šï¼Œä¼˜åŒ–æ€»æŸå¤±çš„æ¨¡å‹ï¼ˆé»‘è‰²å®çº¿ï¼‰å´è¦å¥½äºåªä¼˜åŒ–äº¤å‰ç†µçš„æ¨¡å‹ï¼ˆç°è‰²å®çº¿ï¼‰ã€‚è¿™å°±æ˜¯å‰é¢æˆ‘ä»¬æåˆ°è¿‡çš„è¿‡æ‹Ÿåˆé—®é¢˜ã€‚</p>
<p>è¿™æ˜¯ç”±äºåªä¼˜åŒ–äº¤å‰ç†µçš„æ¨¡å‹å¯èƒ½æ›´å¥½çš„æ‹Ÿåˆè®­ç»ƒæ•°æ®ï¼ˆæŸå¤±æ›´å°ï¼‰ï¼Œå´ä¸èƒ½å¾ˆå¥½çš„æŒ–æ˜æ•°æ®ä¸­çš„æ½œåœ¨è§„å¾‹æ¥åˆ¤æ–­æœªçŸ¥çš„æµ‹è¯•æ•°æ®ï¼Œæ•…åœ¨æµ‹è¯•æ•°æ®ä¸Šçš„å‡†ç¡®ç‡ä½ã€‚</p>
<p>æˆ‘ä»¬å†ç»™å‡ºä¸åŒæ¨¡å‹çš„æŸå¤±å‡½æ•°å˜åŒ–è§„å¾‹ï¼š</p>
<div align=center><img src="https://s2.loli.net/2023/05/31/VorUCn3NpdkItSX.png"></div>

<p>ä»å·¦ä¾§åªä¼˜åŒ–äº¤å‰ç†µæ¨¡å‹å­å›¾å¯ä»¥çœ‹å‡ºï¼Œéšç€è¿­ä»£çš„è¿›è¡Œï¼Œæ­£åˆ™åŒ–æŸå¤±æ˜¯åœ¨ä¸æ–­å¢å¤§çš„ã€‚</p>
<p>è€Œç”±äº MNIST é—®é¢˜ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œè¿­ä»£åæœŸçš„æ¢¯åº¦å¾ˆå°ï¼Œæ‰€ä»¥æ­£åˆ™åŒ–æŸå¤±çš„å¢é•¿ä¹Ÿå¾ˆæ…¢ã€‚å¯¹äºæ›´åŠ å¤æ‚çš„é—®é¢˜ï¼Œè¿­ä»£åæœŸçš„æ¢¯åº¦æ›´å¤§ï¼Œå°±ä¼šå‘ç°æ€»æŸå¤±ï¼ˆäº¤å‰ç†µæŸå¤±åŠ ä¸Šæ­£åˆ™åŒ–æŸå¤±ï¼‰ä¼šå‘ˆç°ä¸€ä¸ª <code>U</code> å‹ï¼ï¼ï¼</p>
<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p><font color="red">â†“â†“â†“â†“â†“â†“ ç»“è®º â†“â†“â†“â†“â†“â†“</font></p>
<p>å¯ä»¥å‘ç°ï¼Œä¸Šè¿°çš„è¿™äº›ä¼˜åŒ–æ–¹æ³•ç¡®å®å¯ä»¥è§£å†³å‰é¢åšæ–‡ä¸­æåˆ°çš„ç¥ç»ç½‘ç»œä¼˜åŒ–è¿‡ç¨‹ä¸­çš„é—®é¢˜ã€‚å½“éœ€è¦è§£å†³çš„é—®é¢˜å’Œä½¿ç”¨åˆ°çš„ç¥ç»ç½‘ç»œæ¨¡å‹æ›´åŠ å¤æ‚æ—¶ï¼Œä¸Šé¢çš„è¿™äº›ä¼˜åŒ–æ–¹æ³•å°†æ›´æœ‰å¯èƒ½å¯¹è®­ç»ƒæ•ˆæœäº§ç”Ÿæ›´å¤§çš„å½±å“ã€‚</p>
<hr>
<h2 id="TF-å˜é‡å‘½åç©ºé—´ç®¡ç†"><a href="#TF-å˜é‡å‘½åç©ºé—´ç®¡ç†" class="headerlink" title="TF å˜é‡å‘½åç©ºé—´ç®¡ç†"></a>TF å˜é‡å‘½åç©ºé—´ç®¡ç†</h2><p>ç”±äºç¼–ç¨‹ä¹ æƒ¯ï¼Œæˆ‘ä»¬é€šå¸¸å–œæ¬¢é‡‡ç”¨æ¨¡å—åŒ–ç¼–ç¨‹é£æ ¼ï¼Œæé«˜ä»£ç å¯è¯»æ€§ã€‚</p>
<p>ä¸Šé¢ç»™å‡ºçš„ TF å®ç° MNIST æ‰‹å†™ä½“æ•°å­—å›¾åƒè¯†åˆ«ç¤ºä¾‹ä¸­ï¼Œå°†è®¡ç®—ç¥ç»ç½‘ç»œå‰å‘ä¼ æ’­ç»“æœçš„è¿‡ç¨‹æŠ½è±¡æˆäº†ä¸€ä¸ªå‡½æ•°ï¼ˆæ¨¡å—ï¼‰:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">inference</span>(<span class="params">input_tensor, avg_class, weights1, biases1, weights2, biases2</span>)</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å¸¦æ¥çš„ä¸€ä¸ªå¥½å¤„ï¼šåœ¨è®­ç»ƒã€æµ‹è¯•ä»¥åŠé¢„æµ‹çš„è¿‡ç¨‹ä¸­å¯ä»¥ç»Ÿä¸€è°ƒç”¨åŒä¸€ä¸ªå‡½æ•°æ¥å¾—åˆ°æ¨¡å‹çš„å‰å‘ä¼ æ’­ç»“æœã€‚</p>
<hr>
<h3 id="å˜é‡çš„é‡ç”¨ä»¥åŠå‘½åç©ºé—´"><a href="#å˜é‡çš„é‡ç”¨ä»¥åŠå‘½åç©ºé—´" class="headerlink" title="å˜é‡çš„é‡ç”¨ä»¥åŠå‘½åç©ºé—´"></a>å˜é‡çš„é‡ç”¨ä»¥åŠå‘½åç©ºé—´</h3><p>ä»ä¸Šè¿° FP è¿‡ç¨‹å®šä¹‰ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªå‡½æ•°çš„å½¢å‚ä¸­éœ€è¦åŒ…æ‹¬ç¥ç»ç½‘ç»œä¸­çš„æ‰€æœ‰å‚æ•°ã€‚</p>
<p>ä½ æƒ³è¿‡æ²¡æœ‰ï¼šå½“ç¥ç»ç½‘ç»œçš„ç»“æ„æ›´åŠ å¤æ‚ï¼Œå¼•å…¥çš„å‚æ•°æ›´å¤šæ—¶ï¼Œå°±éœ€è¦ä¸€ä¸ªæ›´å¥½çš„æ–¹å¼æ¥ä¼ é€’å’Œç®¡ç†ç¥ç»ç½‘ç»œä¸­çš„å‚æ•°äº† &gt;&gt;&gt;&gt; <strong>TensorFlow æ”¯æŒé€šè¿‡å˜é‡åç§°æ¥åˆ›å»ºæˆ–è€…è·å–ä¸€ä¸ªå˜é‡çš„æœºåˆ¶ã€‚</strong></p>
<p>é€šè¿‡è¿™ç§æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸åŒå‡½æ•°ä¸­å¯ä»¥ç›´æ¥é€šè¿‡å˜é‡çš„åç§°æ¥ä½¿ç”¨å˜é‡ï¼ˆå˜é‡é‡ç”¨ï¼‰ï¼Œè€Œä¸è¦å°†å˜é‡é€šè¿‡å‚æ•°çš„å½¢å¼åˆ°å¤„ä¼ é€’ã€‚</p>
<p>TF ä¸­é€šè¿‡ <code>tf.get_variable</code> å‡½æ•°å’Œ <code>tf.variable_scope</code> å‡½æ•°æ¥åˆ†åˆ«å®ç° TF å˜é‡çš„é‡ç”¨å’Œå‘½åç©ºé—´ç®¡ç†ã€‚</p>
<hr>
<h4 id="TF-å˜é‡é‡ç”¨"><a href="#TF-å˜é‡é‡ç”¨" class="headerlink" title="TF å˜é‡é‡ç”¨"></a>TF å˜é‡é‡ç”¨</h4><p>é™¤äº†ä¹‹å‰æåˆ°è¿‡çš„ <code>tf.Variable()</code> å˜é‡åˆ›å»ºå‡½æ•°ï¼ŒTensorFlow ä¸­è¿˜æ”¯æŒé€šè¿‡ <code>tf.get_variable</code> å‡½æ•°æ¥è·å–å·²å­˜åœ¨å˜é‡ï¼ˆä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰ã€‚</p>
<p><strong>[1] &gt;&gt;&gt;&gt; tf.Variable</strong></p>
<p>é‡æ–°è®¤è¯†ä¸€ä¸‹ tf.Variable() å‡½æ•°ï¼š</p>
<p>tf.Variable å‡½æ•°ç”¨äºç”Ÿæˆä¸€ä¸ªåˆå§‹å€¼ä¸º <code>initial-value</code> çš„å˜é‡ï¼ˆå¿…é¡»æŒ‡å®šåˆå§‹åŒ–å€¼ï¼‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">tf.Variable(</span><br><span class="line">    initial_value=<span class="literal">None</span>, </span><br><span class="line">    trainable=<span class="literal">True</span>, </span><br><span class="line">    collections=<span class="literal">None</span>, </span><br><span class="line">    validate_shape=<span class="literal">True</span>, </span><br><span class="line">    caching_device=<span class="literal">None</span>, </span><br><span class="line">    name=<span class="literal">None</span>, </span><br><span class="line">    variable_def=<span class="literal">None</span>, </span><br><span class="line">    dtype=<span class="literal">None</span>, </span><br><span class="line">    expected_shape=<span class="literal">None</span>, </span><br><span class="line">    import_scope=<span class="literal">None</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>ç»å¸¸ä½¿ç”¨çš„æ˜¯ï¼šinitial_valueï¼ˆåˆå§‹åŒ–ï¼‰ã€nameï¼ˆå‘½åï¼‰ã€dtypeï¼ˆå˜é‡ç±»å‹ï¼‰ã€trainableï¼ˆæ˜¯å¦å¯è®­ç»ƒ/ä¼˜åŒ–ï¼‰ã€‚</p>
<p><font color="red">â†“â†“â†“â†“â†“â†“ å‚æ•°è§£é‡Š â†“â†“â†“â†“â†“â†“</font></p>
<ul>
<li><font color="yellow">initial_value</font>ï¼šVariable åˆå§‹å€¼ï¼Œä¸º Tensor æˆ–å¯è½¬æ¢ä¸º Tensor çš„ Python å¯¹è±¡ã€‚å¦‚æœ <code>validate_shape = Trueï¼ˆé»˜è®¤ï¼‰</code>ï¼Œåˆ™åˆå§‹å€¼å¿…é¡»å…·æœ‰æŒ‡å®šçš„å½¢çŠ¶ï¼›</li>
<li><font color="yellow">validate_shape</font>ï¼šé»˜è®¤ä¸º Trueï¼Œinitial_value å¿…é¡»å…·æœ‰æŒ‡å®šçš„å½¢çŠ¶ã€‚å¦‚æœä¸º Falseï¼Œåˆ™å…è®¸ä½¿ç”¨æœªçŸ¥å½¢çŠ¶çš„å€¼åˆå§‹åŒ–å˜é‡ï¼›</li>
<li><font color="yellow">name</font>ï¼šå˜é‡çš„å¯é€‰åç§°ï¼Œé»˜è®¤ä¸º â€œVariableâ€ å¹¶è‡ªåŠ¨è·å–ï¼›</li>
<li><font color="yellow">dtype</font>ï¼šå¦‚æœè®¾ç½®ï¼Œåˆ™ initial_value å°†è½¬æ¢ä¸ºç»™å®šç±»å‹ï¼›å¦‚æœä¸º Noneï¼Œåˆ™ä¿ç•™æ•°æ®ç±»å‹ï¼›</li>
<li><font color="yellow">trainable</font>ï¼šç”¨äºæ ‡è¯†æ¨¡å‹è®­ç»ƒæ—¶æ˜¯å¦æ›´æ–°å½“å‰å‚æ•°ï¼›å¦‚æœä¸º Trueï¼Œå½“å‰å˜é‡ä¼šè¢«æ·»åŠ åˆ°å›¾å½¢é›†åˆ GraphKeys.TRAINABLE_VARIABLESä¸­ï¼›</li>
<li><font color="yellow">collections</font>ï¼š</li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>TensorFlow å…¥é—¨ä¹‹ MNIST æ‰‹å†™ä½“æ•°å­—è¯†åˆ«é—®é¢˜</p><p><a href="https://www.orangeshare.cn/2018/04/05/tensorflow-ru-men-zhi-mnist-shou-xie-ti-shu-zi-shi-bie-wen-ti/">https://www.orangeshare.cn/2018/04/05/tensorflow-ru-men-zhi-mnist-shou-xie-ti-shu-zi-shi-bie-wen-ti/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Waldeinsamkeit</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2018-04-05</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2023-06-07</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/TensorFlow/">TensorFlow</a></div><div class="notification is-danger">You need to set <code>install_url</code> to use ShareThis. Please set it in <code>_config.yml</code>.</div></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="/" alt="Alipay"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2019/01/01/wang-zhan-ji-chu-zhi-url-jie-gou-jie-xi/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">ç½‘ç«™åŸºç¡€ä¹‹ URL ç»“æ„è§£æ</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2018/04/04/tensorflow-ru-men-zhi-shen-du-xue-xi-he-shen-ceng-shen-jing-wang-luo/"><span class="level-item">TensorFlow å…¥é—¨ä¹‹æ·±åº¦å­¦ä¹ å’Œæ·±å±‚ç¥ç»ç½‘ç»œ</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div class="notification is-danger">You forgot to set the <code>shortname</code> for Disqus. Please set it in <code>_config.yml</code>.</div></div></div></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen  order-3 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Waldeinsamkeit"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Waldeinsamkeit</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">100</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">13</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">43</p></a></div></div></nav></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#æçº²"><span class="level-left"><span class="level-item">1</span><span class="level-item">æçº²</span></span></a></li><li><a class="level is-mobile" href="#åˆè¯†-MNIST-æ•°æ®é›†"><span class="level-left"><span class="level-item">2</span><span class="level-item">åˆè¯† MNIST æ•°æ®é›†</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#MNIST-æ•°æ®å•å…ƒ"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">MNIST æ•°æ®å•å…ƒ</span></span></a></li><li><a class="level is-mobile" href="#TensorFlow-Support"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">TensorFlow Support</span></span></a></li></ul></li><li><a class="level is-mobile" href="#MNIST-FCNN-æ¨¡å‹è®­ç»ƒä»¥åŠä¸åŒä¼˜åŒ–æ•ˆæœå¯¹æ¯”"><span class="level-left"><span class="level-item">3</span><span class="level-item">MNIST FCNN æ¨¡å‹è®­ç»ƒä»¥åŠä¸åŒä¼˜åŒ–æ•ˆæœå¯¹æ¯”</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#TF-å®ç°-MNIST-å›¾åƒè¯†åˆ«é—®é¢˜"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">TF å®ç° MNIST å›¾åƒè¯†åˆ«é—®é¢˜</span></span></a></li><li><a class="level is-mobile" href="#æ¨¡å‹æ•ˆæœè¯„ä¼°"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">æ¨¡å‹æ•ˆæœè¯„ä¼°</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#æµ‹è¯•é›†è¯„ä¼°"><span class="level-left"><span class="level-item">3.2.1</span><span class="level-item">æµ‹è¯•é›†è¯„ä¼°</span></span></a></li><li><a class="level is-mobile" href="#éªŒè¯é›†è¿‘ä¼¼è¯„ä¼°"><span class="level-left"><span class="level-item">3.2.2</span><span class="level-item">éªŒè¯é›†è¿‘ä¼¼è¯„ä¼°</span></span></a></li></ul></li><li><a class="level is-mobile" href="#ä¸åŒä¼˜åŒ–æ–¹æ³•æ¨¡å‹æ•ˆæœå¯¹æ¯”"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">ä¸åŒä¼˜åŒ–æ–¹æ³•æ¨¡å‹æ•ˆæœå¯¹æ¯”</span></span></a></li></ul></li><li><a class="level is-mobile" href="#TF-å˜é‡å‘½åç©ºé—´ç®¡ç†"><span class="level-left"><span class="level-item">4</span><span class="level-item">TF å˜é‡å‘½åç©ºé—´ç®¡ç†</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#å˜é‡çš„é‡ç”¨ä»¥åŠå‘½åç©ºé—´"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">å˜é‡çš„é‡ç”¨ä»¥åŠå‘½åç©ºé—´</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#TF-å˜é‡é‡ç”¨"><span class="level-left"><span class="level-item">4.1.1</span><span class="level-item">TF å˜é‡é‡ç”¨</span></span></a></li></ul></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="When Art Meets Tech" height="28"></a><p class="is-size-7"><span>&copy; 2023 Waldeinsamkeit</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" async></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>