<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Python 数据分析之 NumPy 数学计算库 - When Art Meets Tech</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="When Art Meets Tech"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="When Art Meets Tech"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="NumPy 是 Numerical Python 的缩写，它是 Python 语言的一个第三方数值计算库，用于弥补 Python 对多维数组和矩阵运算的支持。其地位斐然，是 Python 进行科学计算、数据分析以及机器学习的基础包，必须掌握不可！！！ 话不多说，一睹为快~~~"><meta property="og:type" content="blog"><meta property="og:title" content="Python 数据分析之 NumPy 数学计算库"><meta property="og:url" content="https://www.orangeshare.cn/2018/01/20/python-shu-ju-fen-xi-zhi-numpy-shu-xue-ji-suan-ku/"><meta property="og:site_name" content="When Art Meets Tech"><meta property="og:description" content="NumPy 是 Numerical Python 的缩写，它是 Python 语言的一个第三方数值计算库，用于弥补 Python 对多维数组和矩阵运算的支持。其地位斐然，是 Python 进行科学计算、数据分析以及机器学习的基础包，必须掌握不可！！！ 话不多说，一睹为快~~~"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://s2.loli.net/2023/04/04/bD68CBHpyGcwxY7.jpg"><meta property="og:image" content="https://s2.loli.net/2023/04/06/R5GZvx9wJsSKTQi.png"><meta property="og:image" content="https://s2.loli.net/2023/04/07/I5uxZL2Y6fstXlS.png"><meta property="og:image" content="https://s2.loli.net/2023/05/04/JANqdpczsjlbLhU.jpg"><meta property="og:image" content="https://s2.loli.net/2023/05/04/4TgKXNziWQHdPAD.jpg"><meta property="og:image" content="https://s2.loli.net/2023/05/05/aNuH8ldn2rsf7wh.jpg"><meta property="article:published_time" content="2018-01-20T00:39:03.000Z"><meta property="article:modified_time" content="2023-05-09T02:57:53.879Z"><meta property="article:author" content="Waldeinsamkeit"><meta property="article:tag" content="Python"><meta property="article:tag" content="Data Analysis"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://s2.loli.net/2023/04/04/bD68CBHpyGcwxY7.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.orangeshare.cn/2018/01/20/python-shu-ju-fen-xi-zhi-numpy-shu-xue-ji-suan-ku/"},"headline":"When Art Meets Tech","image":["https://s2.loli.net/2023/04/04/bD68CBHpyGcwxY7.jpg","https://s2.loli.net/2023/04/06/R5GZvx9wJsSKTQi.png","https://s2.loli.net/2023/04/07/I5uxZL2Y6fstXlS.png","https://s2.loli.net/2023/05/04/JANqdpczsjlbLhU.jpg","https://s2.loli.net/2023/05/04/4TgKXNziWQHdPAD.jpg","https://s2.loli.net/2023/05/05/aNuH8ldn2rsf7wh.jpg"],"datePublished":"2018-01-20T00:39:03.000Z","dateModified":"2023-05-09T02:57:53.879Z","author":{"@type":"Person","name":"Waldeinsamkeit"},"description":"NumPy 是 Numerical Python 的缩写，它是 Python 语言的一个第三方数值计算库，用于弥补 Python 对多维数组和矩阵运算的支持。其地位斐然，是 Python 进行科学计算、数据分析以及机器学习的基础包，必须掌握不可！！！ 话不多说，一睹为快~~~"}</script><link rel="canonical" href="https://www.orangeshare.cn/2018/01/20/python-shu-ju-fen-xi-zhi-numpy-shu-xue-ji-suan-ku/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Oxanium:wght@300;400;600&amp;family=Roboto+Mono"><link rel="stylesheet" href="/css/cyberpunk.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.2.0"></head>    <body class="is-3-column">    <nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="When Art Meets Tech" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Hexo Search" href="https://hexo.io/zh-cn/"><i class="fab fa-hotjar"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><i class="fas fa-angle-double-right"></i>Python 数据分析之 NumPy 数学计算库</h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2018-01-20</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2023-05-09</time></span><span class="level-item"><a class="link-muted" href="/categories/Data-Analysis/">Data Analysis</a></span><span class="level-item">2 hours read (About 19916 words)</span></div></div><div class="content"><p>NumPy 是 Numerical Python 的缩写，它是 Python 语言的一个第三方数值计算库，用于弥补 Python 对多维数组和矩阵运算的支持。其地位斐然，是 Python 进行科学计算、数据分析以及机器学习的基础包，必须掌握不可！！！</p>
<p>话不多说，一睹为快~~~</p>
<a id="more"></a>

<p>更多 Python 数据分析扩展相关内容，请关注博主相关博文系列 ↓↓↓↓↓</p>
<p>之一 &gt;&gt;&gt;&gt; <a href="https://www.orangeshare.cn/2018/01/20/python-shu-ju-fen-xi-zhi-numpy-shu-xue-ji-suan-ku/">Python 数据分析之 NumPy 数学计算库</a></p>
<p>之二 &gt;&gt;&gt;&gt; <a href="https://www.orangeshare.cn/">Python 数据分析之 Pandas 数据分析库</a></p>
<p>之三 &gt;&gt;&gt;&gt; <a href="https://www.orangeshare.cn/">Python 数据分析之 Matplotlib 数据可视化库</a></p>
<p>之四 &gt;&gt;&gt;&gt; <a href="https://www.orangeshare.cn/">Python 数据分析之 SciPy 科学计算化库</a></p>
<hr>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p><strong>NumPy（Numerical Python）</strong>是 Python 语言的一个扩展数值计算库，支持多维数组和矩阵运算，此外针对数组运算提供了大量的数学函数支持。再加上其底层主要用 C 语言编写，因此可以高速地执行数组与矩阵的数值计算。</p>
<p>见面知义，NumPy 是专门面向 Python 的数值计算库，其特点就在于 &gt;&gt;&gt; <font color="red">扩充了 Python 对多维数组和矩阵运算的支持，提供了更丰富的数学函数。</font></p>
<p>👇👇👇 <strong>数组（Array）VS 矩阵（Matrix）</strong> 👇👇👇</p>
<p><font color="red"> ↓↓↓↓↓↓ 数组（Array） ↓↓↓↓↓↓ </font></p>
<ul>
<li>数组（Array）是有限个、数据类型相同的元素，组成的元素序列；</li>
<li>数组（Array）中的每个元素都是数组的一个分量，都有一个对应的下标（索引）；</li>
</ul>
<p><font color="red"> ↓↓↓↓↓↓ 矩阵（Matrix） ↓↓↓↓↓↓ </font></p>
<ul>
<li>矩阵（Matrix）是一个由实数或复数元素排列而成的长方阵列；</li>
<li>矩阵（Matrix）最早来自于方程组的系数以及常数构成的方阵。</li>
</ul>
<p><font color="red"> ↓↓↓↓↓↓ 数组和矩阵的区别 ↓↓↓↓↓↓ </font></p>
<ul>
<li>矩阵（Matrix）中的元素只能是数字，而数组（Array）中的元素还可以是字符串等；</li>
<li>矩阵（Matrix）是二维的，而数组（Array）可以是一维的、多维的；</li>
<li>矩阵（Matrix）显示时，元素之间无逗号；而数组（Array）显示时，元素之间用逗号隔开。</li>
</ul>
<p>| =============================================== <strong>Split Line</strong> ================================================= |</p>
<p>👇👇👇 <strong>应用场景</strong> 👇👇👇</p>
<p>NumPy 通常与 SciPy（科学计算或算法库）、Pandas（数据分析库）和 Matplotlib（数据可视化库）一起使用，该组合广泛用于替代 MatLab，进行数据分析以及机器学习任务。</p>
<p>NumPy 知识点思维导图一览：</p>
<p><img src="https://s2.loli.net/2023/04/04/bD68CBHpyGcwxY7.jpg"></p>
<hr>
<h2 id="Setup-amp-amp-Import"><a href="#Setup-amp-amp-Import" class="headerlink" title="Setup &amp;&amp; Import"></a>Setup &amp;&amp; Import</h2><p>我们知道，NumPy 是 Python 的第三方扩展包，不包含在 Python 的内置库中，因此需要单独安装它。</p>
<p><font color="red">↓↓↓↓↓↓ 1. Setup ↓↓↓↓↓↓</font></p>
<p>NumPy 的安装方式也比较简单，直接使用 Python 的包管理器 <code>pip</code> 进行安装即可：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> pip install numpy</span></span><br></pre></td></tr></table></figure>

<p>由于 NumPy 通常与 SciPy &amp;&amp; Pandas &amp;&amp; Matplotlib 库组合使用，它们均可以使用包管理器 <code>pip</code> 直接安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> pip install scipy</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> pip install pandas</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> pip install matplotlib</span></span><br></pre></td></tr></table></figure>

<p>需要注意的是，Windows 下直接使用  <code>pip install scipy</code> 可能会发生依赖项报错问题，所以不推荐直接使用 Python 原生 pip 安装 SciPy 程序包。</p>
<p>推荐使用 Anaconda 科学计算平台提供的 Conda 工具进行安装（很好的解决 Windows 平台安装第三方包经常失败的场景），详情可参见 &gt;&gt;&gt; 【<a href="https://www.orangeshare.cn/2018/01/03/yi-wen-liao-jie-shu-ju-ke-xue-shen-qi-anaconda/">一文了解数据科学神器 Anaconda</a>】。</p>
<p><font color="red">↓↓↓↓↓↓ 2. Import ↓↓↓↓↓↓</font></p>
<p>NumPy 使用前，可以根据使用情况选择 <code>numpy</code> 包的导入方式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将整个模块导入</span></span><br><span class="line"><span class="keyword">import</span> numpy</span><br><span class="line"><span class="comment"># 方便模块使用（常用）</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> array, sin</span><br></pre></td></tr></table></figure>

<p>之后的学习中，你可能还会在 Jupyter（或 IPython）中看到如下导入方式（Magic 指令）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 不推荐该导入方式：</span></span><br><span class="line"><span class="meta">%</span><span class="bash">pylab</span></span><br><span class="line">Using matplotlib backend: &lt;object object at 0x000002849FB94E60&gt;</span><br><span class="line">Populating the interactive namespace from numpy and matplotlib</span><br></pre></td></tr></table></figure>

<p>根据日志信息，发现该魔法指令同时导入了 <code>numpy</code> &amp;&amp; <code>matplotlib</code>，如何理解？！！官网有这样一段描述：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pylab is a convenience module that bulk imports matplotlib.pyplot (for plotting) and numpy (for mathematics and working with arrays) in a single name space. Although many examples use pylab, it is no longer recommended.</span><br></pre></td></tr></table></figure>

<p>这是 stackoverflow 上的解释 &gt;&gt;&gt; 【<a href="http://link.zhihu.com/?target=http://stackoverflow.com/questions/11469336/what-is-the-difference-between-pylab-and-pyplot">What is the difference between pylab and pyplot?</a>】。</p>
<hr>
<h2 id="NumPy-Ndarray-数组"><a href="#NumPy-Ndarray-数组" class="headerlink" title="NumPy Ndarray 数组"></a>NumPy Ndarray 数组</h2><p>为什么说 NumPy 数组是对 Python 多维数组的扩展？？？Python 内建对象中，数组的两种形式：</p>
<ul>
<li>列表：[1, 2, 3]</li>
<li>元组：(1, 2, 3, 4, 5)</li>
</ul>
<p>可见，Python 标准类针对数组的直接处理局限于 1 维~~~</p>
<p>NumPy <strong>数值计算库的核心特性</strong> 就是 &gt;&gt;&gt;&gt; <font color="green"> 定义了一个 n 维数组对象，ndarray 对象。NumPy 数组也就是 ndarray 多维数组</font> &lt;&lt;&lt;&lt; 区别于 Python 标准库，NumPy 拥有对高维数组的直接处理能力。</p>
<hr>
<h3 id="Ndarray-对象结构解析"><a href="#Ndarray-对象结构解析" class="headerlink" title="Ndarray 对象结构解析"></a>Ndarray 对象结构解析</h3><p>通俗的来说：</p>
<p>ndarray 数组是 &gt;&gt;&gt; 由 <font color="red">相同数据类型的元素</font> 组成的元素序列，且每个元素均有一个对应下标（<font color="red">索引机制</font>）。数组的索引机制将 <font color="red">元素序列都映射到内存块（连续的内存空间）</font> 中，并按照一定的 <font color="red">布局方式（C-Order：行优先 &amp;&amp; Fortran-Order：列优先）</font>对内存块进行排列。</p>
<p>你可以结合 ndarray 的内存布局示意图理解：</p>
<div align=center><img src="https://s2.loli.net/2023/04/06/R5GZvx9wJsSKTQi.png"></div>

<p>其中：</p>
<ul>
<li><code>dtype</code>：数据类型 &gt;&gt;&gt; 指定了数组中每个元素占用多少个字节，这几个字节怎么解释（例如：<code>int32</code>、<code>float32</code> 等 NumPy 数据类型）；</li>
<li><code>ndim</code>（dim count）：数组维度（数值） &gt;&gt;&gt; 数组有多少维；</li>
<li><code>shape</code>（dimensions）：数组形状（元组） &gt;&gt;&gt; 每个维度上的元素数量；</li>
<li><code>strides</code>：维间距或步幅（元组） &gt;&gt;&gt; 到达当前维下一个相邻数据需要前进的字节数；</li>
<li><code>data</code>：数组所对应的元素序列（数据） &gt;&gt;&gt; 存放于连续的 Memory Block 中。</li>
</ul>
<p>篇幅原因，关于 ndarray 对象的更进一步说明，可参见 &gt;&gt;&gt;&gt; 【<a href="https://www.orangeshare.cn/2018/01/20/yi-wen-jie-xi-numpy-ndarray-duo-wei-shu-zu-jie-gou-she-ji/">一文解析 NumPy ndarray 多维数组结构设计</a>】。</p>
<hr>
<p>在创建 ndarray 多维数组之前，需要先了解一下数组中元素数值的数据类型支持，才能更合理、高效的创建和使用 NumPy 数组：</p>
<h3 id="NumPy-数据类型支持"><a href="#NumPy-数据类型支持" class="headerlink" title="NumPy 数据类型支持"></a>NumPy 数据类型支持</h3><p>作为专门的数值计算库，NumPy 支持比 Python 更加丰富的数值类型（Number）：</p>
<table>
<thead>
<tr>
<th>Num</th>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>bool_</td>
<td>布尔型数据类型（True 或者 False），1 字节</td>
</tr>
<tr>
<td>2</td>
<td>int_</td>
<td>默认整数类型，类似于 C 语言中的 long，取值为 int32 或 int64</td>
</tr>
<tr>
<td>3</td>
<td>intc</td>
<td>和 C 语言的 int 类型一样，一般是 int32 或 int 64</td>
</tr>
<tr>
<td>4</td>
<td>intp</td>
<td>用于索引的整数类型（类似于 C 的 ssize_t，通常为 int32 或 int64）</td>
</tr>
<tr>
<td>5</td>
<td>int8</td>
<td>代表 1 字节（8bit）整数（-128 ~ 127）</td>
</tr>
<tr>
<td>6</td>
<td>int16</td>
<td>代表 2 字节（16it）的整数 （-32768 ~ 32767）</td>
</tr>
<tr>
<td>7</td>
<td>int32</td>
<td>代表 4 字节（32bit）整数（-2147483648 ~ 2147483647）</td>
</tr>
<tr>
<td>8</td>
<td>int64</td>
<td>代表 8 字节（64bit）整数（-9223372036854775808 ~ 9223372036854775807）</td>
</tr>
<tr>
<td>9</td>
<td>uint8</td>
<td>代表 1 字节（8bit）无符号整数（0 ~ 255）</td>
</tr>
<tr>
<td>10</td>
<td>uint16</td>
<td>代表 2 字节（16it）无符号整数（0 ~ 65535）</td>
</tr>
<tr>
<td>11</td>
<td>uint32</td>
<td>代表 4 字节（32it）无符号整数（0 ~ 4294967295）</td>
</tr>
<tr>
<td>12</td>
<td>uint64</td>
<td>代表 8 字节（64it）无符号整数（0 ~ 18446744073709551615）</td>
</tr>
<tr>
<td>13</td>
<td>float_</td>
<td>float64 类型简写</td>
</tr>
<tr>
<td>14</td>
<td>float16</td>
<td>半精度浮点数，包括：1 个符号位，5 个指数位，10 个尾数位</td>
</tr>
<tr>
<td>15</td>
<td>float32</td>
<td>单精度浮点数，包括：1 个符号位，8 个指数位，23 个尾数位</td>
</tr>
<tr>
<td>16</td>
<td>float64</td>
<td>双精度浮点数，包括：1 个符号位，11 个指数位，52 个尾数位</td>
</tr>
<tr>
<td>17</td>
<td>complex_</td>
<td>complex128 类型简写</td>
</tr>
<tr>
<td>18</td>
<td>complex64</td>
<td>表示实部和虚部共享 32 位的复数</td>
</tr>
<tr>
<td>19</td>
<td>complex128</td>
<td>表示实部和虚部共享 64 位的复数</td>
</tr>
<tr>
<td>19</td>
<td>str_</td>
<td>字符串类型</td>
</tr>
<tr>
<td>20</td>
<td>string_</td>
<td>字节串类型</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h4 id="dtype-Object"><a href="#dtype-Object" class="headerlink" title="dtype Object"></a>dtype Object</h4><p>事实上，上述所有的数据类型，均属于 <strong>NumPy 数据类型对象</strong>（Data Type Object）的实例，也称为  <strong>dtype Object</strong> 实例。</p>
<p><code>dtype</code> 对象主要用来描述数组中元素的数据类型（整型、浮点或者 Python 对象）、数据大小（占用多少字节），以及字节顺序等。可以为 ndarray 数组中元素数值指定数据类型。其构建语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.dtype(<span class="built_in">object</span>)</span><br></pre></td></tr></table></figure>

<p>来看一个实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入 NumPy 模块：</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构建一个 dtype 对象：</span></span><br><span class="line">dt= np.dtype(np.int64)  <span class="comment"># 或 dt= np.dtype(&#x27;int64&#x27;)</span></span><br><span class="line">print(dt)  <span class="comment"># 输出：dtype(&#x27;int64&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 为一个 ndarray 对象指定数据类型（np.array 函数使用可参见后文）：</span></span><br><span class="line">a = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=dt)  <span class="comment"># np.array 函数的 dtype 参数可用于指定创建数组时的数据类型</span></span><br><span class="line">print(a)  <span class="comment"># 输出：array([1, 2, 3], dtype=int64)</span></span><br></pre></td></tr></table></figure>

<p><font color="red">↓↓↓↓↓↓ 如何检查 ndarray 数组的数据类型 ↓↓↓↓↓↓</font></p>
<p>NumPy 数组对象（ndarray）提供有一个名为 <code>dtype</code> 的属性，可返回 ndarray 数组的数据类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=np.int64)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用于查看数组中元素的数据类型</span></span><br><span class="line">print(a.dtype)  <span class="comment"># 输出：dtype(&#x27;int64&#x27;)</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="数据类型字符标识"><a href="#数据类型字符标识" class="headerlink" title="数据类型字符标识"></a>数据类型字符标识</h4><p>Numpy 中数据类型都提供有一个唯一对应的 &gt;&gt;&gt;&gt; <strong>字符标识码</strong>，码表如下：</p>
<table>
<thead>
<tr>
<th>字符</th>
<th>对应类型</th>
</tr>
</thead>
<tbody><tr>
<td>b</td>
<td>代表布尔型</td>
</tr>
<tr>
<td>i</td>
<td>代表符号整型</td>
</tr>
<tr>
<td>u</td>
<td>代表无符号整型</td>
</tr>
<tr>
<td>f</td>
<td>代表浮点型</td>
</tr>
<tr>
<td>c</td>
<td>代表复数浮点型</td>
</tr>
<tr>
<td>m</td>
<td>代表时间间隔（timedelta）</td>
</tr>
<tr>
<td>M</td>
<td>代表日期时间（datatime）</td>
</tr>
<tr>
<td>O</td>
<td>代表 Python 对象</td>
</tr>
<tr>
<td>S,a</td>
<td>代表字节串</td>
</tr>
<tr>
<td>U</td>
<td>代表 Unicode 字符串</td>
</tr>
<tr>
<td>V</td>
<td>原始数据（void）</td>
</tr>
</tbody></table>
<p>使用数据类型对应的字符标识码（<strong>字符标识码 + 字节数</strong>），可以更快捷地创建 dtype Object。如下（以 Int 为例，其它类似）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等价于 dt = np.dtype(np.int32)</span></span><br><span class="line">dt = np.dtype(<span class="string">&#x27;i4&#x27;</span>)</span><br><span class="line"><span class="comment"># 甚至等价于 dt = np.dtype(&#x27;int32&#x27;)</span></span><br><span class="line">print(dt)</span><br><span class="line"><span class="comment"># 输出：dtype(&#x27;int32&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 等价于 dt = np.dtype(np.int64)</span></span><br><span class="line">dt = np.dtype(<span class="string">&#x27;i8&#x27;</span>)</span><br><span class="line"><span class="comment"># 甚至等价于 dt = np.dtype(&#x27;int64&#x27;)</span></span><br><span class="line">print(dt)</span><br><span class="line"><span class="comment"># 输出：dtype(&#x27;int64&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 等价于 dt = np.dtype(np.float32)</span></span><br><span class="line">dt = np.dtype(<span class="string">&#x27;f4&#x27;</span>)</span><br><span class="line"><span class="comment"># 甚至等价于 dt = np.dtype(&#x27;float32&#x27;)</span></span><br><span class="line">print(dt)</span><br><span class="line"><span class="comment"># 输出：dtype(&#x27;float32&#x27;)</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="结构化数据类型"><a href="#结构化数据类型" class="headerlink" title="结构化数据类型"></a>结构化数据类型</h4><p>先来看一个样例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 NumPy 内置数据类型 np.int64 创建 ndarray 数组：</span></span><br><span class="line">a = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=np.int64)</span><br><span class="line">print(a.dtype)  <span class="comment"># 输出：dtype(&#x27;int64&#x27;)</span></span><br><span class="line"></span><br><span class="line">b = np.array([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], dtype=<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">print(b.dtype)  <span class="comment"># 输出：dtype(&#x27;float32&#x27;)</span></span><br><span class="line"></span><br><span class="line">c = np.array([<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>], dtype=<span class="string">&#x27;u2&#x27;</span>)</span><br><span class="line">print(c.dtype)  <span class="comment"># 输出：dtype(&#x27;uint16&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>最开始的实例中，我们使用 <code>numpy.dtype</code> 对象来为 <code>ndarray</code> 数组指定数据类型。而本节样例中发现可以使用更便捷的方式指定数组中元素的数据类型。</p>
<p>那么，这里产生一个问题 &gt;&gt;&gt;&gt; 使用 dtype 对象会使得 <code>ndarray</code> 数组的创建复杂度进一步提高。</p>
<p>事实上，我们更多的使用 dtype 对象在 <strong>定义结构化数据类型</strong> 的场景。</p>
<p>通过情况下，<font color="green"> 结构化数据使用字段的形式来描述某个对象的特征</font>。例如描述一位老师的姓名、年龄、工资的特征，该结构化数据（老师）其包含以下字段：</p>
<ul>
<li>name：string 字段</li>
<li>age：int 字段</li>
<li>salary：float 字段</li>
</ul>
<p>那么，如何基于 dtype 对象 来定义上述结构化数据类型？！！如下（<strong>字段名 + 字段数据类型</strong>）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构造结构化数据类型 teacher：</span></span><br><span class="line">teacher = np.dtype([(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;S20&#x27;</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;i1&#x27;</span>), (<span class="string">&#x27;salary&#x27;</span>, <span class="string">&#x27;f4&#x27;</span>)])</span><br><span class="line"><span class="comment"># teacher = np.dtype([(&#x27;name&#x27;, &#x27;a20&#x27;), (&#x27;age&#x27;, &#x27;i1&#x27;), (&#x27;salary&#x27;, &#x27;f4&#x27;)])</span></span><br><span class="line">print(teacher)</span><br><span class="line"><span class="comment"># 输出：[(&#x27;name&#x27;, &#x27;S20&#x27;), (&#x27;age&#x27;, &#x27;i1&#x27;), (&#x27;salary&#x27;, &#x27;&lt;f4&#x27;)]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 应用于 ndarray 数组对象：</span></span><br><span class="line">b = np.array([(<span class="string">&#x27;ycs&#x27;</span>, <span class="number">32</span>, <span class="number">6357.50</span>),(<span class="string">&#x27;jxe&#x27;</span>, <span class="number">28</span>, <span class="number">6856.80</span>)], dtype = teacher)</span><br><span class="line">print(b)</span><br><span class="line"><span class="comment"># 输出：[(b&#x27;ycs&#x27;, 32, 6357.5) (b&#x27;jxe&#x27;, 28, 6856.8)]</span></span><br><span class="line">print(b.dtype)</span><br><span class="line"><span class="comment"># 输出：dtype([(&#x27;name&#x27;, &#x27;S20&#x27;), (&#x27;age&#x27;, &#x27;i1&#x27;), (&#x27;salary&#x27;, &#x27;&lt;f4&#x27;)])</span></span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓↓ 使用字段名获取数组中所有元素当前字段值列表 ↓↓↓↓↓↓↓ </font></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">dt = np.dtype([(<span class="string">&#x27;score&#x27;</span>,<span class="string">&#x27;i1&#x27;</span>)])</span><br><span class="line">print(dt)</span><br><span class="line"><span class="comment"># 输出：[(&#x27;score&#x27;, &#x27;i1&#x27;)]</span></span><br><span class="line"></span><br><span class="line">a = np.array([(<span class="number">60</span>,), (<span class="number">75</span>), (<span class="number">90</span>)], dtype=dt)</span><br><span class="line">print(a)</span><br><span class="line"><span class="comment"># 输出：[(60,) (75,) (90,)]</span></span><br><span class="line">print(a.dtype)</span><br><span class="line"><span class="comment"># 输出：[(&#x27;score&#x27;, &#x27;i1&#x27;)]</span></span><br><span class="line">print(a[<span class="string">&#x27;score&#x27;</span>])</span><br><span class="line"><span class="comment"># 输出：[60 75 90]</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="数据类型转换"><a href="#数据类型转换" class="headerlink" title="数据类型转换"></a>数据类型转换</h4><p>ndarray 数组对象提供了一个 astype 函数，用于创建数组副本，并将参数指定为数组副本的数据类型。</p>
<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr = np.array([<span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>])</span><br><span class="line">print(arr.dtype)</span><br><span class="line"><span class="comment"># float64</span></span><br><span class="line"></span><br><span class="line">newarr = arr.astype(<span class="string">&#x27;i&#x27;</span>)</span><br><span class="line">print(newarr)</span><br><span class="line"><span class="comment"># [1 2 3]</span></span><br><span class="line">print(newarr.dtype)</span><br><span class="line"><span class="comment"># int32</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 其它形式：</span></span><br><span class="line">newarr = arr.astype(np.int8)</span><br><span class="line">print(newarr.dtype)</span><br><span class="line"><span class="comment"># int8</span></span><br><span class="line">newarr = arr.astype(np.dtype(<span class="string">&#x27;int16&#x27;</span>))</span><br><span class="line">print(newarr.dtype)</span><br><span class="line">int16</span><br></pre></td></tr></table></figure>

<p>如果数组（列表、元组）中元素存在的字符串均为数值型字符串，是可以使用数值类型进行 ndarray 对象创建的，并且可以进行数值类型转化。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">arr_a = np.array([<span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>, <span class="string">&#x27;5&#x27;</span>], dtype=<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line"></span><br><span class="line">print(arr_a)</span><br><span class="line"><span class="comment"># [1.1 2.2 3.3 5. ]</span></span><br><span class="line">print(arr_a.dtype)</span><br><span class="line"><span class="comment"># float32</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ValueError: arr_a = np.array([1.1, 2.2, 3.3, &#x27;a&#x27;], dtype=&#x27;float32&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>需要注意的是 &gt;&gt;&gt; 当占用字节较多的数据（int32）类型转化为较少字节数据（int8）类型时，如果数值超过小字节数据类型时，会被截断。</p>
<hr>
<p>👇👇👇 <strong>关于 dtype Object 字节序</strong> 👇👇👇</p>
<p>字节顺序取决于数据类型的前缀是 <code>&lt;</code> 还是 <code>&gt;</code>。其中（看开口）：</p>
<ul>
<li><p><code>&lt;</code> : 小端序(Small-Endian)：低地址存放低字节，高地址存放高字节；</p>
</li>
<li><p><code>&gt;</code> : 大端序(Big-Endian)：高地址存放低字节，低地址存放高字节.</p>
</li>
</ul>
<p>来看一个实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=<span class="string">&#x27;&gt;f4&#x27;</span>)</span><br><span class="line">print(a)</span><br><span class="line"><span class="comment"># [1. 2. 3.]</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a.dtype)</span><br><span class="line"><span class="comment"># &gt;f4</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Ndarray-数组创建"><a href="#Ndarray-数组创建" class="headerlink" title="Ndarray 数组创建"></a>Ndarray 数组创建</h3><p>NumPy 中创建 ndarray 类型的方法主要有五类（常用高亮）：</p>
<ul>
<li><strong>从 Python 数组结构列表，元组等转换</strong>；</li>
<li><strong>使用 NumPy 原生方法</strong>，例如：<code>numpy.empty</code> &amp;&amp; <code>np.ones</code> &amp;&amp; <code>np.zeros</code> &amp;&amp; <code>np.arange</code> 等；</li>
<li>从存储空间读取数组，例如文本或二进制文件；</li>
<li>使用字符串或缓冲区从原始字节中创建；</li>
<li>使用特殊函数，如 random。</li>
</ul>
<p>下面分别来看这些常用的创建方法：</p>
<hr>
<h4 id="使用-Python-内置类型构建"><a href="#使用-Python-内置类型构建" class="headerlink" title="使用 Python 内置类型构建"></a>使用 Python 内置类型构建</h4><p>NumPy 中提供了一个 <code>numpy.array</code> 函数，可以将列表（List）或元组（Tuple）转化为 <code>ndarray</code> 数组。其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.array(<span class="built_in">object</span>, dtype=<span class="literal">None</span>, copy=<span class="literal">True</span>, order=<span class="literal">None</span>, subok=<span class="literal">False</span>, ndmin=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>其中，参数（常用高亮）：</p>
<ul>
<li><strong>object</strong>：列表、元组、矩阵；</li>
<li><strong>dtype</strong>：数组元素的数据类型（如果没有给出，将被确定为保持序列中的对象所需的最小类型）；</li>
<li><strong>ndmin</strong>：生成的数组应具有的最小维数，可根据需要预先设置维度；</li>
<li><code>order</code>：数组的内存布局，常见为 <code>C-Order</code>（行优先） &amp;&amp; <code>Fortran-Order</code>（列优先）；默认为 <code>K</code>，以尽可能接近数组元素在内存中出现的顺序；</li>
<li><code>copy</code>：布尔类型，默认 True，表示复制对象；否则，只有当 <code>__array__</code> 返回副本，obj 是嵌套序列，或者需要副本来满足任何其他要求（dtype，顺序等）时，才会进行复制；</li>
<li><code>subok</code>：布尔类型，表示子类是否被传递，True 为（传递）；否则不传递，返回的数组将被强制为基类数组（默认）。</li>
</ul>
<p>实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一维数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 二维数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array([(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)])</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 最小维度为 2：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], ndmin=<span class="number">2</span>)</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定类型：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=np.float32)</span><br><span class="line">array([<span class="number">1.</span>, <span class="number">2.</span>, <span class="number">3.</span>], dtype=float32)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 结构化类型数据：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array([(<span class="number">1</span>, <span class="number">2</span>), (<span class="number">3</span>, <span class="number">4</span>)], dtype=np.dtype([(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;i1&#x27;</span>), (<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;i4&#x27;</span>)]))</span><br><span class="line">array([(<span class="number">1</span>, <span class="number">2</span>), (<span class="number">3</span>, <span class="number">4</span>)], dtype=[(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;i1&#x27;</span>), (<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array([(<span class="number">5</span>, <span class="number">6</span>), (<span class="number">7</span>, <span class="number">8</span>)], dtype=[(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;i1&#x27;</span>), (<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;i4&#x27;</span>)])</span><br><span class="line">array([(<span class="number">5</span>, <span class="number">6</span>), (<span class="number">7</span>, <span class="number">8</span>)], dtype=[(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;i1&#x27;</span>), (<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>)])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从子类创建数组（是否传递子类）：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array(np.mat(<span class="string">&#x27;1 2; 3 4&#x27;</span>))</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array(np.mat(<span class="string">&#x27;1 2; 3 4&#x27;</span>), subok=<span class="literal">True</span>)</span><br><span class="line">matrix([[<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">        [<span class="number">3</span>, <span class="number">4</span>]])</span><br></pre></td></tr></table></figure>

<p>| ============================================== <strong>numpy.asarray</strong> ============================================== |</p>
<p>类似于 numpy.array，<code>numpy.asarray</code> 函数，也是将列表（List）或元组（Tuple）等序列转化为 <code>ndarray</code> 数组.</p>
<p>但其使用更为简单。语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.asarray(sequence，dtype=<span class="literal">None</span>，order=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>其中，参数：</p>
<ul>
<li><code>sequence</code>：列表、元组、嵌套列表或元组；</li>
<li><code>dtype</code>：数组元素的数据类型；</li>
<li><code>order</code>：数组的内存布局，参上。</li>
</ul>
<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># Use List：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.asarray(list1)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(arr)</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">numpy</span>.<span class="title">ndarray</span>&#x27;&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">arr</span></span></span><br><span class="line"><span class="class"><span class="title">array</span>(<span class="params">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"># <span class="title">Use</span> <span class="title">Tuple</span>：</span></span><br><span class="line">&gt;&gt;&gt; tuple1 = (6, 7, 8, 9, 0)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.asarray(tuple1)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(arr)</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">numpy</span>.<span class="title">ndarray</span>&#x27;&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">arr</span></span></span><br><span class="line"><span class="class"><span class="title">array</span>(<span class="params">[<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">0</span>]</span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"></span></span><br><span class="line">&gt;&gt;&gt; list_tp = [(1, 2), (3, 4), (5, 6)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.asarray(list_tp)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(arr)</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">numpy</span>.<span class="title">ndarray</span>&#x27;&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">arr</span></span></span><br><span class="line"><span class="class"><span class="title">array</span>(<span class="params">[[<span class="number">1</span>, <span class="number">2</span>],</span></span></span><br><span class="line"><span class="class"><span class="params">       [<span class="number">3</span>, <span class="number">4</span>],</span></span></span><br><span class="line"><span class="class"><span class="params">       [<span class="number">5</span>, <span class="number">6</span>]]</span>)</span></span><br></pre></td></tr></table></figure>

<p>👇👇👇 <strong>其它 as 方法</strong> 👇👇👇</p>
<p>NumPy 中还提供有其它以 as 开头的构建方法，可以将特定输入转化为数组、矩阵、标量等：</p>
<ul>
<li><code>asanyarray(a，dtype，order)</code>：将特定输入转换为 ndarray；</li>
<li><code>asfarray(a，dtype)</code>：将特定输入转换为 float 类型的数组；</li>
<li><code>asarray_chkfinite(a，dtype，order)</code>：将特定输入转换为数组，并检查元素 NaN 或 infs；</li>
<li><code>asmatrix(data，dtype)</code>：将特定输入转换为矩阵；</li>
<li><code>asscalar(a)</code>：将大小为 1 的数组转换为标量。</li>
</ul>
<hr>
<h4 id="使用-Numpy-原生方法构建"><a href="#使用-Numpy-原生方法构建" class="headerlink" title="使用 Numpy 原生方法构建"></a>使用 Numpy 原生方法构建</h4><p>根据生成数组中的元素是否有规律，将要介绍的原生方法分为三类：</p>
<ol>
<li>通用数组：<code>numpy.zeros &amp;&amp; numpy.ones &amp;&amp; numpy.full &amp;&amp; numpy.empty</code>；</li>
<li>特殊数组：<code>numpy.eye</code>；</li>
<li>区间数组：<code>numpy.arange &amp;&amp; numpy.linspace &amp;&amp; numpy.logspace</code>。</li>
</ol>
<p><strong>1 &gt;&gt;&gt;&gt; 通用数组构建</strong></p>
<p><font color="red"> ↓↓↓↓↓↓ 1.numpy.zeros ↓↓↓↓↓↓ </font></p>
<p><code>numpy.zeros</code> 函数用于 <strong>快速创建数值全部为 0 的多维数组</strong>（可同时指定数组的形状和类型），其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.ones(shape, dtype=<span class="built_in">float</span>, order=<span class="string">&#x27;C&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>其中，shape 是指数组的形状，即每一维度上的元素数量。默认类型为 <code>float64</code>，其它参数见上文说明。</p>
<p>实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.zeros((<span class="number">3</span>, <span class="number">2</span>))</span><br><span class="line"><span class="comment"># 默认类型为：`float64`</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.dtype</span><br><span class="line">dtype(<span class="string">&#x27;float64&#x27;</span>)</span><br><span class="line"><span class="comment"># 数组中元素值被初始化为：0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[<span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以使用自定义的数据类型构建：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.zeros((<span class="number">3</span>, <span class="number">2</span>), dtype=[(<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;i1&#x27;</span>), (<span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;i1&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[(<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">0</span>)],</span><br><span class="line">       [(<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">0</span>)],</span><br><span class="line">       [(<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">0</span>)]], dtype=[(<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;i1&#x27;</span>), (<span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;i1&#x27;</span>)])</span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 2.numpy.ones ↓↓↓↓↓↓ </font></p>
<p><code>numpy.ones</code> 函数和 <code>numpy.zeros</code>非常相似，唯一区别在于数组元素的初始值为 <code>1</code>，其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.ones(shape, dtype=<span class="built_in">float</span>, order=<span class="string">&#x27;C&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>参数说明见上文，实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.ones((<span class="number">3</span>, <span class="number">2</span>))</span><br><span class="line"><span class="comment"># 默认类型为：`float64`</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.dtype</span><br><span class="line">dtype(<span class="string">&#x27;float64&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[<span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以使用自定义的数据类型构建：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.ones((<span class="number">2</span>, <span class="number">2</span>), dtype=[(<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;i1&#x27;</span>), (<span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;i1&#x27;</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[(<span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">1</span>)],</span><br><span class="line">       [(<span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">1</span>)]], dtype=[(<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;i1&#x27;</span>), (<span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;i1&#x27;</span>)])</span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 3.numpy.full ↓↓↓↓↓↓ </font></p>
<p>类似于 <code>numpy.ones &amp;&amp; numpy.zeros</code>，可用于 <strong>快速创建数值全部为 某固定值（fill_value）的多维数组</strong>（可同时指定数组的形状和类型），其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.full(shape, fill_value, dtype=<span class="literal">None</span>, order=<span class="string">&#x27;C&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>参数说明见上文，实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.full((<span class="number">3</span>, <span class="number">2</span>), <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[<span class="number">2</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">2</span>]])</span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 4.numpy.empty ↓↓↓↓↓↓ </font></p>
<p>类似于 <code>numpy.ones &amp;&amp; numpy.zeros</code>，区别是 &gt;&gt;&gt; 不会初始化数组中元素（垃圾值，无意义），它要求用户人为地给数组中的每一个元素赋值（谨慎使用）。</p>
<p>其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.empty(shape, dtype=<span class="built_in">float</span>, order=<span class="string">&#x27;C&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>参数说明见上文，实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.empty((<span class="number">2</span>, <span class="number">2</span>))</span><br><span class="line"><span class="comment"># 默认类型为：`float64`</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.dtype</span><br><span class="line">dtype(<span class="string">&#x27;float64&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[<span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定数据类型：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.empty((<span class="number">2</span>, <span class="number">2</span>), dtype=<span class="built_in">int</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[-<span class="number">1036147843</span>,  -<span class="number">454467914</span>],</span><br><span class="line">       [  <span class="number">740955874</span>,    <span class="number">58203889</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定类型为 Python 对象时，元素为 None</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.empty((<span class="number">2</span>, <span class="number">2</span>), dtype=<span class="built_in">list</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[<span class="literal">None</span>, <span class="literal">None</span>],</span><br><span class="line">       [<span class="literal">None</span>, <span class="literal">None</span>]], dtype=<span class="built_in">object</span>)</span><br></pre></td></tr></table></figure>

<p>| =============================================== <strong>Split Line</strong> ================================================= |</p>
<p><strong>2 &gt;&gt;&gt;&gt; 特殊数组构建</strong></p>
<p><font color="red"> ↓↓↓↓↓↓ 1.numpy.eye ↓↓↓↓↓↓ </font></p>
<p><code>numpy.eye</code> 可用于创建一个特殊的二维数组，特点是 &gt;&gt;&gt; <code>k</code> 对角线上的值为 <code>1</code>，其余值全部为 <code>0</code> &lt;&lt;&lt; <strong>可理解为单位矩阵</strong>。</p>
<p>其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.eye(N, M=<span class="literal">None</span>, k=<span class="number">0</span>, dtype=&lt;<span class="built_in">type</span> <span class="string">&#x27;float&#x27;</span>&gt;, order=<span class="string">&#x27;C&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>其中，参数：<code>N</code> 构造数组的行数；<code>M</code> 是构造数组的列数；而 <code>k</code> 是指主对角线上的值（默认为 1）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.eye(<span class="number">4</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[<span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>]])</span><br></pre></td></tr></table></figure>

<p>| =============================================== <strong>Split Line</strong> ================================================= |</p>
<p><strong>3 &gt;&gt;&gt;&gt; 区间数组构建</strong></p>
<p>所谓的区间数组，是指 &gt;&gt;&gt;&gt; 数组元素的取值位于某个范围内，从而呈现一定的规律。 &lt;&lt;&lt;&lt; 例如：等比数列、递增、递减等。</p>
<p><font color="red"> ↓↓↓↓↓↓ 1.numpy.arange ↓↓↓↓↓↓ </font></p>
<p><code>numpy.arange</code> 函数的功能是 &gt;&gt;&gt; <strong>按照步幅，在给定区间内创建一系列均匀间隔的值（前闭后开的）的 一维 等差数组</strong>。其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.arange(start, stop, step, dtype=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>其中，参数：<code>start</code> &amp;&amp; <code>stop</code> 表示元素区间取值范围（前闭后开 &gt;&gt;&gt; [start, stop)）；<code>step</code> 表示步长，值间隔。</p>
<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">8</span>)</span><br><span class="line"><span class="comment"># 默认数组类型是：int32</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.dtype</span><br><span class="line">dtype(<span class="string">&#x27;int32&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line"><span class="comment"># 默认起始范围从 0 开始</span></span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">1</span>, <span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>])</span><br><span class="line"><span class="comment"># 指定数组类型：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">1</span>, <span class="number">10</span>, <span class="number">2</span>, np.float32)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([<span class="number">1.</span>, <span class="number">3.</span>, <span class="number">5.</span>, <span class="number">7.</span>, <span class="number">9.</span>], dtype=float32)</span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 2.numpy.linspace ↓↓↓↓↓↓ </font></p>
<p><code>numpy.linspace</code> 函数的功能是 &gt;&gt;&gt; <strong>按照分隔份数，返回均匀间隔的 一维 线性等分数组（等差）</strong>，默认分隔为 50 份。语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.linspace(start, stop, num=<span class="number">50</span>, endpoint=<span class="literal">True</span>, retstep=<span class="literal">False</span>, dtype=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>其中，参数：</p>
<ul>
<li><code>start</code> &amp;&amp; <code>stop</code> 用于表示元素区间取值范围起始；</li>
<li><code>num</code> 表示要生成的元素数量（份数）；</li>
<li><code>endpoint</code>：表示数列是否包含 stop 终止值（后闭？），默认为 True；</li>
<li><code>retstep</code>：表示生成的数组中是否显示公差项，默认为 False。</li>
</ul>
<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成包含 10 个元素的一维等差数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.linspace(<span class="number">1</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([ <span class="number">1.</span>,  <span class="number">2.</span>,  <span class="number">3.</span>,  <span class="number">4.</span>,  <span class="number">5.</span>,  <span class="number">6.</span>,  <span class="number">7.</span>,  <span class="number">8.</span>,  <span class="number">9.</span>, <span class="number">10.</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置后开：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.linspace(<span class="number">1</span>, <span class="number">10</span>, <span class="number">10</span>, endpoint=<span class="literal">False</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([<span class="number">1.</span> , <span class="number">1.9</span>, <span class="number">2.8</span>, <span class="number">3.7</span>, <span class="number">4.6</span>, <span class="number">5.5</span>, <span class="number">6.4</span>, <span class="number">7.3</span>, <span class="number">8.2</span>, <span class="number">9.1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置显示公差：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.linspace(<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, retstep=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">(array([<span class="number">1.</span>  , <span class="number">1.25</span>, <span class="number">1.5</span> , <span class="number">1.75</span>, <span class="number">2.</span>  ]), <span class="number">0.25</span>)</span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 3.numpy.logspace ↓↓↓↓↓↓ </font></p>
<p>类似于 numpy.linspace，<code>numpy.logspace</code> 函数的功能是 &gt;&gt;&gt; <strong>按照分隔份数，返回 一维 对数等分数组（等比）</strong>，默认分隔为 50 份。语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.logspace(start, stop, num=<span class="number">50</span>, endpoint=<span class="literal">True</span>, base=<span class="number">10.0</span>, dtype=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>其中，参数：</p>
<ul>
<li><code>start</code> &amp;&amp; <code>stop</code> 用于表示元素区间取值范围起始；</li>
<li><code>num</code> 表示要生成的元素数量（份数）；</li>
<li><code>endpoint</code>：表示数列是否包含 stop 终止值（后闭？），默认为 True；</li>
<li><code>base</code>：设置 log 底值（公比），默认以 10 为底。</li>
</ul>
<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成包含 10 个元素的等比一维数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.logspace(<span class="number">1.0</span>, <span class="number">2.0</span>, num=<span class="number">10</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([ <span class="number">10.</span>        ,  <span class="number">12.91549665</span>,  <span class="number">16.68100537</span>,  <span class="number">21.5443469</span> ,</span><br><span class="line">        <span class="number">27.82559402</span>,  <span class="number">35.93813664</span>,  <span class="number">46.41588834</span>,  <span class="number">59.94842503</span>,</span><br><span class="line">        <span class="number">77.42636827</span>, <span class="number">100.</span>        ])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成包含 10 个元素的，公比为 2 的一维等比数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.logspace(<span class="number">1</span>, <span class="number">10</span>, num=<span class="number">10</span>, base=<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([   <span class="number">2.</span>,    <span class="number">4.</span>,    <span class="number">8.</span>,   <span class="number">16.</span>,   <span class="number">32.</span>,   <span class="number">64.</span>,  <span class="number">128.</span>,  <span class="number">256.</span>,  <span class="number">512.</span>,</span><br><span class="line">       <span class="number">1024.</span>])</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="使用其它方法构建"><a href="#使用其它方法构建" class="headerlink" title="使用其它方法构建"></a>使用其它方法构建</h4><p>NumPy 中还支持从字符串或缓冲区、文件以及函数中创建 <code>ndarray</code> 数组：</p>
<ul>
<li><code>fromstring(string, dtype, count, sep)</code> &gt;&gt;&gt; 从字符串中创建 <code>1</code> 维数组；</li>
<li><code>frombuffer(buffer)</code> &gt;&gt;&gt; 将缓冲区转换为 <code>1</code> 维数组；</li>
<li><code>fromiter(iterable, dtype, count)</code> &gt;&gt;&gt; 从可迭代对象创建 <code>1</code> 维数组；</li>
<li><code>fromfunction(function, shape)</code> &gt;&gt;&gt; 通过函数返回值来创建多维数组；</li>
<li><code>fromfile(file, dtype, count, sep)</code> &gt;&gt;&gt; 从文本或二进制文件中构建多维数组。</li>
</ul>
<hr>
<h3 id="Ndarray-数组属性"><a href="#Ndarray-数组属性" class="headerlink" title="Ndarray 数组属性"></a>Ndarray 数组属性</h3><p>了解了 ndarray 数组的数据类型支持以及常用构建方法之后，我们需要重新认识一下 <code>ndarray</code> 数组的常用属性。</p>
<p>开始前，首先构建一个二维 <code>ndarray</code> 数组，以便查看其属性：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">       [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 数组元素数据类型 ↓↓↓↓↓↓ </font></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.dtype</span><br><span class="line">dtype(<span class="string">&#x27;int32&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 数组元素的实虚部 ↓↓↓↓↓↓ </font></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 实部</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.real</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">       [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 虚部</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.imag</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]])</span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 数组元素总数 ↓↓↓↓↓↓ </font></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.size</span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 数组每个元素所占字节数 ↓↓↓↓↓↓ </font></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.itemsize</span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 数组中元素总字节数 ↓↓↓↓↓↓ </font></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.nbytes</span><br><span class="line"><span class="number">36</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.size * arr.itemsize</span><br><span class="line"><span class="number">36</span></span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 数组维度 ↓↓↓↓↓↓ </font></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.ndim</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 数组的形状 ↓↓↓↓↓↓ </font></p>
<p>数组的形状，是数组各维度上的元素个数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.shape</span><br><span class="line">(<span class="number">3</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 数组的维间距 ↓↓↓↓↓↓ </font></p>
<p>数组的维间距（步幅），到达当前维下一个相邻数据需要前进的字节数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.strides</span><br><span class="line">(<span class="number">12</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 数组的转置 ↓↓↓↓↓↓ </font></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.T</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">4</span>, <span class="number">7</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 同 transpose 函数：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.transpose()</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">4</span>, <span class="number">7</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>]])</span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 数组的内存信息 ↓↓↓↓↓↓ </font></p>
<p>返回 ndarray 数组的内存信息，例如：ndarray 数组的存储方式，以及是否是其他数组的副本等。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x.flags</span><br><span class="line">  C_CONTIGUOUS : <span class="literal">True</span></span><br><span class="line">  F_CONTIGUOUS : <span class="literal">True</span></span><br><span class="line">  OWNDATA : <span class="literal">True</span></span><br><span class="line">  WRITEABLE : <span class="literal">True</span></span><br><span class="line">  ALIGNED : <span class="literal">True</span></span><br><span class="line">  WRITEBACKIFCOPY : <span class="literal">False</span></span><br><span class="line">  UPDATEIFCOPY : <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<p>篇幅原因，关于 ndarray 对象属性的更进一步说明，可参见 &gt;&gt;&gt;&gt; 【<a href="https://www.orangeshare.cn/2018/01/20/yi-wen-jie-xi-numpy-ndarray-duo-wei-shu-zu-jie-gou-she-ji/">一文解析 NumPy ndarray 多维数组结构设计</a>】。</p>
<hr>
<h3 id="Ndarray-数组维度和形状"><a href="#Ndarray-数组维度和形状" class="headerlink" title="Ndarray 数组维度和形状"></a>Ndarray 数组维度和形状</h3><p>NumPy ndarray 数组中非常的重要的两个属性是 &gt;&gt;&gt; 数组的维度（N Dimensions） &amp;&amp; 形状（Shape）。</p>
<p>下面给出 1 至 3 维的 ndarray 数组的视图：</p>
<p><img src="https://s2.loli.net/2023/04/07/I5uxZL2Y6fstXlS.png"></p>
<p>其中，1 维数组可以被看作数学中的向量（行向量/列向量），2 维数组可以看作是矩阵，而 3 维数组则是一个数据立方。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>one_dim_arr = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>one_dim_arr</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>two_dim_arr = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>two_dim_arr</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>three_dim_arr = np.array([[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]], [[<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>three_dim_arr</span><br><span class="line">array([[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">        [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>],</span><br><span class="line">        [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]])</span><br></pre></td></tr></table></figure>

<p>可以发现，对于多维数组（N）的显示结果和与列表（List）相同，每多嵌套一层，就代表多一个维度（凭借此你可以很轻易的判断出某个 ndarray 数组的维度）。</p>
<p>通过 <code>shape</code> 属性查看 NumPy ndarray 数组的形状：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>one_dim_arr.shape, two_dim_arr.shape, three_dim_arr.shape</span><br><span class="line">((<span class="number">4</span>,), (<span class="number">2</span>, <span class="number">3</span>), (<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>

<p>| ========================================= <strong>👇👇👇 数组重塑 👇👇👇</strong> =========================================== |</p>
<p>和类型一样，ndarray 数组构建之后，<strong>数组的维度和形状也是可变的</strong> &gt;&gt;&gt; 数组重塑。</p>
<p>通常，我们所说的数组重塑，更多的指的是 &gt;&gt;&gt; <strong>数组形状的变化</strong> &lt;&lt;&lt; 维度可变，但少变（研究特定问题时）。</p>
<p>NumPy 中提供了一个简单的 <code>numpy.ndarray.reshape</code> 函数用于重塑 ndarray 数组的形状，其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">numpy.reshape(array, newShape, order=<span class="string">&#x27;C&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或：</span></span><br><span class="line"><span class="comment"># 同理于 NumPy 中 reshape 方法，但更加方便：</span></span><br><span class="line">numpy.ndarray.reshape(newShape, order=<span class="string">&#x27;C&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Reshape &gt;&gt;&gt; (6, 1) -&gt; (3, 2)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>newarr = arr.reshape(<span class="number">3</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>newarr</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Reshape &gt;&gt;&gt; (6, 1) -&gt; (2, 3)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>newarr = arr.reshape(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>newarr</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br></pre></td></tr></table></figure>

<p>需要注意的是 &gt;&gt;&gt; <strong>修改 ndarray 数组形状的时候， 不能改变数组中元素的个数。</strong>如上面数组的形状是 <code>6 * 1（6）</code>，可以修改成 <code>3 * 2（6）</code> &amp;&amp; <code>2 * 3（6）</code>，修改后仍是 6 个。否则报错：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ValueError: cannot reshape array of size 6 into shape (3,3)</span><br></pre></td></tr></table></figure>

<p>关于数组维度的变化，等后续了解了多维数组轴（axis）之后再进行学习（将会在后续章节进行说明）。</p>
<hr>
<h3 id="Ndarray-数组索引和切片"><a href="#Ndarray-数组索引和切片" class="headerlink" title="Ndarray 数组索引和切片"></a>Ndarray 数组索引和切片</h3><p>NumPy Ndarray 数组完整集成了 Python 对于数组的索引语法 <strong>array[obj]</strong> &gt;&gt;&gt;</p>
<p>并且，随着 <code>obj</code> 的不同，我们可以实现：<strong>元素访问</strong>、<strong>数组切片</strong>，以及其它 <strong>高级索引</strong> 功能。</p>
<h4 id="数组索引"><a href="#数组索引" class="headerlink" title="数组索引"></a>数组索引</h4><p>类似于 Python List 的索引方式，你可以通过索引值（从 <code>0</code> 开始依次）来访问 Ndarray 中的特定位置的单个元素，也可以访问多维数组中的行、列、页。</p>
<p>👇👇👇 <strong>一维数组索引</strong> 👇👇👇</p>
<p>先来构建一个一维数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1 = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br></pre></td></tr></table></figure>

<p>↓↓↓↓↓↓ <strong>Picking an element</strong> ↓↓↓↓↓↓</p>
<p>此时，你可以通过类似于 List &amp;&amp; Tuple 索引的方式，来获取单个元素的值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取第一个元素的值：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1[<span class="number">0</span>]</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="comment"># 获取第三个元素的值：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1[<span class="number">2</span>]</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>| =============================================== <strong>Split Line</strong> ================================================= |</p>
<p>👇👇👇 <strong>二维数组索引</strong> 👇👇👇</p>
<p>先来构建一个二维数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2 = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], </span><br><span class="line">                     [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">                     [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">       [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br></pre></td></tr></table></figure>

<p>↓↓↓↓↓↓ <strong>Picking an element</strong> ↓↓↓↓↓↓</p>
<p>二维数组可以看作一个矩阵（Matrix），矩阵中元素的位置由它所处的行（Row）和列（Column）组成。故，你需要通过索引 <code>(Row, Col)</code> 来获取数组中的单个元素：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取第 3 行，第 2 列对应的值：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2[<span class="number">2</span>, <span class="number">1</span>]</span><br><span class="line"><span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取第 1 行，第 3 列对应的值：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2[<span class="number">0</span>, <span class="number">2</span>]</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>↓↓↓↓↓↓ <strong>Picking a row or column</strong> ↓↓↓↓↓↓</p>
<p>If we can supply a single index, it will pick a row (Row value) ：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 返回第三行元素组成的数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2[<span class="number">2</span>]</span><br><span class="line">array([<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br></pre></td></tr></table></figure>

<p>Numpy allows us to select a single columm as well:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 返回第二列元素组成的数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2[:, <span class="number">1</span>]</span><br><span class="line">array([<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>])</span><br></pre></td></tr></table></figure>

<p>获取列的方法，要使用到切片（<code>:</code> &gt;&gt;&gt; is a full slice, from start to end）。</p>
<p>| =============================================== <strong>Split Line</strong> ================================================= |</p>
<p>👇👇👇 <strong>三维数组索引</strong> 👇👇👇</p>
<p>先来构建一个三维数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr3 = np.array([[[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>], [<span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>], [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>]],</span><br><span class="line">                     [[<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>], [<span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>], [<span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>]], </span><br><span class="line">                     [[<span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>], [<span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>], [<span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr3</span><br><span class="line">array([[[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>],</span><br><span class="line">        [<span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>],</span><br><span class="line">        [<span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>],</span><br><span class="line">        [<span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>],</span><br><span class="line">        [<span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>],</span><br><span class="line">        [<span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>]]])</span><br></pre></td></tr></table></figure>

<p>三维数组，可以看作是由几个矩阵组成的堆（Stack），每一个矩阵均可看作是三维数组的页（Page）。</p>
<p>故数组中元素的位置由它所处的页（Page）、行（Row）和列（Column）组成。故，你需要通过索引 <code>(Page, Row, Col)</code> 来获取数组中的单个元素：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取第 3 页中，矩阵的第 1 行，第 2 列对应的值：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr3[<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line"><span class="number">31</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取第 2 页中，矩阵的第 2 行，第 3 列对应的值：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr3[<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="number">25</span></span><br></pre></td></tr></table></figure>

<p>也就是说，第一个 <code>index</code> 选中某个矩阵，后两个 <code>index</code> 表示从选中的矩阵中确定某个元素。</p>
<p>↓↓↓↓↓↓ <strong>Picking a row or column</strong> ↓↓↓↓↓↓</p>
<p>You can access any row or column in a 3D array. There are 3 cases：</p>
<p><strong>Case 1</strong> - specifying the first two indices. In this case, you are choosing the page value (the matrix), and the row value (the row).</p>
<p><font color="red">This will select a specific row.</font> In this example we are selecting row 2 from matrix 1:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取第 2 页中，矩阵的第 3 行：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr3[<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">array([<span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>])</span><br></pre></td></tr></table></figure>

<p><strong>Case 2</strong> - specifying the page value (the matrix), and the col value (the column), using a full slice (:) for the row value (the row).</p>
<p><font color="red">This will select a specific column.</font> In this example we are selecting column 1 from matrix 0:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取第 1 页中，矩阵的第 2 列：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr3[<span class="number">0</span>, : , <span class="number">1</span>]</span><br><span class="line">array([<span class="number">11</span>, <span class="number">14</span>, <span class="number">17</span>])</span><br></pre></td></tr></table></figure>

<p><strong>Case 3</strong> - specifying the j value (the row), and the k value (the column), using a full slice (:) for the i value (the matrix).</p>
<p><font color="red">This will create a row by taking the same element from each matrix.</font> In this case we are taking row 1, column 2 from each matrix:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取由不同页（Page：1~3）中某位置（第 2 行，第 3 列）处元素组成的数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr3[:, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">array([<span class="number">15</span>, <span class="number">25</span>, <span class="number">35</span>])</span><br></pre></td></tr></table></figure>

<p>↓↓↓↓↓↓ <strong>Picking a matrix</strong> ↓↓↓↓↓↓</p>
<p><strong>Case 1</strong> - If we only specify the page index, numpy will return the <font color="red">corresponding matrix.</font></p>
<p>In this example we will request matrix 2:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取第 3 页的矩阵：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr3[<span class="number">2</span>]</span><br><span class="line">array([[<span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>],</span><br><span class="line">       [<span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>],</span><br><span class="line">       [<span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>]])</span><br></pre></td></tr></table></figure>

<p><strong>Case 2</strong> - if we specify just the row value (using a full slice for the page values)</p>
<p>we will obtain <font color="red">a matrix</font> made from the <font color="red">selected row taken from each plane</font>. In this example we will take row 1:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取由不同页（Page：1~3）中第 2 行元素组成的矩阵：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr3[:, <span class="number">1</span>]</span><br><span class="line">array([[<span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">       [<span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>],</span><br><span class="line">       [<span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>]])</span><br></pre></td></tr></table></figure>

<p><strong>Case 3</strong> - if we specify just the k value (using full slices for the i and j values)</p>
<p>we will obtain <font color="red">a matrix</font> made from the <font color="red">selected column taken from each plane</font>. In this example we will take column 0（取到的元素以行的形式排列）:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取由不同页（Page：1~3）中第 3 列元素组成的矩阵：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr3[:, :, <span class="number">0</span>]</span><br><span class="line">array([[<span class="number">10</span>, <span class="number">13</span>, <span class="number">16</span>],</span><br><span class="line">       [<span class="number">20</span>, <span class="number">23</span>, <span class="number">26</span>],</span><br><span class="line">       [<span class="number">30</span>, <span class="number">33</span>, <span class="number">36</span>]])</span><br></pre></td></tr></table></figure>

<p>对于四维以上的多维数组的索引方式同理，这里就不再介绍。</p>
<hr>
<h4 id="数组切片"><a href="#数组切片" class="headerlink" title="数组切片"></a>数组切片</h4><p>You can slice a numpy array is a similar way to slicing a list - except you can do it in more than one dimension.</p>
<p>👇👇👇 <strong>一维数组切片</strong> 👇👇👇</p>
<p>Slicing a 1D numpy array is almost exactly the <font color="red">same as slicing a list</font>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1 = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切片获取索引为 2 ~ 4 直接的所有元素：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = arr1[<span class="number">1</span>:<span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br></pre></td></tr></table></figure>

<p>The only thing to remember if that (unlike a list) arr1 and b are both looking at the same underlying data (<font color="red">b is a view of the data</font>). So if you change an element in b, arr1 will be affected (and vice versa):</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">1</span>] = <span class="number">10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([ <span class="number">2</span>, <span class="number">10</span>,  <span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1</span><br><span class="line">array([ <span class="number">1</span>,  <span class="number">2</span>, <span class="number">10</span>,  <span class="number">4</span>,  <span class="number">5</span>])</span><br></pre></td></tr></table></figure>

<p>| =============================================== <strong>Split Line</strong> ================================================= |</p>
<p>👇👇👇 <strong>二维数组切片</strong> 👇👇👇</p>
<p>You can slice a 2D array <font color="red">in both axes</font> to obtain a rectangular subset of the original array. For example:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2 = np.array([[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">                     [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>], </span><br><span class="line">                     [<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>], </span><br><span class="line">                     [<span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>, <span class="number">29</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切片获取第 2 行后所有行，且第 3 ~ 4 列的元素组成的数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2[<span class="number">1</span>:, <span class="number">2</span>:<span class="number">4</span>]</span><br><span class="line">array([[<span class="number">17</span>, <span class="number">18</span>],</span><br><span class="line">       [<span class="number">22</span>, <span class="number">23</span>],</span><br><span class="line">       [<span class="number">27</span>, <span class="number">28</span>]])</span><br></pre></td></tr></table></figure>

<p>This selects rows 1: (1 to the end of bottom of the array) and columns 2:4 (columns 2 and 3).</p>
<p>| =============================================== <strong>Split Line</strong> ================================================= |</p>
<p>👇👇👇 <strong>三维数组切片</strong> 👇👇👇</p>
<p>You can slice a 3D array <font color="red">in all 3 axes</font> to obtain a cuboid subset of the original array:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr3 = np.array([[[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>], [<span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>], [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>]],</span><br><span class="line">                     [[<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>], [<span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>], [<span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>]],</span><br><span class="line">                     [[<span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>], [<span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>], [<span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>]]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切片获取 0 ~ 1 页中，第 2 行后所有行，且第 1 ~ 2 列的元素组成的数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr3[:<span class="number">2</span>, <span class="number">1</span>:, :<span class="number">2</span>]</span><br><span class="line">array([[[<span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">17</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">23</span>, <span class="number">24</span>],</span><br><span class="line">        [<span class="number">26</span>, <span class="number">27</span>]]])</span><br></pre></td></tr></table></figure>

<p>This selects: page :2 (the first 2 planes) ；rows 1: (the last 2 rows) ；columns :2 (the first 2 columns).</p>
<hr>
<h4 id="数组高级索引"><a href="#数组高级索引" class="headerlink" title="数组高级索引"></a>数组高级索引</h4><p>NumPy 中还提供了使用高级索引方式：整数数组索引、布尔索引，以及花式索引。</p>
<p>需要注意的是 &gt;&gt;&gt; <font color="green"> 高级索引返回的是数组的副本（深拷贝），而切片操作返回的是数组视图（浅拷贝）！！！</font>副本和视图的概念可参考【<a href="https://www.orangeshare.cn/2018/01/20/yi-wen-jie-xi-numpy-ndarray-duo-wei-shu-zu-jie-gou-she-ji/">一文解析 NumPy ndarray 多维数组结构设计</a>】。</p>
<p>高级索引中，最常见的就是整数数组索引：</p>
<p>👇👇👇 <strong>整数数组索引</strong> 👇👇👇</p>
<p>依次看一下一维、二维数组的整数数组索引方式，然后推导 N 维数组：</p>
<p><font color="red">↓↓↓↓↓↓ 1D Array ↓↓↓↓↓↓</font></p>
<p>使用整数数组索引可以同时获取多个索引的元素值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1 = np.arange(<span class="number">10</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br></pre></td></tr></table></figure>

<p>相较于单个元素索引方式 &gt;&gt;&gt; 多加了一层 <code>[]</code>，使用逗号隔开</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1[[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]]</span><br><span class="line">array([<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>])</span><br></pre></td></tr></table></figure>

<p><font color="red">↓↓↓↓↓↓ 2D Array ↓↓↓↓↓↓</font></p>
<p>二维数组获取普通索引值和一维不太一样，由两个维度（Row, Col）构成。</p>
<p>故访问二维 Ndarray 中的多个元素值，需要多加一个 <code>[]</code>，分别表示行索引数组、列索引数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2 = np.array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>],</span><br><span class="line">                     [ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">                     [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">                     [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">       [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>]]</span><br><span class="line">array([ <span class="number">5</span>, <span class="number">12</span>, <span class="number">19</span>])</span><br></pre></td></tr></table></figure>

<p>其中，行索引数组：[1, 2, 3] &amp;&amp; 列索引数组：[0, 2, 4]。将行、列索引组合会得到 <code>(1, 0)</code> &amp;&amp; <code>(2, 2)</code> &amp;&amp; <code>(3, 4)</code>，它们分别对应着输出元素值在原数组中的索引位置。</p>
<p>完成实例：获取上述 4*5 数组中的四个角上元素，它们对应的行索引是 <code>[0,0]</code> 和 <code>[3,3]</code>，列索引是 <code>[0,4]</code> 和 <code>[0,4]</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>row_two = np.array([[<span class="number">0</span>, <span class="number">0</span>], [<span class="number">3</span>, <span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>col_two = np.array([[<span class="number">0</span>, <span class="number">4</span>], [<span class="number">0</span>, <span class="number">4</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2[row_two, col_two]</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">4</span>],</span><br><span class="line">       [<span class="number">15</span>, <span class="number">19</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2[[<span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">3</span>], [<span class="number">0</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">4</span>]]</span><br><span class="line">array([ <span class="number">0</span>,  <span class="number">4</span>, <span class="number">15</span>, <span class="number">19</span>])</span><br></pre></td></tr></table></figure>

<p>更复杂一点，你可以将切片使用的 <code>:</code> 或省略号 <code>...</code> 与整数数组索引结合使用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2 = np.array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line"><span class="meta">... </span>              [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>],</span><br><span class="line"><span class="meta">... </span>              [ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line"><span class="meta">... </span>              [ <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">       [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>],</span><br><span class="line">       [ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">       [ <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2D Slice：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2[<span class="number">1</span>:<span class="number">4</span>, <span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line">array([[ <span class="number">4</span>,  <span class="number">5</span>],</span><br><span class="line">       [ <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 行使用基础索引，对列使用高级索引</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2[<span class="number">1</span>:<span class="number">4</span>, [<span class="number">1</span>, <span class="number">2</span>]]</span><br><span class="line">array([[ <span class="number">4</span>,  <span class="number">5</span>],</span><br><span class="line">       [ <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对行使用省略号</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2[..., <span class="number">1</span>:]</span><br><span class="line">array([[ <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>],</span><br><span class="line">       [ <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">11</span>]])</span><br></pre></td></tr></table></figure>

<p><font color="red">↓↓↓↓↓↓ 3D Array ↓↓↓↓↓↓</font></p>
<p>思考一下，三维数组的整数数组高级索引是什么情况？？？</p>
<p>先分析，我们知道 3D 数组通过索引 (Page, Row, Col) 来获取数组中的单个元素。</p>
<p>故，相较于二维数组，需要多加一个 <code>[]</code>，分别表示 &gt;&gt;&gt; 页索引数组、行索引数组、列索引数组，测试一下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr3 = np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr3</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>],</span><br><span class="line">        [ <span class="number">2</span>,  <span class="number">3</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">4</span>,  <span class="number">5</span>],</span><br><span class="line">        [ <span class="number">6</span>,  <span class="number">7</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">        [<span class="number">10</span>, <span class="number">11</span>]]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr3[[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">1</span>]]</span><br><span class="line">array([<span class="number">0</span>, <span class="number">7</span>])</span><br></pre></td></tr></table></figure>

<p>果然~~~</p>
<p><font color="red">↓↓↓↓↓↓ ND Array ↓↓↓↓↓↓</font></p>
<p>所以，对于更高维的数组，多一层维度就加一个 <code>[]</code>，表示新增维度。</p>
<p>| =============================================== <strong>Split Line</strong> ================================================= |</p>
<p>👇👇👇 <strong>布尔数组索引</strong> 👇👇👇</p>
<p>我们可以通过建立一个布尔数组来索引目标数组，通过数组的逻辑运算作为索引，以此找出与布尔数组中值为 True 所对应目标数组中的数据。</p>
<p>以一个二维数组为例来看具体应用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],[ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>],[ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],[ <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">       [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>],</span><br><span class="line">       [ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">       [ <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数组的逻辑运算结果：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr &gt; <span class="number">6</span></span><br><span class="line">array([[<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>],</span><br><span class="line">       [<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>],</span><br><span class="line">       [<span class="literal">False</span>,  <span class="literal">True</span>,  <span class="literal">True</span>],</span><br><span class="line">       [ <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找出满足逻辑运算结果为 True 的索引，所对应的数组元素：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr[arr &gt; <span class="number">6</span>]</span><br><span class="line">array([ <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>])</span><br></pre></td></tr></table></figure>

<p>具体的应用场景 &gt;&gt;&gt;</p>
<p><font color="red">↓↓↓↓↓↓ 匹配筛选 ↓↓↓↓↓↓</font></p>
<p>布尔索引可以实现 &gt;&gt;&gt; 通过列向量中的每个元素的布尔型数值对一个与列向量有着同样行数的矩阵进行符合匹配。而这样的作用，其实是把列向量中布尔值为 True 的相应行向量给抽取了出来。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>names = np.array([<span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;Joe&#x27;</span>, <span class="string">&#x27;Will&#x27;</span>, <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;Will&#x27;</span>, <span class="string">&#x27;Joe&#x27;</span>, <span class="string">&#x27;Joe&#x27;</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>names</span><br><span class="line">array([<span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;Joe&#x27;</span>, <span class="string">&#x27;Will&#x27;</span>, <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;Will&#x27;</span>, <span class="string">&#x27;Joe&#x27;</span>, <span class="string">&#x27;Joe&#x27;</span>], dtype=<span class="string">&#x27;&lt;U4&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(names == <span class="string">&#x27;Joe&#x27;</span>)</span><br><span class="line">[<span class="literal">False</span>  <span class="literal">True</span> <span class="literal">False</span> <span class="literal">False</span> <span class="literal">False</span>  <span class="literal">True</span>  <span class="literal">True</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data = np.random.randn(<span class="number">7</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data</span><br><span class="line">array([[ <span class="number">1.37105726</span>,  <span class="number">0.643821</span>  , -<span class="number">0.04952524</span>,  <span class="number">0.87843288</span>],</span><br><span class="line">       [-<span class="number">0.73402717</span>,  <span class="number">1.16743508</span>,  <span class="number">1.96971901</span>, -<span class="number">0.961953</span>  ],</span><br><span class="line">       [ <span class="number">0.52256989</span>,  <span class="number">1.09314884</span>, -<span class="number">1.05628438</span>,  <span class="number">0.61548645</span>],</span><br><span class="line">       [ <span class="number">0.80319287</span>,  <span class="number">0.7778842</span> ,  <span class="number">0.64672434</span>, -<span class="number">0.07293975</span>],</span><br><span class="line">       [ <span class="number">1.19837729</span>,  <span class="number">0.37055356</span>,  <span class="number">0.7436583</span> ,  <span class="number">1.43116524</span>],</span><br><span class="line">       [-<span class="number">0.95453104</span>,  <span class="number">0.01908647</span>, -<span class="number">0.19713538</span>, -<span class="number">0.86226891</span>],</span><br><span class="line">       [-<span class="number">1.23236429</span>,  <span class="number">1.60928</span>   ,  <span class="number">1.27864806</span>,  <span class="number">1.85035932</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过数组的逻辑运算作为索引，筛选出布尔值为 True 所对应目标数组中的数据：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data[names == <span class="string">&#x27;Joe&#x27;</span>]</span><br><span class="line">array([[-<span class="number">0.73402717</span>,  <span class="number">1.16743508</span>,  <span class="number">1.96971901</span>, -<span class="number">0.961953</span>  ],</span><br><span class="line">       [-<span class="number">0.95453104</span>,  <span class="number">0.01908647</span>, -<span class="number">0.19713538</span>, -<span class="number">0.86226891</span>],</span><br><span class="line">       [-<span class="number">1.23236429</span>,  <span class="number">1.60928</span>   ,  <span class="number">1.27864806</span>,  <span class="number">1.85035932</span>]])</span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 布尔型数组的切片用法 ↓↓↓↓↓↓ </font></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>data[names == <span class="string">&#x27;Joe&#x27;</span>, <span class="number">2</span>:]</span><br><span class="line">array([[ <span class="number">1.96971901</span>, -<span class="number">0.961953</span>  ],</span><br><span class="line">       [-<span class="number">0.19713538</span>, -<span class="number">0.86226891</span>],</span><br><span class="line">       [ <span class="number">1.27864806</span>,  <span class="number">1.85035932</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data[names == <span class="string">&#x27;Joe&#x27;</span>, <span class="number">3</span>]</span><br><span class="line">array([-<span class="number">0.961953</span>  , -<span class="number">0.86226891</span>,  <span class="number">1.85035932</span>])</span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 布尔条件否定用法 ↓↓↓↓↓↓ </font></p>
<p>如果要选择除 <code>Joe</code> 以外的其他值，可以使用 <code>!=</code>  或 <code>~</code> 对逻辑运算条件进行否定：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>names != <span class="string">&#x27;Joe&#x27;</span></span><br><span class="line">array([ <span class="literal">True</span>, <span class="literal">False</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>, <span class="literal">False</span>, <span class="literal">False</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data[names != <span class="string">&#x27;Joe&#x27;</span>]</span><br><span class="line">array([[ <span class="number">1.37105726</span>,  <span class="number">0.643821</span>  , -<span class="number">0.04952524</span>,  <span class="number">0.87843288</span>],</span><br><span class="line">       [ <span class="number">0.52256989</span>,  <span class="number">1.09314884</span>, -<span class="number">1.05628438</span>,  <span class="number">0.61548645</span>],</span><br><span class="line">       [ <span class="number">0.80319287</span>,  <span class="number">0.7778842</span> ,  <span class="number">0.64672434</span>, -<span class="number">0.07293975</span>],</span><br><span class="line">       [ <span class="number">1.19837729</span>,  <span class="number">0.37055356</span>,  <span class="number">0.7436583</span> ,  <span class="number">1.43116524</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data[~(names == <span class="string">&#x27;Joe&#x27;</span>)]</span><br><span class="line">array([[ <span class="number">1.37105726</span>,  <span class="number">0.643821</span>  , -<span class="number">0.04952524</span>,  <span class="number">0.87843288</span>],</span><br><span class="line">       [ <span class="number">0.52256989</span>,  <span class="number">1.09314884</span>, -<span class="number">1.05628438</span>,  <span class="number">0.61548645</span>],</span><br><span class="line">       [ <span class="number">0.80319287</span>,  <span class="number">0.7778842</span> ,  <span class="number">0.64672434</span>, -<span class="number">0.07293975</span>],</span><br><span class="line">       [ <span class="number">1.19837729</span>,  <span class="number">0.37055356</span>,  <span class="number">0.7436583</span> ,  <span class="number">1.43116524</span>]])</span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓↓ 多布尔条件用法 ↓↓↓↓↓↓ </font></p>
<p>用 <code>&amp;</code> , 或用 <code>|</code> 来选择满足多个布尔条件（Python 中的 and 和 or 在布尔数组中无效）:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>mask = (names == <span class="string">&#x27;Bob&#x27;</span>) | (names == <span class="string">&#x27;Joe&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mask</span><br><span class="line">array([ <span class="literal">True</span>,  <span class="literal">True</span>, <span class="literal">False</span>,  <span class="literal">True</span>, <span class="literal">False</span>,  <span class="literal">True</span>,  <span class="literal">True</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data[mask]</span><br><span class="line">array([[ <span class="number">1.37105726</span>,  <span class="number">0.643821</span>  , -<span class="number">0.04952524</span>,  <span class="number">0.87843288</span>],</span><br><span class="line">       [-<span class="number">0.73402717</span>,  <span class="number">1.16743508</span>,  <span class="number">1.96971901</span>, -<span class="number">0.961953</span>  ],</span><br><span class="line">       [ <span class="number">0.80319287</span>,  <span class="number">0.7778842</span> ,  <span class="number">0.64672434</span>, -<span class="number">0.07293975</span>],</span><br><span class="line">       [-<span class="number">0.95453104</span>,  <span class="number">0.01908647</span>, -<span class="number">0.19713538</span>, -<span class="number">0.86226891</span>],</span><br><span class="line">       [-<span class="number">1.23236429</span>,  <span class="number">1.60928</span>   ,  <span class="number">1.27864806</span>,  <span class="number">1.85035932</span>]])</span><br></pre></td></tr></table></figure>

<p><font color="red"> ↓↓↓↓↓ 修改满足布尔条件数组的值 ↓↓↓↓↓↓ </font></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>data[data &lt; <span class="number">0</span>] = <span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data</span><br><span class="line">array([[<span class="number">1.37105726</span>, <span class="number">0.643821</span>  , <span class="number">0.</span>        , <span class="number">0.87843288</span>],</span><br><span class="line">       [<span class="number">0.</span>        , <span class="number">1.16743508</span>, <span class="number">1.96971901</span>, <span class="number">0.</span>        ],</span><br><span class="line">       [<span class="number">0.52256989</span>, <span class="number">1.09314884</span>, <span class="number">0.</span>        , <span class="number">0.61548645</span>],</span><br><span class="line">       [<span class="number">0.80319287</span>, <span class="number">0.7778842</span> , <span class="number">0.64672434</span>, <span class="number">0.</span>        ],</span><br><span class="line">       [<span class="number">1.19837729</span>, <span class="number">0.37055356</span>, <span class="number">0.7436583</span> , <span class="number">1.43116524</span>],</span><br><span class="line">       [<span class="number">0.</span>        , <span class="number">0.01908647</span>, <span class="number">0.</span>        , <span class="number">0.</span>        ],</span><br><span class="line">       [<span class="number">0.</span>        , <span class="number">1.60928</span>   , <span class="number">1.27864806</span>, <span class="number">1.85035932</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data[names != <span class="string">&#x27;Bob&#x27;</span>] = <span class="number">8</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data</span><br><span class="line">array([[<span class="number">1.37105726</span>, <span class="number">0.643821</span>  , <span class="number">0.</span>        , <span class="number">0.87843288</span>],</span><br><span class="line">       [<span class="number">8.</span>        , <span class="number">8.</span>        , <span class="number">8.</span>        , <span class="number">8.</span>        ],</span><br><span class="line">       [<span class="number">8.</span>        , <span class="number">8.</span>        , <span class="number">8.</span>        , <span class="number">8.</span>        ],</span><br><span class="line">       [<span class="number">0.80319287</span>, <span class="number">0.7778842</span> , <span class="number">0.64672434</span>, <span class="number">0.</span>        ],</span><br><span class="line">       [<span class="number">8.</span>        , <span class="number">8.</span>        , <span class="number">8.</span>        , <span class="number">8.</span>        ],</span><br><span class="line">       [<span class="number">8.</span>        , <span class="number">8.</span>        , <span class="number">8.</span>        , <span class="number">8.</span>        ],</span><br><span class="line">       [<span class="number">8.</span>        , <span class="number">8.</span>        , <span class="number">8.</span>        , <span class="number">8.</span>        ]])</span><br></pre></td></tr></table></figure>

<p>| =============================================== <strong>Split Line</strong> ================================================= |</p>
<p>👇👇👇 <strong>花式索引</strong> 👇👇👇</p>
<p>花式索引也可以理解为整数数组索引，但是它们之间又略有不同。实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">32</span>).reshape((<span class="number">8</span>, <span class="number">4</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">       [<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">       [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>],</span><br><span class="line">       [<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>],</span><br><span class="line">       [<span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>],</span><br><span class="line">       [<span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 索引数组的元素值与被索引数组的每一行相对应：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr[[<span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">7</span>]]</span><br><span class="line">array([[<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [<span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 倒序索引数组（取行）：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr[[-<span class="number">4</span>, -<span class="number">2</span>, -<span class="number">1</span>, -<span class="number">7</span>]]</span><br><span class="line">array([[<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>],</span><br><span class="line">       [<span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>],</span><br><span class="line">       [<span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多个索引数组的情况下，需要使用 `np.ix_`</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr[np.ix_([<span class="number">1</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">2</span>], [<span class="number">0</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>])]</span><br><span class="line">array([[ <span class="number">4</span>,  <span class="number">7</span>,  <span class="number">5</span>,  <span class="number">6</span>],</span><br><span class="line">       [<span class="number">20</span>, <span class="number">23</span>, <span class="number">21</span>, <span class="number">22</span>],</span><br><span class="line">       [<span class="number">28</span>, <span class="number">31</span>, <span class="number">29</span>, <span class="number">30</span>],</span><br><span class="line">       [ <span class="number">8</span>, <span class="number">11</span>,  <span class="number">9</span>, <span class="number">10</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 其中 [1,5,7,2] 代表行索引，而 [0,3,1,2] 表示与行索引相对应的列索引值，也就是行中的元素值会按照列索引值排序。</span></span><br><span class="line"><span class="comment"># 比如，第一行元素，未排序前的顺序是 [4,5,6,7]，经过列索引排序后变成了 [4,7,5,6]。</span></span><br></pre></td></tr></table></figure>

<hr>
<p>自此，你已经完成了 NumPy ndarray 多维数组的基础部分内容学习。在开始后续的学习之前，强烈建议阅读 &gt;&gt;&gt;&gt;【<a href="https://www.orangeshare.cn/2018/01/20/yi-wen-jie-xi-numpy-ndarray-duo-wei-shu-zu-jie-gou-she-ji/">一文解析 NumPy ndarray 多维数组结构设计</a>】一文，可以帮助你更好的理解 ndarray 数组，方便后续内容的学习。</p>
<h3 id="Ndarray-数组遍历"><a href="#Ndarray-数组遍历" class="headerlink" title="Ndarray 数组遍历"></a>Ndarray 数组遍历</h3><p>类似于 Python 内置数组（Tuple &amp;&amp; List…）遍历，你也可以遍历访问 Ndarray 数组中元素：</p>
<h4 id="通用遍历方法"><a href="#通用遍历方法" class="headerlink" title="通用遍历方法"></a>通用遍历方法</h4><p>同样类似于 Python 中 List 等序列的遍历方法，使用 <code>for</code> 循环实现 Ndarray 数组元素的遍历：</p>
<p>👇👇👇 <strong>一维数组</strong> 👇👇👇</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>one_arr = np.arange(<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>one_arr</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> one_arr:</span><br><span class="line"><span class="meta">... </span>    print(item)</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>可见，for 循环遍历一维数组中所有元素进行输出。</p>
<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p>👇👇👇 <strong>二维数组</strong> 👇👇👇</p>
<p>同样的，可以对二维数组进行遍历：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>two_arr = np.arange(<span class="number">6</span>).reshape(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>two_arr</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> r <span class="keyword">in</span> two_arr:</span><br><span class="line"><span class="meta">... </span>    print(r)</span><br><span class="line">...</span><br><span class="line">[<span class="number">0</span> <span class="number">1</span> <span class="number">2</span>]</span><br><span class="line">[<span class="number">3</span> <span class="number">4</span> <span class="number">5</span>]</span><br></pre></td></tr></table></figure>

<p>可见，单层 for 循环会将每行元素组成的一维数组作为一个二维数组的元素，输出三个一维数组。故你可以使用多重循环来遍历输出每一个元素：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> r <span class="keyword">in</span> two_arr:  <span class="comment"># row</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">for</span> c <span class="keyword">in</span> r:  <span class="comment"># col</span></span><br><span class="line"><span class="meta">... </span>        print(c)</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果你仅仅想查看数组中的元素，你可以先将多维数组平铺成一维数组，然后进行遍历查看：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> two_arr.flatten():</span><br><span class="line"><span class="meta">... </span>    print(item)</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p>👇👇👇 <strong>N 维数组</strong> 👇👇👇</p>
<p>推测一下 &gt;&gt;&gt;&gt; <strong>单层 for 循环遍历多维数组时，会依次输出最高层次 axis 轴（<code>axis=0</code>）上的元素！！！</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>three_arr = np.arange(<span class="number">12</span>).reshape(<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>three_arr</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">        [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">        [ <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> three_arr:</span><br><span class="line"><span class="meta">... </span>    print(item)</span><br><span class="line">...</span><br><span class="line">[[<span class="number">0</span> <span class="number">1</span> <span class="number">2</span>]</span><br><span class="line"> [<span class="number">3</span> <span class="number">4</span> <span class="number">5</span>]]</span><br><span class="line">[[ <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>]</span><br><span class="line"> [ <span class="number">9</span> <span class="number">10</span> <span class="number">11</span>]]</span><br></pre></td></tr></table></figure>

<hr>
<p>可以看出，对于高维数组（&gt; 2-Dims）中元素的遍历访问是很繁琐的（多重 for 循环）。</p>
<h4 id="迭代器方法"><a href="#迭代器方法" class="headerlink" title="迭代器方法"></a>迭代器方法</h4><p>事实上，NumPy 中提供了一个 <strong>nditer 迭代器</strong> 方法 <code>numpy.nditer()</code>，可以配合 for 循环完成对数组中所有元素的遍历：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">12</span>).reshape(<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">        [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">        [ <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> np.nditer(arr):</span><br><span class="line"><span class="meta">... </span>    print(item, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">10</span> <span class="number">11</span></span><br></pre></td></tr></table></figure>

<p><font color="red">↓↓↓↓↓↓ 关于 C/F-Order ↓↓↓↓↓↓</font></p>
<p>我们知道，Ndarray 数组中元素有两种布局方式：C-order（行优先顺序）&amp;&amp; Fortrant-order（列优先顺序）。</p>
<p>那么，nditer 迭代器又是如何处理具有特定布局方式的数组呢？？？ &gt;&gt;&gt;&gt; <strong>无须考虑布局（仅解释方式），Memory Block 中元素顺序遍历！！！</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">6</span>).reshape((<span class="number">2</span>, <span class="number">3</span>), order=<span class="string">&quot;F&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 和布局方式无关：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> np.nditer(arr):</span><br><span class="line"><span class="meta">... </span>    print(item, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 转置：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> np.nditer(arr.T):</span><br><span class="line"><span class="meta">... </span>    print(item, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p>👇👇👇 <strong>指定遍历顺序</strong> 👇👇👇</p>
<p>那么，如何通过指定的顺序（C/F-Order）访问 Ndarray 数组元素？？？可以通过 <code>nditer</code> 迭代器方法的 <code>order</code> 参数来指定：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">6</span>).reshape((<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># C-Order</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> np.nditer(arr, order=<span class="string">&#x27;C&#x27;</span>):</span><br><span class="line"><span class="meta">... </span>    print(item, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># F-Order</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> np.nditer(arr, order=<span class="string">&#x27;F&#x27;</span>):</span><br><span class="line"><span class="meta">... </span>    print(item, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span> <span class="number">3</span> <span class="number">1</span> <span class="number">4</span> <span class="number">2</span> <span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p>👇👇👇 <strong>遍历时修改元素值</strong> 👇👇👇</p>
<p><code>nditer</code> 迭代器方法中提供有一个 <code>op_flags</code> 参数，可用于能否在遍历数组时对元素进行修改。有三种模式：</p>
<ul>
<li>readonly：只读模式（默认），默认情况下不可更改；</li>
<li>readwrite：读写模式；</li>
<li>writeonly：只写模式。</li>
</ul>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">6</span>).reshape((<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> np.nditer(arr):</span><br><span class="line"><span class="meta">... </span>    item[...] = item * <span class="number">2</span></span><br><span class="line">...</span><br><span class="line"><span class="comment"># 默认情况下为 `read-only` 模式，不可修改：</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ValueError: assignment destination <span class="keyword">is</span> read-only</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定为可读写模式后，修改元素：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> np.nditer(arr, op_flags=[<span class="string">&quot;readwrite&quot;</span>]):</span><br><span class="line"><span class="meta">... </span>    item[...] = item * <span class="number">2</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">6</span>,  <span class="number">8</span>, <span class="number">10</span>]])</span><br></pre></td></tr></table></figure>

<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p>👇👇👇 <strong>同时迭代多数组</strong> 👇👇👇</p>
<p>如果多个数组之间可以被广播（Broadcast），那么 <code>nditer</code> 迭代器就可以同时对它们迭代。</p>
<blockquote>
<p>关于数组的广播机制可参见下一章节~~~</p>
</blockquote>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a_arr = np.arange(<span class="number">6</span>).reshape(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a_arr</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b_arr = np.arange(<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b_arr</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> x,y <span class="keyword">in</span> np.nditer([a_arr, b_arr]):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span> (<span class="string">&quot;%d-%d&quot;</span> % (x,y),end=<span class="string">&quot;,&quot;</span>)</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span>-<span class="number">0</span>,<span class="number">1</span>-<span class="number">1</span>,<span class="number">2</span>-<span class="number">2</span>,<span class="number">3</span>-<span class="number">0</span>,<span class="number">4</span>-<span class="number">1</span>,<span class="number">5</span>-<span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>其中，数组 <code>a_arr</code> 的形状是 <code>(2, 3)</code>，而数组 <code>b_arr</code> 的形状是 <code>(3,)</code> &lt;&lt;&lt;&lt; 维度较小的数组 <code>b_arr</code> 可以被广播到数组 <code>a_arr</code> 中。</p>
<hr>
<h3 id="Ndarray-Broadcast"><a href="#Ndarray-Broadcast" class="headerlink" title="Ndarray Broadcast"></a>Ndarray Broadcast</h3><p>当操作两个形状不同的数组运算时，会引发 NumPy 中的广播机制。</p>
<p>NumPy 中的广播机制（Broadcast）旨在 &gt;&gt;&gt;&gt; <strong>解决 不同形状数组之间 的算术运算问题。</strong></p>
<h4 id="广播原则"><a href="#广播原则" class="headerlink" title="广播原则"></a>广播原则</h4><p>这里，我们首先要了解广播机制的核心原则：</p>
<p><font color="green">如果两个数组的后缘维度</font>（Trailing Dimension，即从末尾开始算起的维度）<font color="green">的轴长度</font>（相应轴上的元素个数，与 Shape 对应）<font color="green">相符，或其中至少一方的长度为 1</font>，则认为它们是广播兼容的。</p>
<p>广播会在 &gt;&gt;&gt;&gt; <font color="red">缺失和（或）长度为 1 的维度上对较小的数组进行扩展</font>。</p>
<p>结合下面的广播应用理解其核心原则。</p>
<hr>
<h4 id="广播的应用"><a href="#广播的应用" class="headerlink" title="广播的应用"></a>广播的应用</h4><p>广播原则体现三种情况的应用：</p>
<ul>
<li>两个数组的维数不相等，但它们的后缘维度的轴长相符；</li>
<li>两个数组的维数相等，但至少有一方轴的长度为 1；</li>
<li>上述两种情况的结合。</li>
</ul>
<p>👇👇👇 <strong>数组维度不同，后缘维度的轴长相符</strong> 👇👇👇</p>
<p>通过如下样例进行说明：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1 = np.array([[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],[<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>]])  <span class="comment">#arr1.shape = (4, 3)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2 = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])  <span class="comment"># arr2.shape = (3,)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(arr1 + arr2)</span><br><span class="line">[[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line"> [<span class="number">2</span> <span class="number">3</span> <span class="number">4</span>]</span><br><span class="line"> [<span class="number">3</span> <span class="number">4</span> <span class="number">5</span>]</span><br><span class="line"> [<span class="number">4</span> <span class="number">5</span> <span class="number">6</span>]]</span><br></pre></td></tr></table></figure>

<p>如上，Shape 不同的数组 arr1 和 arr2 可以通过广播原则执行加法运算。进一步解析 &gt;&gt;&gt; 数组 <code>arr1</code> &amp;&amp; <code>arr2</code> 的维度不同：前者为二维的，而后者是一维的。但两个数组的后缘维度相等，会将较小的数组 <code>arr2</code> 沿着缺失的 0 轴进行扩展。</p>
<p>你可以认为 &gt;&gt;&gt;&gt; <strong>较小数组的 shape，“截取” 自较大数组 shape 的尾部</strong> &lt;&lt;&lt;&lt; 较小数组的 shape 刚好是某个后缘维度。</p>
<p>上述示例的广播示意图如下：</p>
<div align=center><img src='https://s2.loli.net/2023/05/04/JANqdpczsjlbLhU.jpg'></div>

<p><font color="red">↓↓↓↓↓↓ 样例二 ↓↓↓↓↓↓</font></p>
<p>再来思考一下 <code>arr3</code>（3, 4, 2）&amp;&amp; <code>arr4</code>（4, 2）的情况 &gt;&gt;&gt;&gt; arr3 为 3 维，arr4 为 2 维，但其后缘维度相同（4, 2），<code>axis=0</code> 轴缺失。</p>
<p>其广播示意图如下：</p>
<div align=center><img src='https://s2.loli.net/2023/05/04/4TgKXNziWQHdPAD.jpg'></div>

<p>可见，对于较小的数组 arr4 将沿着缺失的 0 轴进行了扩展：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr3 = np.arange(<span class="number">24</span>).reshape([<span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr3</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>],</span><br><span class="line">        [ <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">5</span>],</span><br><span class="line">        [ <span class="number">6</span>,  <span class="number">7</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">        [<span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">        [<span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">        [<span class="number">14</span>, <span class="number">15</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">16</span>, <span class="number">17</span>],</span><br><span class="line">        [<span class="number">18</span>, <span class="number">19</span>],</span><br><span class="line">        [<span class="number">20</span>, <span class="number">21</span>],</span><br><span class="line">        [<span class="number">22</span>, <span class="number">23</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr4 = np.ones([<span class="number">4</span>, <span class="number">2</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr4</span><br><span class="line">array([[<span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(arr3 + arr4)</span><br><span class="line">[[[ <span class="number">1.</span>  <span class="number">2.</span>]</span><br><span class="line">  [ <span class="number">3.</span>  <span class="number">4.</span>]</span><br><span class="line">  [ <span class="number">5.</span>  <span class="number">6.</span>]</span><br><span class="line">  [ <span class="number">7.</span>  <span class="number">8.</span>]]</span><br><span class="line"></span><br><span class="line"> [[ <span class="number">9.</span> <span class="number">10.</span>]</span><br><span class="line">  [<span class="number">11.</span> <span class="number">12.</span>]</span><br><span class="line">  [<span class="number">13.</span> <span class="number">14.</span>]</span><br><span class="line">  [<span class="number">15.</span> <span class="number">16.</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">17.</span> <span class="number">18.</span>]</span><br><span class="line">  [<span class="number">19.</span> <span class="number">20.</span>]</span><br><span class="line">  [<span class="number">21.</span> <span class="number">22.</span>]</span><br><span class="line">  [<span class="number">23.</span> <span class="number">24.</span>]]]</span><br></pre></td></tr></table></figure>

<p>同理，（4, 2, 3）和（2, 3）是兼容的，（4, 2, 3）还和（3,）是兼容的，后者需要在两个轴上面进行扩展。</p>
<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p>👇👇👇 <strong>数组维度相同，其中至少有一个轴为 1</strong> 👇👇👇</p>
<p>通过如下样例进行说明：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1 = np.array([[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2 = np.array([[<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">3</span>], [<span class="number">4</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2</span><br><span class="line">array([[<span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(arr1 + arr2)</span><br><span class="line">[[<span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]</span><br><span class="line"> [<span class="number">3</span> <span class="number">3</span> <span class="number">3</span>]</span><br><span class="line"> [<span class="number">5</span> <span class="number">5</span> <span class="number">5</span>]</span><br><span class="line"> [<span class="number">7</span> <span class="number">7</span> <span class="number">7</span>]]</span><br></pre></td></tr></table></figure>

<p><code>arr1</code> 的 shape 为（4, 3），<code>arr2</code> 的 shape 为 （4, 1），它们都是二维的。并且，数组 <code>arr2</code> 在 axis=1 轴上的轴长度为 1，故其可以沿着该轴进行广播，其示意图如下：</p>
<div align=center><img src='https://s2.loli.net/2023/05/05/aNuH8ldn2rsf7wh.jpg'></div>

<p>当前情况下，两个数组的维度相同，较小数组的某个轴长度为 1，这样就会沿着长度为 1 的轴进行扩展。</p>
<p>同理，（4, 6）和（1, 6）是兼容的，（3, 5, 6）和（1, 5, 6）、（3, 1, 6）、（3, 5, 1）是兼容的，后面三个数组分别会沿着 0 轴，1 轴，2 轴进行广播。</p>
<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p>👇👇👇 <strong>上述两种情况的结合</strong> 👇👇👇</p>
<p>还有上面两种结合的情况：</p>
<p>如（3, 5, 6）和（1, 6）/（1, 1, 6）是可以相兼容的。</p>
<p>在 TensorFlow 当中计算张量的时候也是用广播机制，并且和 NumPy 的广播机制是一样的。</p>
<hr>
<h2 id="Ndarray-数组基本操作"><a href="#Ndarray-数组基本操作" class="headerlink" title="Ndarray 数组基本操作"></a>Ndarray 数组基本操作</h2><p>NumPy 中包含了一些处理数组的常用方法，大致可分为以下几类：</p>
<ul>
<li>数组重塑操作；</li>
<li>数组换轴操作；</li>
<li>数组变维操作；</li>
<li>数组扩展和压缩操作；</li>
<li>数组连接与分割操作；</li>
<li>数组的增删改查操作；</li>
<li>数组的排序操作。</li>
</ul>
<p>下面分别对它们进行介绍：</p>
<h3 id="数组重塑"><a href="#数组重塑" class="headerlink" title="数组重塑"></a>数组重塑</h3><p>关于数组的简单变形操作涉及到几个常用函数：<code>numpy.ndarray.reshape</code> &amp;&amp; <code>numpy.ndarray.resize</code> &amp;&amp; <code>numpy.ndarray.flat</code> &amp;&amp; <code>numpy.ndarray.flatten</code> &amp;&amp; <code>numpy.reval</code> 等。</p>
<p>关于 numpy.ndarray.reshape 方法的用法，可参见上文关于【Ndarray 数组维度和形状】中说明，这里不再进行赘述。</p>
<p><font color="red">↓↓↓↓↓↓ 1. numpy.ndarray.resize ↓↓↓↓↓↓</font></p>
<p>该函数可用于重塑 ndarray 数组的形状，其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">numpy.resize(array, newShape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或：</span></span><br><span class="line"><span class="comment"># 同理于 NumPy 中 reshape 方法，但更加方便：</span></span><br><span class="line">numpy.ndarray.resize(newShape)</span><br></pre></td></tr></table></figure>

<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">8</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.resize(<span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]])</span><br></pre></td></tr></table></figure>

<p>需要注意的是 &gt;&gt;&gt; <strong>修改 ndarray 数组形状（尺寸）的时候， 不能改变数组中元素的个数</strong>。如上面数组的形状是 <code>8 * 1（8）</code>，可以修改成 <code>2 * 4（8）</code> &amp;&amp; <code>4 * 2（8）</code>，修改后仍是 <code>8</code> 个。否则报错：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ValueError: cannot resize this array: it does <span class="keyword">not</span> own its data</span><br></pre></td></tr></table></figure>

<p>区别于 reshape 在于 <strong>是否影响原数组</strong>。<code>reshape</code> 在改变形状时，不会影响原数组，相当于对原数组做了一份拷贝；而 <code>resize</code> 则是对原数组执行操作。</p>
<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p><font color="red">↓↓↓↓↓↓ 2. numpy.ndarray.flat ↓↓↓↓↓↓</font></p>
<p>类似于 <code>numpy.nditer</code>，该函数可用于返回一个数组迭代器（<code>numpy.flatiter</code>），可以配合 for 循环遍历数组中的每一个元素：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">9</span>).reshape(<span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> row <span class="keyword">in</span> arr:</span><br><span class="line"><span class="meta">... </span>    print(row)</span><br><span class="line">...</span><br><span class="line">[<span class="number">0</span> <span class="number">1</span> <span class="number">2</span>]</span><br><span class="line">[<span class="number">3</span> <span class="number">4</span> <span class="number">5</span>]</span><br><span class="line">[<span class="number">6</span> <span class="number">7</span> <span class="number">8</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> ele <span class="keyword">in</span> arr.flat:</span><br><span class="line"><span class="meta">... </span>    print(ele, end=<span class="string">&quot;, &quot;</span>)</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>,</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(arr.flat)</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">numpy</span>.<span class="title">flatiter</span>&#x27;&gt;</span></span><br></pre></td></tr></table></figure>

<p><font color="red">↓↓↓↓↓↓ 3. numpy.ndarray.flatten ↓↓↓↓↓↓</font></p>
<p>使数组扁平，该函数将以一维数组的形式（扁平处理）返回一份数组的副本（Copy），对副本的操作不会影响到原数组。</p>
<p>其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.ndarray.flatten(order=<span class="string">&#x27;C&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">9</span>).reshape(<span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">       [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>flatten_of_arr = arr.flatten()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>flatten_of_arr</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>])</span><br><span class="line"><span class="comment"># 数据所有者：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>flatten_of_arr.flags.owndata</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 行优先展开</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.flatten(order=<span class="string">&quot;F&quot;</span>)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>])</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p><font color="red">↓↓↓↓↓↓ 4. numpy.ndarray.ravel ↓↓↓↓↓↓</font></p>
<p>使数组扁平，该函数将以一维数组的形式（扁平处理）返回视图（View），如果修改会影响到原数组。</p>
<p>其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.ravel(order=<span class="string">&#x27;C&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">9</span>).reshape(<span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">       [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ravel_of_arr = arr.ravel()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ravel_of_arr</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>])</span><br><span class="line"><span class="comment"># 非数据所有者（引用）：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ravel_of_arr.flags.owndata</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 列优先展开：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.ravel(order=<span class="string">&quot;F&quot;</span>)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>])</span><br></pre></td></tr></table></figure>

<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p><font color="red">↓↓↓↓↓↓ 5. numpy.fliplr &amp;&amp; numpy.flipud ↓↓↓↓↓↓</font></p>
<p>NumPy 中还提供有直接对数组进行翻转的方法：</p>
<ul>
<li><code>numpy.fliplr(arr)</code>：左右翻转数组；</li>
<li><code>numpy.flipud(arr)</code>：上下翻转数组。</li>
</ul>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">16</span>).reshape(<span class="number">4</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">       [<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.fliplr(arr)</span><br><span class="line">array([[ <span class="number">3</span>,  <span class="number">2</span>,  <span class="number">1</span>,  <span class="number">0</span>],</span><br><span class="line">       [ <span class="number">7</span>,  <span class="number">6</span>,  <span class="number">5</span>,  <span class="number">4</span>],</span><br><span class="line">       [<span class="number">11</span>, <span class="number">10</span>,  <span class="number">9</span>,  <span class="number">8</span>],</span><br><span class="line">       [<span class="number">15</span>, <span class="number">14</span>, <span class="number">13</span>, <span class="number">12</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.flipud(arr)</span><br><span class="line">array([[<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>]])</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="数组换轴"><a href="#数组换轴" class="headerlink" title="数组换轴"></a>数组换轴</h3><p>关于数组的换轴操作涉及到几个常用函数：<code>numpy.moveaxis</code> &amp;&amp; <code>numpy.swapaxes</code> &amp;&amp; <code>numpy.transpose</code> &amp;&amp; <code>numpy.ndarray.T</code> 等。</p>
<p><font color="red">↓↓↓↓↓↓ 1. numpy.moveaxis ↓↓↓↓↓↓</font></p>
<p><strong>轴移动</strong>，该函数可用于将 Ndarray 数组的某个轴移动到特定位置，其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.moveaxis(arr, source, destination)</span><br></pre></td></tr></table></figure>

<p>其中，参数 arr 表示某个数组，参数 <code>source</code> 表示要移动的轴的原始位置，参数 <code>destination</code> 表示要移动到的目标位置。</p>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.zeros((<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 axis=0 移动到最后：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.moveaxis(x, <span class="number">0</span>, -<span class="number">1</span>).shape</span><br><span class="line">(<span class="number">4</span>, <span class="number">5</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment"># 将 axis=2 移动到开始：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.moveaxis(x, -<span class="number">1</span>, <span class="number">0</span>).shape</span><br><span class="line">(<span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>

<p><font color="red">↓↓↓↓↓↓ 2. numpy.swapaxes ↓↓↓↓↓↓</font></p>
<p><strong>轴交换</strong>，不同于 moveaxis 的是，该可以用于实现 Ndarray 数组轴的交换。其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.swapaxes(arr, axis1, axis2)</span><br></pre></td></tr></table></figure>

<p>其中，参数 arr 表示某个数组，参数 <code>axis1</code> 表示需要交换的轴 1 的位置，参数 <code>destination</code> 表示需要交换的轴 2 的位置。</p>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.zeros((<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 交换第一个和最后一个轴的位置：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.swapaxes(arr, <span class="number">0</span>, <span class="number">2</span>).shape</span><br><span class="line">(<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.swapaxes(arr, <span class="number">0</span>, -<span class="number">1</span>).shape</span><br><span class="line">(<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p><font color="red">↓↓↓↓↓↓ 3. numpy.transpose ↓↓↓↓↓↓</font></p>
<p><strong>轴调换</strong>，该函数可用于自由调换 Ndarray 数组的多个轴，其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">numpy.transpose(arr,  axes=<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或：</span></span><br><span class="line"><span class="comment"># 同理于 NumPy 中 transpose 方法，但更加方便：</span></span><br><span class="line">numpy.ndarray.transpose(*axes)</span><br></pre></td></tr></table></figure>

<p>其中，参数 <code>axes</code> 表示调换后各轴顺序的元组或列表，当 <code>axes=None</code>（默认）时表示数组转置，等同于二维数组的 <code>numpy.ndarray.T</code>。</p>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.T</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">4</span>,  <span class="number">8</span>],</span><br><span class="line">       [ <span class="number">1</span>,  <span class="number">5</span>,  <span class="number">9</span>],</span><br><span class="line">       [ <span class="number">2</span>,  <span class="number">6</span>, <span class="number">10</span>],</span><br><span class="line">       [ <span class="number">3</span>,  <span class="number">7</span>, <span class="number">11</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等同于 arr.T</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.transpose(<span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">4</span>,  <span class="number">8</span>],</span><br><span class="line">       [ <span class="number">1</span>,  <span class="number">5</span>,  <span class="number">9</span>],</span><br><span class="line">       [ <span class="number">2</span>,  <span class="number">6</span>, <span class="number">10</span>],</span><br><span class="line">       [ <span class="number">3</span>,  <span class="number">7</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.transpose()</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">4</span>,  <span class="number">8</span>],</span><br><span class="line">       [ <span class="number">1</span>,  <span class="number">5</span>,  <span class="number">9</span>],</span><br><span class="line">       [ <span class="number">2</span>,  <span class="number">6</span>, <span class="number">10</span>],</span><br><span class="line">       [ <span class="number">3</span>,  <span class="number">7</span>, <span class="number">11</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>three_arr = arr.reshape(<span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>three_arr</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>],</span><br><span class="line">        [ <span class="number">2</span>,  <span class="number">3</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">4</span>,  <span class="number">5</span>],</span><br><span class="line">        [ <span class="number">6</span>,  <span class="number">7</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">        [<span class="number">10</span>, <span class="number">11</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>three_arr.transpose(<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">2</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">6</span>],</span><br><span class="line">        [ <span class="number">8</span>, <span class="number">10</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">1</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">5</span>,  <span class="number">7</span>],</span><br><span class="line">        [ <span class="number">9</span>, <span class="number">11</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>three_arr.transpose(<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>).shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>事实上，你可以非常灵活的实现数组的换轴操作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.zeros((<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.moveaxis(x, <span class="number">0</span>, -<span class="number">1</span>).shape</span><br><span class="line">(<span class="number">4</span>, <span class="number">5</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.transpose(x).shape</span><br><span class="line">(<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.swapaxes(x, <span class="number">0</span>, -<span class="number">1</span>).shape</span><br><span class="line">(<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.moveaxis(x, [<span class="number">0</span>, <span class="number">1</span>], [-<span class="number">1</span>, -<span class="number">2</span>]).shape</span><br><span class="line">(<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.moveaxis(x, [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>], [-<span class="number">1</span>, -<span class="number">2</span>, -<span class="number">3</span>]).shape</span><br><span class="line">(<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>关于数组换轴后，数组中数据排布情况，可参见 &gt;&gt;&gt;【<a href="https://www.orangeshare.cn/2018/01/20/yi-wen-jie-xi-numpy-ndarray-duo-wei-shu-zu-jie-gou-she-ji/">一文解析 NumPy ndarray 多维数组结构设计</a>】博文中【Ndarray 属性详解】小节关于轴和形状的说明。</p>
<hr>
<h3 id="数组变维"><a href="#数组变维" class="headerlink" title="数组变维"></a>数组变维</h3><p>NumPy 中还提供了形如 <code>atleast_Xd</code> 的函数，支持将输入数据的维度直接视为 X（1/2/3）维。其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">numpy.atleast_1d()</span><br><span class="line">numpy.atleast_2d()</span><br><span class="line">numpy.atleast_3d()</span><br></pre></td></tr></table></figure>

<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.atleast_1d([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.atleast_2d([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line">array([[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.atleast_2d([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.atleast_3d([<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line">array([[[<span class="number">7</span>],</span><br><span class="line">        [<span class="number">8</span>],</span><br><span class="line">        [<span class="number">9</span>]]])</span><br></pre></td></tr></table></figure>

<p>关于既有数组的变维操作，可以参见前文介绍过的 <code>numpy.ndarray.reshape</code> &amp;&amp; <code>numpy.ndarray.resize</code> 函数。</p>
<hr>
<h3 id="数组扩展和压缩"><a href="#数组扩展和压缩" class="headerlink" title="数组扩展和压缩"></a>数组扩展和压缩</h3><p>关于数组的扩展和压缩操作涉及到几个常用函数：<code>numpy.broadcast</code> &amp;&amp; <code>numpy.broadcast_to</code> &amp;&amp; <code>numpy.expand_dims</code> &amp;&amp; <code>numpy.squeeze</code> 等。</p>
<p><font color="red">↓↓↓↓↓↓ 1. numpy.broadcast ↓↓↓↓↓↓</font></p>
<p>该函数用于生成一个模拟广播的对象（broadcast object），其返回一个广播对象，同样拥有 <code>shape/ndim/size</code> 等属性。</p>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array([[<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.array([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对 b 广播 a，这里数组的顺序，就是广播对象中相应数组的顺序（仅影响查看）</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = np.broadcast(a, b)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d</span><br><span class="line">&lt;numpy.broadcast <span class="built_in">object</span> at <span class="number">0x000001CFFA44B960</span>&gt;</span><br></pre></td></tr></table></figure>

<p>既然是一个广播对象，我们无法直接查看其细节信息。广播对象提供了一个 <code>iters</code> 属性可用于迭代输出信息：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>row, col = d.iters</span><br><span class="line"><span class="comment"># 查看广播对象中，相应行、列位置处，两个数组的元素情况：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> idx <span class="keyword">in</span> <span class="built_in">range</span>(d.size):</span><br><span class="line"><span class="meta">... </span>    print(<span class="built_in">next</span>(row), <span class="built_in">next</span>(col))</span><br><span class="line">...</span><br><span class="line"><span class="number">1</span> <span class="number">4</span></span><br><span class="line"><span class="number">1</span> <span class="number">5</span></span><br><span class="line"><span class="number">1</span> <span class="number">6</span></span><br><span class="line"><span class="number">2</span> <span class="number">4</span></span><br><span class="line"><span class="number">2</span> <span class="number">5</span></span><br><span class="line"><span class="number">2</span> <span class="number">6</span></span><br><span class="line"><span class="number">3</span> <span class="number">4</span></span><br><span class="line"><span class="number">3</span> <span class="number">5</span></span><br><span class="line"><span class="number">3</span> <span class="number">6</span></span><br></pre></td></tr></table></figure>

<p>可见，对于数组 <code>a</code> 沿着轴为 1 的方向进行了扩展，而数组 <code>b</code> 沿着缺失的轴进行了扩展。</p>
<p>使用 <code>broadcast</code> 来完成 <code>a+b</code> 过程：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先给出 a + b 的结果：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a + b</span><br><span class="line">array([[<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>],</span><br><span class="line">       [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>],</span><br><span class="line">       [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 broadcast 来完成 a + b：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e = np.broadcast(a, b)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = np.empty(e.shape)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.flat = [x + y <span class="keyword">for</span> (x, y) <span class="keyword">in</span> e]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f</span><br><span class="line">array([[<span class="number">5.</span>, <span class="number">6.</span>, <span class="number">7.</span>],</span><br><span class="line">       [<span class="number">6.</span>, <span class="number">7.</span>, <span class="number">8.</span>],</span><br><span class="line">       [<span class="number">7.</span>, <span class="number">8.</span>, <span class="number">9.</span>]])</span><br></pre></td></tr></table></figure>

<p><font color="red">↓↓↓↓↓↓ 2. numpy.broadcast_to ↓↓↓↓↓↓</font></p>
<p>很多时候，我们想要查看对于某个数组广播到某个 Shape 时的细节，怎么办？！！</p>
<p>NumPy 中提供了 <code>numpy.broadcast_to</code> 方法可以返回数组广播到新形状上的一个只读视图，其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.broadcast_to(array, shape)</span><br></pre></td></tr></table></figure>

<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看上面实例中的数组 `a` &amp;&amp; `b` 广播后的数组细节：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.broadcast_to(a, (<span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.broadcast_to(b, (<span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line">array([[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br></pre></td></tr></table></figure>

<p>需要注意的是，如果新形状不符合 NumPy 的广播规则，则会抛出 ValueError 异常。</p>
<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p><font color="red">↓↓↓↓↓↓ 3. numpy.expand_dims ↓↓↓↓↓↓</font></p>
<p>该函数可以在数组中指定轴位置插入新的轴，从而扩展数组的维度。其语法格式如下:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.expand_dims(arr, axis)</span><br></pre></td></tr></table></figure>

<p>其中，参数 <code>axis</code> 表示新轴插入的位置。</p>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.array(([<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = np.expand_dims(x, axis=<span class="number">0</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y</span><br><span class="line">array([[[<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">        [<span class="number">3</span>, <span class="number">4</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y.shape</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p><font color="red">↓↓↓↓↓↓ 4. numpy.squeeze ↓↓↓↓↓↓</font></p>
<p>维度有扩展就有压缩，该函数可以删除数组中周长度为 1 的维度。例如，一个数组的 shape 是 (5, 1)，经此函数后，shape 变为 (5,) 。其函数语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.squeeze(arr, axis)</span><br></pre></td></tr></table></figure>

<p>其中，参数 <code>axis</code> 取值为整数或整数元组，用于指定需要删除的维度所在轴，其所指向的轴长必须为 1，否则会报错！！！若为 None，则删除数组中所有轴长为 1 的维度。</p>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.array([[[<span class="number">0</span>], [<span class="number">1</span>], [<span class="number">2</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr.shape</span><br><span class="line">(<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除所有：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.squeeze(arr).shape</span><br><span class="line">(<span class="number">3</span>,)</span><br><span class="line"><span class="comment"># 删除轴 `axis=0`</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.squeeze(arr, axis=(<span class="number">0</span>,)).shape</span><br><span class="line">(<span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line"><span class="comment"># 删除轴 `axis=2`</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.squeeze(arr, axis=(<span class="number">2</span>,)).shape</span><br><span class="line">(<span class="number">1</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="数组连接与拆分"><a href="#数组连接与拆分" class="headerlink" title="数组连接与拆分"></a>数组连接与拆分</h3><p>关于数组的连接与分割操作涉及到几个常用函数：<code>numpy.concatenate</code> &amp;&amp; <code>numpy.stack &amp;&amp; numpy.hstack &amp;&amp; numpy.vstack numpy.dstack &amp;&amp; numpy.column_stack()</code> &amp;&amp; <code>numpy.split &amp;&amp; numpy.hsplit &amp;&amp; numpy.vsplit &amp;&amp; numpy.dsplit</code> 等。</p>
<p>👇👇👇 <strong>数组连接</strong> 👇👇👇</p>
<p><code>numpy.concatenate</code> 函数可以将多个数组沿指定轴连接在一起。其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.concatenate((arr1, arr2, ...), axis=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>其中，参数 <code>(arr1, arr2, ...)</code> 表示待连接的数组列表，参数 <code>axis</code> 表示指定的连接轴，默认为 0 轴。</p>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.array([[<span class="number">7</span>, <span class="number">8</span>], [<span class="number">9</span>, <span class="number">10</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = np.array([[<span class="number">11</span>, <span class="number">12</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.concatenate((a, b, c), axis=<span class="number">0</span>)</span><br><span class="line">array([[ <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">       [ <span class="number">3</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>],</span><br><span class="line">       [ <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">       [ <span class="number">9</span>, <span class="number">10</span>],</span><br><span class="line">       [<span class="number">11</span>, <span class="number">12</span>]])</span><br></pre></td></tr></table></figure>

<p>需要注意的是，<strong>需要保证连接处的维度一致！！！</strong>例如你可以尝试沿着横轴连接：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.array([[<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为了保证连接处维度一致，需要对数组 b 进行转置</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.concatenate((a, b.T), axis=<span class="number">1</span>)</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">7</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>, <span class="number">8</span>],</span><br><span class="line">       [<span class="number">5</span>, <span class="number">6</span>, <span class="number">9</span>]])</span><br></pre></td></tr></table></figure>

<hr>
<p>👇👇👇 <strong>数组堆叠</strong> 👇👇👇</p>
<p>NumPy 中提供了以下方法，可用于数组的堆叠：</p>
<ul>
<li><font color="yellow">numpy.stack(arrays，axis)</font>：沿着新轴连接数组的序列以实现堆叠；</li>
<li>numpy.column_stack()：将 1 维数组作为列堆叠到 2 维数组中；</li>
<li><font color="yellow">numpy.hstack()</font>：按水平方向堆叠数组；</li>
<li><font color="yellow">numpy.vstack()</font>：按垂直方向堆叠数组</li>
<li><font color="yellow">numpy.dstack()</font>：按深度方向堆叠数组。</li>
</ul>
<p>下面分别来看其区别：</p>
<p><font color="red">↓↓↓↓↓↓ 1. numpy.stack ↓↓↓↓↓↓</font></p>
<p>该函数会 <strong>创建一个新轴（新维度）</strong>来实现数组的堆叠。这里我们将通过一个样例来看数组的堆叠方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">1</span>, <span class="number">7</span>).reshape((<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.arange(<span class="number">7</span>, <span class="number">13</span>).reshape((<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = np.arange(<span class="number">13</span>, <span class="number">19</span>).reshape((<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = np.arange(<span class="number">19</span>, <span class="number">25</span>).reshape((<span class="number">2</span>, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>

<p>四个用于堆叠的数组如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 均为（2, 3）的二维数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([[ <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line">array([[<span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">       [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d</span><br><span class="line">array([[<span class="number">19</span>, <span class="number">20</span>, <span class="number">21</span>],</span><br><span class="line">       [<span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>]])</span><br></pre></td></tr></table></figure>

<p>接下来分别来看不同轴/维度上的堆叠实验：</p>
<p><strong>[1] &gt;&gt;&gt;&gt;</strong> axis=0</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.stack([a, b, c, d], axis=<span class="number">0</span>)</span><br><span class="line">array([[[ <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">        [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">19</span>, <span class="number">20</span>, <span class="number">21</span>],</span><br><span class="line">        [<span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>]]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.stack([a, b, c, d], axis=<span class="number">0</span>).shape</span><br><span class="line">(<span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>形象理解 &gt;&gt;&gt; <strong>axis 等于几就在哪个维度上进行堆叠。</strong>当 axis=0 时（会创建一个新轴），意味着每个数组都是一个整体，即（2, 3）的数组。故对于 0 维堆叠，相当于简单的数组罗列 &lt;&lt;&lt; 比如四个数组分别表示 4 张图像矩阵，进行 0 维堆叠就是将它们按照顺序排放起来，形成一个（4, 2, 3）的三维数组。</p>
<p><strong>[2] &gt;&gt;&gt;&gt;</strong> axis=1</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.stack([a, b, c, d], axis=<span class="number">1</span>)</span><br><span class="line">array([[[ <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">        [<span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">        [<span class="number">19</span>, <span class="number">20</span>, <span class="number">21</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>],</span><br><span class="line">        [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>],</span><br><span class="line">        [<span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>]]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.stack([a, b, c, d], axis=<span class="number">1</span>).shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>形象理解 &gt;&gt;&gt; <strong>axis 等于几就在哪个维度上进行堆叠。</strong>当 axis=1 时（会创建一个新轴），意味着第一个维度，即数组的每一行。故对于 1 维堆叠，会从 4 个（2, 3）的数组中，各自拿出自己的第一行元素进行堆叠形成 3 维数组的第一 “行”；各自拿出自己的第二行数据进行堆叠形成 3 维数组的第二 “行”，最终堆叠成一个（2, 4, 3）的三维数组。&lt;&lt;&lt; 比如四个数组分别表示对同一张图像进行不同图像处理后的数组，进行 1 维堆叠可以这些不同处理方式的数据有条理的堆叠形成一个数组，方便后续的统一处理。</p>
<p><strong>[3] &gt;&gt;&gt;&gt;</strong> axis=2</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.stack([a, b, c, d], axis=<span class="number">2</span>)</span><br><span class="line">array([[[ <span class="number">1</span>,  <span class="number">7</span>, <span class="number">13</span>, <span class="number">19</span>],</span><br><span class="line">        [ <span class="number">2</span>,  <span class="number">8</span>, <span class="number">14</span>, <span class="number">20</span>],</span><br><span class="line">        [ <span class="number">3</span>,  <span class="number">9</span>, <span class="number">15</span>, <span class="number">21</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">4</span>, <span class="number">10</span>, <span class="number">16</span>, <span class="number">22</span>],</span><br><span class="line">        [ <span class="number">5</span>, <span class="number">11</span>, <span class="number">17</span>, <span class="number">23</span>],</span><br><span class="line">        [ <span class="number">6</span>, <span class="number">12</span>, <span class="number">18</span>, <span class="number">24</span>]]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.stack([a, b, c, d], axis=<span class="number">2</span>).shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>

<p>形象理解 &gt;&gt;&gt; <strong>axis 等于几就在哪个维度上进行堆叠。</strong>当 axis=1 时（会创建一个新轴），意味着第二个维度，即数组的每一行中的更深一层的维度（单个元素）。注意这里不要理解为 2 维堆叠是对每一列拿出来进行堆叠！！！故对于 2 维堆叠，会从 4 个（2, 3）的数组中，各自拿出自己每个元素，在对应的位置，进行堆叠。&lt;&lt;&lt; 比如四个数组分别一个图像的 R、G、B 数据（为了更加形象，图像应该是 3 个像素矩阵），进行 2 维堆叠后，不就构成了图像的 RGB 三通道的数组了嘛。</p>
<p>更形象的理解 &gt;&gt;&gt; <font color="green">对于三维立方体数组，进行 2 维堆叠后，之前每个数组都是三维立方体数组的一个竖截面</font>~~~</p>
<blockquote>
<p>显而易见的是，你可以发现数组堆叠（stack）和数组连接（concatenate）的区别 &gt;&gt;&gt; 是否形成新的维度？！！</p>
</blockquote>
<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p><font color="red">↓↓↓↓↓↓ 2. numpy.hstack ↓↓↓↓↓↓</font></p>
<p>函数原型：hstack(tup) ，参数 tup 可以是元组，列表，或者 ndarray，其返回一个堆叠后的数组。从实例代码体会其含义：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [[<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">3</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = [[<span class="number">4</span>], [<span class="number">5</span>], [<span class="number">6</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.hstack([a, b])</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">5</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">6</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = np.arange(<span class="number">13</span>, <span class="number">19</span>).reshape((<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = np.arange(<span class="number">19</span>, <span class="number">25</span>).reshape((<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.hstack([c, d])</span><br><span class="line">array([[<span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">21</span>],</span><br><span class="line">       [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 三维数组水平堆叠</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1 = np.arange(<span class="number">0</span>, <span class="number">8</span>).reshape(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2 = np.arange(<span class="number">8</span>, <span class="number">16</span>).reshape(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1</span><br><span class="line">array([[[<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">3</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">        [<span class="number">6</span>, <span class="number">7</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2</span><br><span class="line">array([[[ <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">        [<span class="number">10</span>, <span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">        [<span class="number">14</span>, <span class="number">15</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.hstack((arr1, arr2))</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>],</span><br><span class="line">        [ <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">        [<span class="number">10</span>, <span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">4</span>,  <span class="number">5</span>],</span><br><span class="line">        [ <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">        [<span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">        [<span class="number">14</span>, <span class="number">15</span>]]])</span><br></pre></td></tr></table></figure>

<p>可见，水平堆叠就是将数组沿【水平/横轴/列顺序】方向进行堆叠。</p>
<p><font color="red">↓↓↓↓↓↓ 3. numpy.vstack ↓↓↓↓↓↓</font></p>
<p>函数原型：vstack(tup) ，参数 tup 可以是元组，列表，或者 ndarray，其返回一个堆叠后的数组。从实例代码体会其含义：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [[<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">3</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = [[<span class="number">4</span>], [<span class="number">5</span>], [<span class="number">6</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.vstack((a, b))</span><br><span class="line">array([[<span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>],</span><br><span class="line">       [<span class="number">5</span>],</span><br><span class="line">       [<span class="number">6</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = np.arange(<span class="number">13</span>, <span class="number">19</span>).reshape((<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = np.arange(<span class="number">19</span>, <span class="number">25</span>).reshape((<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.vstack((c, d))</span><br><span class="line">array([[<span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">       [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>],</span><br><span class="line">       [<span class="number">19</span>, <span class="number">20</span>, <span class="number">21</span>],</span><br><span class="line">       [<span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 三维数组垂直堆叠：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.vstack([arr1, arr2])</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>],</span><br><span class="line">        [ <span class="number">2</span>,  <span class="number">3</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">4</span>,  <span class="number">5</span>],</span><br><span class="line">        [ <span class="number">6</span>,  <span class="number">7</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">        [<span class="number">10</span>, <span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">        [<span class="number">14</span>, <span class="number">15</span>]]])</span><br></pre></td></tr></table></figure>

<p>可见，垂直堆叠就是将数组按 垂直（行顺序）进行堆叠。</p>
<p><font color="red">↓↓↓↓↓↓ 4. numpy.column_stack ↓↓↓↓↓↓</font></p>
<p>函数原型：column_stack(tup) ，参数 tup 可以是元组，列表，或者 ndarray，其返回一个堆叠后的数组。从实例代码体会其含义：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">1</span>, <span class="number">7</span>).reshape((<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e = [<span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.column_stack((a, e))</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">7</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">8</span>]])</span><br></pre></td></tr></table></figure>

<p>可见，该函数会将一个 1 维数组作为列堆叠到 2 维数组中。</p>
<hr>
<blockquote>
<p>理解 &gt;&gt;&gt; <strong>数组堆叠是沿轴进行的，数组拆分是垂直于轴进行分割的！！！</strong> &lt;&lt;&lt; 可以帮助你加深数组堆叠和拆分的理解。</p>
</blockquote>
<p>👇👇👇 <strong>数组拆分</strong> 👇👇👇</p>
<p>类似于数组堆叠（stack），NumPy 中也提供了以下方法，可用于数组的拆分：</p>
<ul>
<li><code>numpy.split(arr，indices_or_sections，axis=0)</code>：沿指定的轴将数组均匀分割为多个子数组；</li>
<li><code>numpy.hsplit(arr，indices_or_sections)</code>：按水平方向将数组拆分成多个子数组；</li>
<li><code>numpy.vsplit(arr，indices_or_sections)</code>：按垂直方向将数组拆分成多个子数组；</li>
<li><code>numpy.dsplit(arr，indices_or_sections)</code>：按深度方向将数组拆分成多个子数组；</li>
<li><code>numpy.array_split(arr, indices_or_sections, axis=0)</code>：沿指定的轴将数组近似均匀分割为多个子数组。</li>
</ul>
<p>数组拆分之后返回的结果是一个列表（list），列表中的每一项元素均为一个子数组（array），类似于如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[array(...),</span><br><span class="line"> array(...),</span><br><span class="line"> array(...),</span><br><span class="line"> array(...),</span><br><span class="line"> ... ]</span><br></pre></td></tr></table></figure>

<p>下面分别来看其区别：</p>
<p><font color="red">↓↓↓↓↓↓ 1. numpy.split ↓↓↓↓↓↓</font></p>
<p>该函数，可以沿指定的轴将数组均匀分割为多个子数组。其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.split(arr，indices_or_sections，axis)</span><br></pre></td></tr></table></figure>

<p>其中，参数 <code>arr</code> 表示待拆分的数组；参数 <code>indices_or_sections</code> &gt;&gt;&gt; 如果是一个 1-D 数组，代表沿轴切分的位置（看作多个索引对，左开右闭）；如果是一个整数，表示平均切分的份数（必须均分，否则报错：ValueError: array split does not result in an equal division）。参数 <code>axis</code> 表示要沿着哪个轴进行切分，默认为 0，二维数组中表示横向切分，为 1 时表示纵向切分。</p>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">9</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># int &gt;&gt;&gt; sections</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.split(arr, <span class="number">3</span>)</span><br><span class="line">[array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]), array([<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]), array([<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>])]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 无法均分时会产生报错：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.split(arr, <span class="number">4</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">ValueError: array split does <span class="keyword">not</span> result <span class="keyword">in</span> an equal division</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1-D array &gt;&gt;&gt; indices (左开右闭)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">8</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.split(arr, [<span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">10</span>])</span><br><span class="line">[array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]), array([<span class="number">3</span>, <span class="number">4</span>]), array([<span class="number">5</span>]), array([<span class="number">6</span>, <span class="number">7</span>]), array([], dtype=int32)]</span><br></pre></td></tr></table></figure>

<p><strong>常见机器学习用法 &gt;&gt;&gt;&gt; indices 为 (3,)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">8</span>)</span><br><span class="line"><span class="comment"># 在第三、四列之间进行分隔：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.split(a, (<span class="number">3</span>,))</span><br><span class="line">[array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]), array([<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>])]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 机器学习中的用法说明：</span></span><br><span class="line"><span class="comment"># axis=1（代表列），是要把 data 数据集中的所有数据按第三、四列之间分割为 X 集和 Y 集。</span></span><br><span class="line">x, y = np.split(data, (<span class="number">3</span>,), axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ↓↓↓↓↓↓ 样例 ↓↓↓↓↓↓</span></span><br><span class="line"><span class="comment"># 假设数组 arr 中每一行为一个样本数据（行中最后一个元素为样本对应的真实值）：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">20</span>).reshape(<span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">       [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>]])</span><br><span class="line"><span class="comment"># 划分出样本值 X 和真实值 Y 的数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.split(arr, (<span class="number">4</span>,), axis=<span class="number">1</span>)</span><br><span class="line">[array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">       [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>]]), array([[ <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">9</span>],</span><br><span class="line">       [<span class="number">14</span>],</span><br><span class="line">       [<span class="number">19</span>]])]</span><br></pre></td></tr></table></figure>

<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p><font color="red">↓↓↓↓↓↓ 2. numpy.array_split ↓↓↓↓↓↓</font></p>
<p>不同于 numpy.split 的强制均匀分割，<strong>array_split</strong> 函数，可以沿指定的轴将数组 <strong>近似均匀分割</strong> 为多个子数组。其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.array_split(arr, indices_or_sections, axis=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>数组近似拆分原则：前 L % n 个组的大小是（L // n + 1），剩下组的大小是（L // n）。其中 // 表示下取整（即 np.floor()），n 代表划分后数组的个数。</p>
</blockquote>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">8</span>)</span><br><span class="line"><span class="comment"># 默认垂直 axis=0 轴近似分割数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array_split(arr, <span class="number">3</span>)</span><br><span class="line">[array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]), array([<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]), array([<span class="number">6</span>, <span class="number">7</span>])]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1 = np.arange(<span class="number">14</span>).reshape(<span class="number">2</span>, <span class="number">7</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>],</span><br><span class="line">       [ <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>]])</span><br><span class="line"><span class="comment"># 垂直 axis=1 轴近似分割数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.array_split(arr1, <span class="number">2</span>, axis=<span class="number">1</span>)</span><br><span class="line">[array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>]]), array([[ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>],</span><br><span class="line">       [<span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>]])]</span><br></pre></td></tr></table></figure>

<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p><font color="red">↓↓↓↓↓↓ 3. numpy.hsplit &amp;&amp; numpy.vsplit ↓↓↓↓↓↓</font></p>
<p>垂直于 水平/竖直 轴拆分数组，要遵循均匀分割原则，否则报错。实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ↓↓↓↓↓↓ 水平分割 ↓↓↓↓↓↓ #</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [[<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">3</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = [[<span class="number">4</span>], [<span class="number">5</span>], [<span class="number">6</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res = np.hstack([a, b])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">5</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="comment"># 拆分水平堆叠后的数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.hsplit(res, (<span class="number">1</span>,))</span><br><span class="line">[array([[<span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>]]), array([[<span class="number">4</span>],</span><br><span class="line">       [<span class="number">5</span>],</span><br><span class="line">       [<span class="number">6</span>]])]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = np.arange(<span class="number">13</span>, <span class="number">19</span>).reshape((<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = np.arange(<span class="number">19</span>, <span class="number">25</span>).reshape((<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res = np.hstack([c, d])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.hsplit(res, (<span class="number">3</span>,))</span><br><span class="line">[array([[<span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">       [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>]]), array([[<span class="number">19</span>, <span class="number">20</span>, <span class="number">21</span>],</span><br><span class="line">       [<span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>]])]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ↓↓↓↓↓↓ 垂直分割 ↓↓↓↓↓↓ #</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [[<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">3</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = [[<span class="number">4</span>], [<span class="number">5</span>], [<span class="number">6</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res = np.vstack((a, b))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res</span><br><span class="line">array([[<span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>],</span><br><span class="line">       [<span class="number">5</span>],</span><br><span class="line">       [<span class="number">6</span>]])</span><br><span class="line"><span class="comment"># 拆分垂直堆叠后的数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.vsplit(res, (<span class="number">3</span>,))</span><br><span class="line">[array([[<span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>]]), array([[<span class="number">4</span>],</span><br><span class="line">       [<span class="number">5</span>],</span><br><span class="line">       [<span class="number">6</span>]])]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = np.arange(<span class="number">13</span>, <span class="number">19</span>).reshape((<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = np.arange(<span class="number">19</span>, <span class="number">25</span>).reshape((<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res = np.vstack((c, d))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res</span><br><span class="line">array([[<span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">       [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>],</span><br><span class="line">       [<span class="number">19</span>, <span class="number">20</span>, <span class="number">21</span>],</span><br><span class="line">       [<span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.vsplit(res, (<span class="number">2</span>,))</span><br><span class="line">[array([[<span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">       [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>]]), array([[<span class="number">19</span>, <span class="number">20</span>, <span class="number">21</span>],</span><br><span class="line">       [<span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>]])]</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="数组的增删改查"><a href="#数组的增删改查" class="headerlink" title="数组的增删改查"></a>数组的增删改查</h3><p>NumPy 中提供了对 Ndarray 数组中元素执行增、删、改、查等操作的方法，下面将分别介绍这些用法：</p>
<p>👇👇👇 <strong>数组删除</strong> 👇👇👇</p>
<p><font color="red">↓↓↓↓↓↓ 1. numpy.delete ↓↓↓↓↓↓</font></p>
<p><code>numpy.delete</code> 方法，可用于沿特定轴，删除数组中指定的子数组，返回一个新数组。其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.delete(arr, obj, axis)</span><br></pre></td></tr></table></figure>

<p>其中，参数 <code>obj</code> 可以为整数、整数数组或切片，表示要被删除的数组元素或子数组。参数 <code>axis</code> 表示沿着哪条轴删除子数组，需要注意的是 &gt;&gt;&gt; 若不提供 axis 参数，数组 arr 会先被展开为一维数组，然后进行删除。</p>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不提供 axis 参数情况下，删除了第 4 个元素（一维）：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.delete(arr, <span class="number">3</span>)</span><br><span class="line">array([ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除第 3 列元素：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.delete(arr, <span class="number">2</span>, axis=<span class="number">1</span>)</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">11</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除经切片后的数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr_slice = np.delete(arr, np.s_[::<span class="number">2</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr_slice</span><br><span class="line">array([ <span class="number">1</span>,  <span class="number">3</span>,  <span class="number">5</span>,  <span class="number">7</span>,  <span class="number">9</span>, <span class="number">11</span>])</span><br></pre></td></tr></table></figure>

<p><font color="red">↓↓↓↓↓↓ 2. numpy.unique ↓↓↓↓↓↓</font></p>
<p>该函数，可用于删除数组中重复的元素。其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.unique(arr, return_index=<span class="literal">False</span>, return_inverse=<span class="literal">False</span>, return_counts=<span class="literal">False</span>, axis=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>其中，参数 <code>return_index</code> 为 True 时，返回新数组元素在原数组中的位置（索引）；参数 <code>return_inverse</code> 为 True 时，返回原数组元素在新数组中的位置（索引）；参数 <code>return_counts</code> 为 True 时，返回去重后的数组元素在原数组中出现的次数。</p>
<p>关于参数 <code>axis=None</code>（默认），会将多维数组平铺为一维，然后输出其中的重复元素。实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.array([<span class="number">5</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">9</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认去重：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.unique(arr)</span><br><span class="line">array([<span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新数组元素在原数组中的索引：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>u, indices = np.unique(arr, return_index=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>u</span><br><span class="line">array([<span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>indices</span><br><span class="line">array([<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">9</span>], dtype=int64)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 原数组元素在新数组中的索引：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>u, indices = np.unique(arr, return_inverse=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>u</span><br><span class="line">array([<span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>indices</span><br><span class="line">array([<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">5</span>], dtype=int64)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新数组对应原数组中的元素重复次数：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>u, indices = np.unique(arr, return_counts=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>u</span><br><span class="line">array([<span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>indices</span><br><span class="line">array([<span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>], dtype=int64)</span><br></pre></td></tr></table></figure>

<p>而当 <code>axis=0/1/2/...</code> 时，会沿着相应的轴，删除轴上的重复元素（注意轴上的元素，并不是数组中的元素）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.array([[<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.unique(arr, axis=<span class="number">0</span>)</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]])</span><br></pre></td></tr></table></figure>

<hr>
<p>👇👇👇 <strong>数组增加</strong> 👇👇👇</p>
<p>关于增加数组元素，可分为插入和附加：</p>
<p><font color="red">↓↓↓↓↓↓ 1. numpy.insert ↓↓↓↓↓↓</font></p>
<p>类似于 delete 用法，该函数可以沿指定的轴，在给定索引值的前一个位置进行插入（<strong>行前插入</strong>）。其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.insert(arr, obj, values, axis)</span><br></pre></td></tr></table></figure>

<p>可以看到和 delete 的区别在于，需要在第三个参数位置设置需要插入的数组对象，并且 <code>axis</code> 用法同上。</p>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.array([[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>],[<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不提供 axis 参数情况下，在第 3 个元素前插入（一维）：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.insert(arr, <span class="number">2</span>, [<span class="number">11</span>,<span class="number">12</span>])</span><br><span class="line">array([ <span class="number">1</span>,  <span class="number">2</span>, <span class="number">11</span>, <span class="number">12</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 沿轴 0 方向插入一行（广播原则）：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.insert(arr, <span class="number">1</span>, <span class="number">11</span>, axis = <span class="number">0</span>)</span><br><span class="line">array([[ <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">       [<span class="number">11</span>, <span class="number">11</span>],</span><br><span class="line">       [ <span class="number">3</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>]])</span><br><span class="line"><span class="comment"># 传入数组需要满足广播原则条件，否则报错：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.insert(arr, <span class="number">1</span>, [<span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>], axis = <span class="number">0</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">ValueError: could <span class="keyword">not</span> broadcast <span class="built_in">input</span> array <span class="keyword">from</span> shape (<span class="number">1</span>,<span class="number">3</span>) into shape (<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 沿轴 1 方向插入一列：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.insert(arr, <span class="number">1</span>, <span class="number">11</span>, axis = <span class="number">1</span>)</span><br><span class="line">array([[ <span class="number">1</span>, <span class="number">11</span>,  <span class="number">2</span>],</span><br><span class="line">       [ <span class="number">3</span>, <span class="number">11</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">5</span>, <span class="number">11</span>,  <span class="number">6</span>]])</span><br></pre></td></tr></table></figure>

<p><font color="red">↓↓↓↓↓↓ 2. numpy.append ↓↓↓↓↓↓</font></p>
<p>该函数可以沿指定的轴，在轴的末尾进行添加（不再需要位置参数）。其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.append(arr, values, axis=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>其中，需要关注的参数是 <code>axis</code>，默认为 None，返回一个一维数组；对于二维数组，axis=0 追加的值会被添加到行，axis=1 恰好相反。</p>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认 axis=None 的情况下：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.append(arr, [<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>])</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 沿轴 0 方向，末尾添加一行：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.append(arr, [[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]], axis = <span class="number">0</span>)</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">       [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 沿轴 1 方向，末尾添加三列</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.append(arr, [[<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]], axis = <span class="number">1</span>)</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br></pre></td></tr></table></figure>

<p>需要注意的是 &gt;&gt;&gt; <strong>你需要保证添加轴上的维度一致！！！</strong>否则会产生报错。</p>
<hr>
<p>👇👇👇 <strong>数组元素查询</strong> 👇👇👇</p>
<p>NumPy 中还提供了一些在数组内执行 搜索功能的 方法，以 <strong>了解数组内元素的细节情况</strong>。</p>
<p>这里比较简单，不进行赘述了。列举如下（使用时查表即可）：</p>
<ul>
<li><code>numpy.nonzero(arr)</code>：返回数组中非 0 元素的索引；</li>
<li><code>numpy.flatnonzero(arr)</code>：平铺数组，并返回数组中非 0 元素的索引；</li>
<li><code>numpy.argmax(arr, axis, out)</code>：返回数组中指定轴上的最大值的索引；</li>
<li><code>numpy.nanargmax(arr, axis)</code>：返回数组中指定轴上的最大值的索引，忽略 NaN；</li>
<li><code>numpy.argmin(arr, axis, out)</code>：返回数组中指定轴上的最小值的索引；</li>
<li><code>numpy.nanargmin(arr, axis)</code>：返回数组中指定轴上的最小值的索引，忽略 NaN；</li>
<li><code>numpy.where(condition, [x, y])</code>：根据指定条件，从指定行、列返回元素；</li>
<li><code>numpy.argwhere(arr)</code>：返回数组中非 0 元素的索引，索引会按元素分组（表示一个非零元素）；</li>
<li><code>numpy.extract(condition, arr)</code>：返回满足某些条件的数组的元素；</li>
<li><code>numpy.count_nonzero(arr, axis=None, keepdims=False)</code>：统计数组中非 0 元素的数量。</li>
</ul>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># ↓↓↓↓↓↓ 1. nonzero &amp;&amp; flatnonzero &amp;&amp; argwhere ↓↓↓↓↓↓ #</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.array([[<span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">4</span>, <span class="number">0</span>], [<span class="number">5</span>, <span class="number">6</span>, <span class="number">0</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">array([[<span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">4</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">5</span>, <span class="number">6</span>, <span class="number">0</span>]])</span><br><span class="line"><span class="comment"># 获取非零元素索引</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.nonzero(x)</span><br><span class="line">(array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>]), array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]))</span><br><span class="line"><span class="comment"># 获取非零元素：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x[np.nonzero(x)]</span><br><span class="line">array([<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"><span class="comment"># 非零元素索引分组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.transpose(np.nonzero(x))</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">1</span>]])</span><br><span class="line"><span class="comment"># 分组返回非零元素索引</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argwhere(x)</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">1</span>]], dtype=int64)</span><br><span class="line"><span class="comment"># 获取数组平铺后的非零元素索引</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.flatnonzero(x)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>], dtype=int64)</span><br><span class="line"><span class="comment"># 获取非零元素：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x.ravel()[np.flatnonzero(x)]</span><br><span class="line">array([<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ↓↓↓↓↓↓ 2. argmin &amp;&amp; nanargmin ↓↓↓↓↓↓ #</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.array([[<span class="number">3</span>,<span class="number">4</span>,<span class="number">7</span>], [<span class="number">8</span>,<span class="number">2</span>,<span class="number">1</span>], [<span class="number">5</span>,<span class="number">9</span>,<span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">array([[<span class="number">3</span>, <span class="number">4</span>, <span class="number">7</span>],</span><br><span class="line">       [<span class="number">8</span>, <span class="number">2</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">5</span>, <span class="number">9</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="comment"># 获取数组平铺后的最小元素索引</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argmin(x)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="comment"># 获取最小元素：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x.ravel()[np.argmin(x)]</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argmin(x, axis=<span class="number">0</span>)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argmin(x, axis=<span class="number">1</span>)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>], dtype=int64)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ↓↓↓↓↓↓ 3. argmax &amp;&amp; nanargmax ↓↓↓↓↓↓ #</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.array([[<span class="number">3</span>,<span class="number">4</span>,<span class="number">7</span>], [<span class="number">8</span>,<span class="number">2</span>,<span class="number">1</span>], [<span class="number">5</span>,<span class="number">9</span>,<span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">array([[<span class="number">3</span>, <span class="number">4</span>, <span class="number">7</span>],</span><br><span class="line">       [<span class="number">8</span>, <span class="number">2</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">5</span>, <span class="number">9</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="comment"># 获取数组平铺后的最大元素索引</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argmax(x)</span><br><span class="line"><span class="number">7</span></span><br><span class="line"><span class="comment"># 获取最大元素：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x.ravel()[np.argmax(x)]</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argmax(x, axis=<span class="number">0</span>)</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>], dtype=int64)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argmax(x, axis=<span class="number">1</span>)</span><br><span class="line">array([<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>], dtype=int64)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ↓↓↓↓↓↓ 4. where ↓↓↓↓↓↓ #</span></span><br><span class="line"><span class="comment"># An array with elements from `x` where `condition` is True,</span></span><br><span class="line"><span class="comment"># and elements from `y` elsewhere.</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">8</span>).reshape(<span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.where(a&lt;<span class="number">5</span>, a, a*<span class="number">5</span>)</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>, <span class="number">25</span>, <span class="number">30</span>, <span class="number">35</span>]])</span><br><span class="line"><span class="comment"># 默认情况下，返回满足条件的索引值：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">8</span>, <span class="number">16</span>).reshape(<span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">       [<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.where(a&gt;<span class="number">10</span>)</span><br><span class="line">(array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>], dtype=int64), array([<span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=int64))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[np.where(a&gt;<span class="number">10</span>)]</span><br><span class="line">array([<span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ↓↓↓↓↓↓ 5. extract ↓↓↓↓↓↓ #</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.arange(<span class="number">12</span>).reshape((<span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>condition = np.mod(arr, <span class="number">3</span>)==<span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>condition</span><br><span class="line">array([[ <span class="literal">True</span>, <span class="literal">False</span>, <span class="literal">False</span>,  <span class="literal">True</span>],</span><br><span class="line">       [<span class="literal">False</span>, <span class="literal">False</span>,  <span class="literal">True</span>, <span class="literal">False</span>],</span><br><span class="line">       [<span class="literal">False</span>,  <span class="literal">True</span>, <span class="literal">False</span>, <span class="literal">False</span>]])</span><br><span class="line"><span class="comment"># 返回数组中使得条件为 True 的元素的值：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.extract(condition, arr)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ↓↓↓↓↓↓ 6. count_nonzero ↓↓↓↓↓↓ #</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">0</span>],</span><br><span class="line"><span class="meta">... </span>              [<span class="number">3</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">19</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.count_nonzero(a)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="comment"># 沿着轴 0 统计非零元素数目：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.count_nonzero(a, axis=<span class="number">0</span>)</span><br><span class="line">array([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>])</span><br><span class="line"><span class="comment"># 沿着轴 1 统计非零元素数目：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.count_nonzero(a, axis=<span class="number">1</span>)</span><br><span class="line">array([<span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="comment"># 统计时，保留数组维度信息：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.count_nonzero(a, axis=<span class="number">1</span>, keepdims=<span class="literal">True</span>)</span><br><span class="line">array([[<span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>]], dtype=int64)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="数组的排序"><a href="#数组的排序" class="headerlink" title="数组的排序"></a>数组的排序</h3><p>NumPy 中还提供了一个对数组内元素进行排序的方法，返回一个数组副本（Copy）。其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.sort(arr, axis=-<span class="number">1</span>, kind=<span class="string">&#x27;quicksort&#x27;</span>, order=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>其中，参数 <code>axis</code> 表示要排序的轴，默认 -1 表示沿最后一个轴进行排序；如果为 None，表示排序前要将数组铺平。参数 <code>kind</code> 表示要采用的排序算法，有三种模式 {‘quicksort’（快速排序），’mergesort’（归并排序），’heapsort’（堆排序）}。参数 <code>order</code> 表示，如果数组设置了字段，则 order 表示要排序的字段。</p>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.array([[<span class="number">3</span>,<span class="number">7</span>],[<span class="number">9</span>,<span class="number">1</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[<span class="number">3</span>, <span class="number">7</span>],</span><br><span class="line">       [<span class="number">9</span>, <span class="number">1</span>]])</span><br><span class="line"><span class="comment"># 默认情况下，沿着最后的轴（axis=1）进行排序：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(arr)</span><br><span class="line">array([[<span class="number">3</span>, <span class="number">7</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">9</span>]])</span><br><span class="line"><span class="comment"># 沿着轴 0 进行排序：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(arr, axis = <span class="number">0</span>)</span><br><span class="line">array([[<span class="number">3</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">9</span>, <span class="number">7</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 若数组设置了 `name` &amp;&amp; `age` 字段：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt = np.dtype([(<span class="string">&#x27;name&#x27;</span>,  <span class="string">&#x27;S10&#x27;</span>),(<span class="string">&#x27;age&#x27;</span>,  <span class="built_in">int</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.array([(<span class="string">&quot;raju&quot;</span>, <span class="number">21</span>),(<span class="string">&quot;anil&quot;</span>, <span class="number">25</span>),(<span class="string">&quot;ravi&quot;</span>, <span class="number">17</span>),  (<span class="string">&quot;amar&quot;</span>, <span class="number">27</span>)], dtype = dt)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([(<span class="string">b&#x27;raju&#x27;</span>, <span class="number">21</span>), (<span class="string">b&#x27;anil&#x27;</span>, <span class="number">25</span>), (<span class="string">b&#x27;ravi&#x27;</span>, <span class="number">17</span>), (<span class="string">b&#x27;amar&#x27;</span>, <span class="number">27</span>)],</span><br><span class="line">      dtype=[(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;S10&#x27;</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>)])</span><br><span class="line"><span class="comment"># 按照年龄字段进行排序：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(arr, order = <span class="string">&#x27;age&#x27;</span>)</span><br><span class="line">array([(<span class="string">b&#x27;ravi&#x27;</span>, <span class="number">17</span>), (<span class="string">b&#x27;raju&#x27;</span>, <span class="number">21</span>), (<span class="string">b&#x27;anil&#x27;</span>, <span class="number">25</span>), (<span class="string">b&#x27;amar&#x27;</span>, <span class="number">27</span>)],</span><br><span class="line">      dtype=[(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;S10&#x27;</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;&lt;i4&#x27;</span>)])</span><br></pre></td></tr></table></figure>

<p><strong>其它排序方法</strong> &gt;&gt;&gt;</p>
<ul>
<li><code>numpy.argsort(arr , axis=-1, kind=None, order=None)</code>：沿指定的轴，对数组的元素值进行排序，返回排序后的元素 索引数组；</li>
<li><code>numpy.lexsort(keys, axis)</code>：按 键序列 对数组进行排序，返回一个已排序的 索引数组。</li>
</ul>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.array([<span class="number">90</span>, <span class="number">29</span>, <span class="number">89</span>, <span class="number">12</span>])</span><br><span class="line"><span class="comment"># 获取排序后数组元素索引数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argsort(arr)</span><br><span class="line">array([<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>], dtype=int64)</span><br><span class="line"><span class="comment"># 排序后数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr[np.argsort(arr)]</span><br><span class="line">array([<span class="number">12</span>, <span class="number">29</span>, <span class="number">89</span>, <span class="number">90</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>] <span class="comment"># First column</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = [<span class="number">9</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>] <span class="comment"># Second column</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ind = np.lexsort((b,a)) <span class="comment"># Sort by a, then by b</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ind</span><br><span class="line">array([<span class="number">2</span>, <span class="number">0</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[(a[i],b[i]) <span class="keyword">for</span> i <span class="keyword">in</span> ind]</span><br><span class="line">[(<span class="number">1</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">9</span>), (<span class="number">3</span>, <span class="number">0</span>), (<span class="number">4</span>, <span class="number">1</span>), (<span class="number">4</span>, <span class="number">2</span>), (<span class="number">4</span>, <span class="number">4</span>), (<span class="number">5</span>, <span class="number">4</span>)]</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="NumPy-随机数"><a href="#NumPy-随机数" class="headerlink" title="NumPy 随机数"></a>NumPy 随机数</h2><p>NumPy 中还提供了一个随机功能模块（<code>numpy.random</code>），以提供随机数功能。基本的随机函数如下：</p>
<p><font color="red">↓↓↓↓↓↓ 1. numpy.random.rand ↓↓↓↓↓↓</font></p>
<p>该方法用于，指定一个给定维度的数组（<code>(d0, d1, ..., dn)</code>），并使用 <code>[0, 1)</code> 区间随机数据填充，数据均匀分布。其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.random.rand(d0, d1, ..., dn)</span><br></pre></td></tr></table></figure>

<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成一个元素值区间在 `[0, 1)` 的二维的，形状为（3, 2）的数据均匀分布的数组： </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.rand(<span class="number">3</span>, <span class="number">2</span>)</span><br><span class="line">array([[<span class="number">0.9766812</span> , <span class="number">0.38515738</span>],</span><br><span class="line">       [<span class="number">0.59869254</span>, <span class="number">0.26848813</span>],</span><br><span class="line">       [<span class="number">0.98355621</span>, <span class="number">0.51861994</span>]])</span><br></pre></td></tr></table></figure>

<p><font color="red">↓↓↓↓↓↓ 2. numpy.random.randn ↓↓↓↓↓↓</font></p>
<p>不同于  numpy.random.rand 的，该函数会生成一个元素值满足标准正态分布的数组。其语法格式同 rand：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.random.randn(d0, d1, ..., dn)</span><br></pre></td></tr></table></figure>

<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># 生成一个元素值满足标准正态分布的，其形状为（2, 4）的二维数组:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.randn(<span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line">array([[ <span class="number">0.28689859</span>,  <span class="number">0.62225787</span>, -<span class="number">0.74514634</span>, -<span class="number">1.28207413</span>],</span><br><span class="line">       [ <span class="number">0.08684388</span>,  <span class="number">0.4530653</span> , -<span class="number">1.61979964</span>, -<span class="number">1.17046996</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 你还可以：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> + <span class="number">2.5</span> * np.random.randn(<span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line">array([[ <span class="number">0.04701047</span>, -<span class="number">1.93698022</span>,  <span class="number">0.2829873</span> ,  <span class="number">1.74470424</span>],</span><br><span class="line">       [ <span class="number">0.37269291</span>,  <span class="number">1.13634982</span>,  <span class="number">0.05891712</span>, -<span class="number">0.78763252</span>]])</span><br></pre></td></tr></table></figure>

<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p><font color="red">↓↓↓↓↓↓ 3. numpy.random.randint ↓↓↓↓↓↓</font></p>
<p>该函数会生成一个元素值位于特定区间的，随机整数数组。其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.random.randint(low, high=<span class="literal">None</span>, size=<span class="literal">None</span>, dtype=<span class="built_in">int</span>)</span><br></pre></td></tr></table></figure>

<p>其中，前两个参数表示区间的上下限 <code>[low, high)</code> &lt;&lt;&lt; 前闭后开的；参数 <code>size</code> 用来指定数组尺寸。</p>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.randint(<span class="number">5</span>, <span class="number">10</span>, size=(<span class="number">2</span>, <span class="number">4</span>))</span><br><span class="line">array([[<span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">8</span>],</span><br><span class="line">       [<span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>]])</span><br></pre></td></tr></table></figure>

<p><font color="red">↓↓↓↓↓↓ 4. numpy.random.random_sample ↓↓↓↓↓↓</font></p>
<p>该函数会生成一个元素值位于 <code>[0, 1)</code> 的，指定大小（size）的，随机浮点数数组。其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.random.random_sample(size=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.random_sample()</span><br><span class="line"><span class="number">0.9886997552147712</span></span><br><span class="line"><span class="comment"># 生成一个一维数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.random_sample((<span class="number">5</span>,))</span><br><span class="line">array([<span class="number">0.70472921</span>, <span class="number">0.63700827</span>, <span class="number">0.58702326</span>, <span class="number">0.95931205</span>, <span class="number">0.25185975</span>])</span><br><span class="line"><span class="comment"># 生成一个形状为（2, 4）的二维数组：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.random_sample((<span class="number">2</span>, <span class="number">4</span>))</span><br><span class="line">array([[<span class="number">0.50799584</span>, <span class="number">0.92990624</span>, <span class="number">0.8807129</span> , <span class="number">0.20741762</span>],</span><br><span class="line">       [<span class="number">0.93899597</span>, <span class="number">0.74072453</span>, <span class="number">0.60292363</span>, <span class="number">0.50895451</span>]])</span><br></pre></td></tr></table></figure>

<p>还有三个类似于 <code>numpy.random.random_sample</code> 的方法，如下：</p>
<ul>
<li><code>numpy.random.random([size])</code></li>
<li><code>numpy.random.sample([size])</code></li>
<li><code>numpy.random.ranf([size])</code></li>
</ul>
<p>| ================================================== <strong>Split Line</strong> =============================================== |</p>
<p><font color="red">↓↓↓↓↓↓ 5. numpy.random.choice ↓↓↓↓↓↓</font></p>
<p>随机抽样生成 &gt;&gt;&gt; 该函数会 <strong>从给定的数组里随机抽取几个值</strong>，生成指定大小（size）的，随机抽样数组。其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.random.choice(arr, size=<span class="literal">None</span>, replace=<span class="literal">True</span>, p=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>其中，参数 <code>arr</code> 表示给定的或随机抽样的数组或整数，整数时同理于 <code>np.arange(arr)</code>；参数 <code>replace</code> 表示数组中的元素是否可以多次重复抽样；参数 <code>p</code> 用于指定数组元素关联的概率，不设定的话表示数组 <code>arr</code> 中元素均匀分布。</p>
<p>实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># np.arange(5) 中 3 出现的概率为 0.6：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.choice(<span class="number">5</span>, <span class="number">3</span>, p=[<span class="number">0.1</span>, <span class="number">0</span>, <span class="number">0.3</span>, <span class="number">0.6</span>, <span class="number">0</span>])</span><br><span class="line">array([<span class="number">3</span>, <span class="number">3</span>, <span class="number">0</span>]) <span class="comment"># random</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>aa_milne_arr = [<span class="string">&#x27;pooh&#x27;</span>, <span class="string">&#x27;rabbit&#x27;</span>, <span class="string">&#x27;piglet&#x27;</span>, <span class="string">&#x27;Christopher&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.choice(aa_milne_arr, <span class="number">5</span>, p=[<span class="number">0.5</span>, <span class="number">0.1</span>, <span class="number">0.1</span>, <span class="number">0.3</span>])</span><br><span class="line">array([<span class="string">&#x27;pooh&#x27;</span>, <span class="string">&#x27;pooh&#x27;</span>, <span class="string">&#x27;pooh&#x27;</span>, <span class="string">&#x27;Christopher&#x27;</span>, <span class="string">&#x27;piglet&#x27;</span>], <span class="comment"># random</span></span><br><span class="line">       dtype=<span class="string">&#x27;&lt;U11&#x27;</span>)</span><br></pre></td></tr></table></figure>

<hr>
<p>👇👇👇 <strong>概率密度分布</strong> 👇👇👇</p>
<p>NumPy 还提供了大量的满足特定概率密度分布的样本生成方法，使用和上述方法类似，使用时查表即可。如下：</p>
<ul>
<li><code>numpy.random.beta(a，b，size)</code>：从 Beta 分布中生成随机数；</li>
<li><code>numpy.random.binomial(n, p, size)</code>：从二项分布中生成随机数；</li>
<li><code>numpy.random.chisquare(df，size)</code>：从卡方分布中生成随机数；</li>
<li><code>numpy.random.dirichlet(alpha，size)</code>：从 Dirichlet 分布中生成随机数；</li>
<li><code>numpy.random.exponential(scale，size)</code>：从指数分布中生成随机数；</li>
<li><code>numpy.random.f(dfnum，dfden，size)</code>：从 F 分布中生成随机数；</li>
<li><code>numpy.random.gamma(shape，scale，size)</code>：从 Gamma 分布中生成随机数；</li>
<li><code>numpy.random.geometric(p，size)</code>：从几何分布中生成随机数；</li>
<li><code>numpy.random.gumbel(loc，scale，size)</code>：从 Gumbel 分布中生成随机数；</li>
<li><code>numpy.random.hypergeometric(ngood, nbad, nsample, size)</code>：从超几何分布中生成随机数；</li>
<li><code>numpy.random.laplace(loc，scale，size)</code>：从拉普拉斯双指数分布中生成随机数；</li>
<li><code>numpy.random.logistic(loc，scale，size)</code>：从逻辑分布中生成随机数；</li>
<li><code>numpy.random.lognormal(mean，sigma，size)</code>：从对数正态分布中生成随机数；</li>
<li><code>numpy.random.logseries(p，size)</code>：从对数系列分布中生成随机数；</li>
<li><code>numpy.random.multinomial(n，pvals，size)</code>：从多项分布中生成随机数；</li>
<li><code>numpy.random.multivariate_normal(mean, cov, size)</code>：从多变量正态分布绘制随机样本；</li>
<li><code>numpy.random.negative_binomial(n, p, size)</code>：从负二项分布中生成随机数；</li>
<li><code>numpy.random.noncentral_chisquare(df，nonc，size)</code>：从非中心卡方分布中生成随机数；</li>
<li><code>numpy.random.noncentral_f(dfnum, dfden, nonc, size)</code>：从非中心 F 分布中抽取样本；</li>
<li><code>numpy.random.normal(loc，scale，size)</code>：从正态分布绘制随机样本；</li>
<li><code>numpy.random.pareto(a，size)</code>：从具有指定形状的 Pareto II 或 Lomax 分布中生成随机数；</li>
<li><code>numpy.random.poisson(lam，size)</code>：从泊松分布中生成随机数；</li>
<li><code>numpy.random.power(a，size)</code>：从具有正指数 a-1 的功率分布中在 0，1 中生成随机数；</li>
<li><code>numpy.random.rayleigh(scale，size)</code>：从瑞利分布中生成随机数；</li>
<li><code>numpy.random.standard_cauchy(size)</code>：从标准 Cauchy 分布中生成随机数；</li>
<li><code>numpy.random.standard_exponential(size)</code>：从标准指数分布中生成随机数；</li>
<li><code>numpy.random.standard_gamma(shape，size)</code>：从标准 Gamma 分布中生成随机数；</li>
<li><code>numpy.random.standard_normal(size)</code>：从标准正态分布中生成随机数；</li>
<li><code>numpy.random.standard_t(df，size)</code>：从具有 df 自由度的标准学生 t 分布中生成随机数；</li>
<li><code>numpy.random.triangular(left，mode，right，size)</code>：从三角分布中生成随机数；</li>
<li><code>numpy.random.uniform(low，high，size)</code>：从均匀分布中生成随机数；</li>
<li><code>numpy.random.vonmises(mu，kappa，size)</code>：从 Von Mises 分布中生成随机数；</li>
<li><code>numpy.random.random.wald(mean，scale，size)</code>：从 Wald 或反高斯分布中生成随机数；</li>
<li><code>numpy.random.weibull(a，size)</code>：从威布尔分布中生成随机数；</li>
<li><code>numpy.random.zipf(a，size)</code>：从 Zipf 分布中生成随机数。</li>
</ul>
<hr>
<h2 id="NumPy-数学函数"><a href="#NumPy-数学函数" class="headerlink" title="NumPy 数学函数"></a>NumPy 数学函数</h2><p>Python 自带的运算符只能完成一些基本的数组运算，对于更加复杂的数学计算就显得捉襟见肘。</p>
<p>显而易见的，NumPy 为我们提供了更多的数学函数，以帮助我们更好地完成复杂的数值计算！！！</p>
<hr>
<h2 id="Numpy-代数支持"><a href="#Numpy-代数支持" class="headerlink" title="Numpy 代数支持"></a>Numpy 代数支持</h2><hr>
<p>参考链接：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/a1097304791/article/details/120901716">https://blog.csdn.net/a1097304791/article/details/120901716</a><br><a target="_blank" rel="noopener" href="https://www.runoob.com/numpy/numpy-ndarray-object.html">https://www.runoob.com/numpy/numpy-ndarray-object.html</a><br><a target="_blank" rel="noopener" href="http://c.biancheng.net/">http://c.biancheng.net/</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44330492/article/details/100126774">https://blog.csdn.net/weixin_44330492/article/details/100126774</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/csdn15698845876/article/details/73380803">https://blog.csdn.net/csdn15698845876/article/details/73380803</a></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Python 数据分析之 NumPy 数学计算库</p><p><a href="https://www.orangeshare.cn/2018/01/20/python-shu-ju-fen-xi-zhi-numpy-shu-xue-ji-suan-ku/">https://www.orangeshare.cn/2018/01/20/python-shu-ju-fen-xi-zhi-numpy-shu-xue-ji-suan-ku/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Waldeinsamkeit</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2018-01-20</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2023-05-09</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Python/">Python</a><a class="link-muted mr-2" rel="tag" href="/tags/Data-Analysis/">Data Analysis</a></div><div class="notification is-danger">You need to set <code>install_url</code> to use ShareThis. Please set it in <code>_config.yml</code>.</div></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="/" alt="Alipay"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2018/01/20/yi-wen-jie-xi-numpy-ndarray-duo-wei-shu-zu-jie-gou-she-ji/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">一文解析 NumPy ndarray 多维数组结构设计</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2018/01/14/python-zhong-de-yi-chang-chu-li-ji-zhi/"><span class="level-item">Python 中的异常处理机制</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div class="notification is-danger">You forgot to set the <code>shortname</code> for Disqus. Please set it in <code>_config.yml</code>.</div></div></div></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen  order-3 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Waldeinsamkeit"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Waldeinsamkeit</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">113</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">13</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">43</p></a></div></div></nav></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Introduction"><span class="level-left"><span class="level-item">1</span><span class="level-item">Introduction</span></span></a></li><li><a class="level is-mobile" href="#Setup-amp-amp-Import"><span class="level-left"><span class="level-item">2</span><span class="level-item">Setup &amp;&amp; Import</span></span></a></li><li><a class="level is-mobile" href="#NumPy-Ndarray-数组"><span class="level-left"><span class="level-item">3</span><span class="level-item">NumPy Ndarray 数组</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Ndarray-对象结构解析"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">Ndarray 对象结构解析</span></span></a></li><li><a class="level is-mobile" href="#NumPy-数据类型支持"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">NumPy 数据类型支持</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#dtype-Object"><span class="level-left"><span class="level-item">3.2.1</span><span class="level-item">dtype Object</span></span></a></li><li><a class="level is-mobile" href="#数据类型字符标识"><span class="level-left"><span class="level-item">3.2.2</span><span class="level-item">数据类型字符标识</span></span></a></li><li><a class="level is-mobile" href="#结构化数据类型"><span class="level-left"><span class="level-item">3.2.3</span><span class="level-item">结构化数据类型</span></span></a></li><li><a class="level is-mobile" href="#数据类型转换"><span class="level-left"><span class="level-item">3.2.4</span><span class="level-item">数据类型转换</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Ndarray-数组创建"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">Ndarray 数组创建</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#使用-Python-内置类型构建"><span class="level-left"><span class="level-item">3.3.1</span><span class="level-item">使用 Python 内置类型构建</span></span></a></li><li><a class="level is-mobile" href="#使用-Numpy-原生方法构建"><span class="level-left"><span class="level-item">3.3.2</span><span class="level-item">使用 Numpy 原生方法构建</span></span></a></li><li><a class="level is-mobile" href="#使用其它方法构建"><span class="level-left"><span class="level-item">3.3.3</span><span class="level-item">使用其它方法构建</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Ndarray-数组属性"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">Ndarray 数组属性</span></span></a></li><li><a class="level is-mobile" href="#Ndarray-数组维度和形状"><span class="level-left"><span class="level-item">3.5</span><span class="level-item">Ndarray 数组维度和形状</span></span></a></li><li><a class="level is-mobile" href="#Ndarray-数组索引和切片"><span class="level-left"><span class="level-item">3.6</span><span class="level-item">Ndarray 数组索引和切片</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#数组索引"><span class="level-left"><span class="level-item">3.6.1</span><span class="level-item">数组索引</span></span></a></li><li><a class="level is-mobile" href="#数组切片"><span class="level-left"><span class="level-item">3.6.2</span><span class="level-item">数组切片</span></span></a></li><li><a class="level is-mobile" href="#数组高级索引"><span class="level-left"><span class="level-item">3.6.3</span><span class="level-item">数组高级索引</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Ndarray-数组遍历"><span class="level-left"><span class="level-item">3.7</span><span class="level-item">Ndarray 数组遍历</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#通用遍历方法"><span class="level-left"><span class="level-item">3.7.1</span><span class="level-item">通用遍历方法</span></span></a></li><li><a class="level is-mobile" href="#迭代器方法"><span class="level-left"><span class="level-item">3.7.2</span><span class="level-item">迭代器方法</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Ndarray-Broadcast"><span class="level-left"><span class="level-item">3.8</span><span class="level-item">Ndarray Broadcast</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#广播原则"><span class="level-left"><span class="level-item">3.8.1</span><span class="level-item">广播原则</span></span></a></li><li><a class="level is-mobile" href="#广播的应用"><span class="level-left"><span class="level-item">3.8.2</span><span class="level-item">广播的应用</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#Ndarray-数组基本操作"><span class="level-left"><span class="level-item">4</span><span class="level-item">Ndarray 数组基本操作</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#数组重塑"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">数组重塑</span></span></a></li><li><a class="level is-mobile" href="#数组换轴"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">数组换轴</span></span></a></li><li><a class="level is-mobile" href="#数组变维"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">数组变维</span></span></a></li><li><a class="level is-mobile" href="#数组扩展和压缩"><span class="level-left"><span class="level-item">4.4</span><span class="level-item">数组扩展和压缩</span></span></a></li><li><a class="level is-mobile" href="#数组连接与拆分"><span class="level-left"><span class="level-item">4.5</span><span class="level-item">数组连接与拆分</span></span></a></li><li><a class="level is-mobile" href="#数组的增删改查"><span class="level-left"><span class="level-item">4.6</span><span class="level-item">数组的增删改查</span></span></a></li><li><a class="level is-mobile" href="#数组的排序"><span class="level-left"><span class="level-item">4.7</span><span class="level-item">数组的排序</span></span></a></li></ul></li><li><a class="level is-mobile" href="#NumPy-随机数"><span class="level-left"><span class="level-item">5</span><span class="level-item">NumPy 随机数</span></span></a></li><li><a class="level is-mobile" href="#NumPy-数学函数"><span class="level-left"><span class="level-item">6</span><span class="level-item">NumPy 数学函数</span></span></a></li><li><a class="level is-mobile" href="#Numpy-代数支持"><span class="level-left"><span class="level-item">7</span><span class="level-item">Numpy 代数支持</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="When Art Meets Tech" height="28"></a><p class="is-size-7"><span>&copy; 2024 Waldeinsamkeit</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" async></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>